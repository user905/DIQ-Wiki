## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS09 CC Log |
| Severity    | MAJOR |
| Unique ID   | 1090441   |
| Summary     | Is this Original UB CC Log ID missing in the CC Log ID list? |
| Error message | CC_log_ID_original_UB missing in CC_log_ID list. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Original UB CC Log ID Missing in CC Log ID List" is designed to verify the consistency of the CC Log ID data in the DS09 CC Log table. 

This check is performed to ensure that every Original UB CC Log ID is also present in the CC Log ID list. If an Original UB CC Log ID is found to be missing from the CC Log ID list, this indicates a discrepancy in the data.

The likely cause of this error is that there has been a change or deletion in the CC Log ID list that was not reflected in the Original UB CC Log ID. This could be due to a data entry error, a system error, or a change in the data source.

The fields causing the issue are the CC_log_ID_original_UB and CC_log_ID. The expected values for these fields are that every Original UB CC Log ID should also be present in the CC Log ID list. If this is not the case, the DIQ check will flag this as an error. 

To resolve this issue, you should review the data entry process for these fields and ensure that any changes to the CC Log ID list are also reflected in the Original UB CC Log ID.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that all Original UB CC Log IDs are included in the CC Log ID list. The test is checking the 'DS09 CC Log' table for any instances where the 'CC_log_ID_original_UB' is not found in the 'CC_log_ID' list. 

The importance of this check is to maintain data integrity and consistency. In the context of EVMS construction project management data, each CC Log ID should have a corresponding Original UB CC Log ID. If any are missing, it could lead to incomplete or inaccurate data analysis, which could potentially impact project management decisions.

The severity of this test is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. Therefore, it is recommended to address this issue to ensure accurate and reliable data analysis.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS09_CCLog_IsCCLogIdOrgUBMissingInCCLogIDList] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS09_CC_log
	WHERE
			upload_ID = @upload_ID  
		AND CC_log_ID_original_UB NOT IN (
			SELECT CC_log_ID
			FROM DS09_CC_log
			WHERE upload_ID = @upload_ID
		)
)
```
