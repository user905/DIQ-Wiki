## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 9080609   |
| Summary     | Is this CA / SLPP WAD type as something other than CA or SLPP in the WBS dictionary? |
| Error message | DS01.type <> CA or SLPP for this WBS_ID. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA / SLPP WAD Mistyped In WBS Dictionary" is designed to ensure that the type of CA / SLPP WAD is correctly entered in the WBS dictionary. This check is performed on the data in the DS08 WAD table.

The error message "DS01.type <> CA or SLPP for this WBS_ID" indicates that the type field in the DS01 WBS table does not match the expected values of 'CA' or 'SLPP' for the corresponding WBS_ID in the DS08 WAD table. 

This discrepancy could be due to a typographical error or incorrect data entry in the type field of the DS01 WBS table. The expected values for this field are 'CA' or 'SLPP'. Any other value will trigger this DIQ check and result in an error. 

To resolve this issue, review the type field in the DS01 WBS table for the corresponding WBS_ID in the DS08 WAD table. Ensure that the type is correctly entered as either 'CA' or 'SLPP'.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Work Authorization Document (WAD) type for a given Work Breakdown Structure (WBS) ID is correctly typed as either 'CA' or 'SLPP' in the WBS dictionary. The test is checking the 'DS08 WAD' table and has identified a potential issue, hence the status 'TEST' and severity 'MAJOR'. 

The importance of this check lies in maintaining the accuracy and consistency of the data. If the WAD type is mistyped, it could lead to confusion or misinterpretation of the data during analysis. This could potentially impact the project management process, leading to incorrect decisions or actions. Therefore, while this issue may not prevent the data from being reviewed, it is likely to cause problems during analysis if not corrected.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsCAWBSMistypedInDS01] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		W.*
	FROM
		DS08_WAD W INNER JOIN DS01_WBS WBS ON W.WBS_ID = WBS.WBS_ID
	WHERE
			W.upload_ID = @upload_ID
		AND WBS.upload_ID = @upload_ID
		AND W.WBS_ID_WP IS NULL
		AND type NOT IN ('CA','SLPP')
)
```
