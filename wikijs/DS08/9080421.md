> Note: DIQ has been deleted.
> {.is-danger}

## Basic Information

| Key           | Value                                                                                     |
| ------------- | ----------------------------------------------------------------------------------------- |
| Table         | DS08 WAD                                                                                  |
| Severity      | MAJOR                                                                                   |
| Unique ID     | 9080421                                                                                   |
| Summary       | Are the overhead budget dollars for this CA WAD missing in cost?                          |
| Error message | budget_overhead_dollars > 0 & DS03.BCWSi_dollars = 0 where EOC = overhead (by WBS_ID_CA). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA Overhead Dollars Missing In Cost" is designed to identify any discrepancies in the overhead budget dollars for the Control Account (CA) Work Authorization Document (WAD) in the DS08 WAD table.

The test is specifically looking for instances where the 'budget_overhead_dollars' field in the DS08 WAD table is greater than zero, but the corresponding 'BCWSi_dollars' field in the DS03_cost table is zero. This is only checked for entries where the 'EOC' (Element of Cost) is marked as 'overhead'.

If such instances are found, it indicates that there are overhead budget dollars allocated in the WAD, but these are not reflected in the cost data. This could be due to a data entry error, or a discrepancy between the budgeting and cost tracking processes.

The expected values for a correct entry would be a positive number in the 'budget_overhead_dollars' field in the DS08 WAD table, and a corresponding positive number in the 'BCWSi_dollars' field in the DS03_cost table for overhead costs.

Please ensure that the overhead budget dollars are correctly entered in both the DS08 WAD and DS03_cost tables to maintain data integrity and quality.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed to ensure that the overhead budget dollars for a particular Control Account Work Authorization Document (CA WAD) are not missing in the cost. The test checks if there are overhead budget dollars allocated (budget_overhead_dollars > 0) but the Budgeted Cost for Work Scheduled (BCWSi_dollars) is zero for overhead costs (EOC = overhead) by Work Breakdown Structure ID Control Account (WBS_ID_CA).

The importance of this check is to ensure that all overhead costs are properly accounted for in the budget. Overhead costs are indirect costs that are not directly tied to a specific project activity but are necessary for the overall operation, such as administrative costs. If these costs are not properly included in the budget, it could lead to underestimation of the project cost, which could in turn lead to financial issues down the line.

The severity of this check is marked as a MAJOR. This means that while the issue is not critical and the data can still be reviewed, it is likely to cause problems during analysis. It is important to address this issue to ensure accurate budgeting and financial planning for the project.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsOverheadBudgetMissingInDS03CA] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(

	with NonOverheadCA as (
		SELECT DISTINCT WBS_ID_CA
		FROM DS03_cost
		WHERE
				upload_ID = @upload_ID
			AND WBS_ID_WP NOT IN (
				SELECT WBS_ID_WP
				FROM DS03_cost
				WHERE upload_ID = @upload_ID AND EOC = 'Overhead' AND BCWSi_dollars <> 0
			)
	)
	SELECT
		W.*
	FROM
		DS08_WAD W INNER JOIN NonOverheadCA C ON W.WBS_ID = C.WBS_ID_CA
	WHERE
			upload_ID = @upload_ID
		AND TRIM(ISNULL(W.WBS_ID_WP,'')) = ''
		AND budget_overhead_dollars <> 0
)
```
