## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 9080420   |
| Summary     | Are the ODC budget dollars for this WP/PP WAD missing in cost? |
| Error message | budget_ODC_dollars > 0 & DS03.BCWSi_dollars = 0 where EOC = ODC (by WBS_ID_WP). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "WP ODC Dollars Missing In Cost" is designed to identify any discrepancies in the DS08 WAD table where the ODC budget dollars for a particular Work Package (WP) or Planning Package (PP) are missing in the cost data.

The test is triggered when the 'budget_ODC_dollars' field in the DS08 WAD table is greater than zero, but the corresponding 'BCWSi_dollars' field in the DS03 cost table is zero for the same WP/PP, and the 'EOC' field is marked as 'ODC'. This indicates that there is a budget allocated for Other Direct Costs (ODC), but no corresponding cost has been recorded in the DS03 cost table.

The likely cause of this error is a data entry or processing error, where the cost data for ODCs has not been correctly entered or updated in the DS03 cost table. This could be due to a variety of reasons, such as a delay in updating the cost data, a mistake in data entry, or a problem with the data import or processing system.

To resolve this issue, you should check the data in the DS03 cost table for the affected WP/PP and ensure that the 'BCWSi_dollars' field is correctly updated to reflect the ODC budget dollars recorded in the DS08 WAD table. If the 'BCWSi_dollars' field is correctly updated and the error still persists, you should check the 'EOC' field to ensure that it is correctly marked as 'ODC'.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Other Direct Costs (ODC) budget dollars for each Work Package (WP) or Planning Package (PP) Work Authorization Document (WAD) are correctly accounted for in the cost. The test checks if there are any instances where the budget for ODC is greater than 0, but the Budgeted Cost of Work Scheduled (BCWSi) in dollars is 0, specifically for ODCs. 

The importance of this check is to ensure that all costs are accurately represented and accounted for in the project management data. If ODC budget dollars are missing in the cost, it could lead to inaccurate financial reporting and budgeting, potentially causing financial discrepancies and mismanagement. 

The severity of this check is marked as a MAJOR, which implies that this issue, if not addressed, is likely to cause problems during the analysis of the data. It may not stop the data from being reviewed, but it could lead to inaccurate conclusions or decisions based on that data. Therefore, it's crucial to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsODCBudgetMissingInDS03WP] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with NonODCWP as (
		SELECT DISTINCT WBS_ID_WP
		FROM DS03_cost
		WHERE 
				upload_ID = @upload_ID 
			AND WBS_ID_WP NOT IN (
				SELECT WBS_ID_WP
				FROM DS03_cost
				WHERE upload_ID = @upload_ID AND EOC = 'ODC' AND BCWSi_dollars <> 0
			)
	)
	SELECT 
		W.*
	FROM
		DS08_WAD W INNER JOIN NonODCWP C ON W.WBS_ID_WP = C.WBS_ID_WP
	WHERE
			upload_ID = @upload_ID  
		AND budget_ODC_dollars <> 0
)
```
