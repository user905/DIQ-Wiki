## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 1080404   |
| Summary     | Does this WAD have only negative or zero budget dollar values? |
| Error message | budget_labor_dollars <= 0 & budget_labor_hours <= 0 & budget_material_dollars <= 0 & budget_ODC_dollars <= 0 & budget_subcontract_dollars <= 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Negative or Missing Budget Dollars" is designed to ensure that all budget values in the DS08 Work Authorization Directive (WAD) table are positive and present. 

This check is important because negative or missing budget values can lead to inaccurate financial reporting and project management issues. The fields that are checked for this are: budget_labor_dollars, budget_labor_hours, budget_material_dollars, budget_ODC_dollars, budget_overhead_dollars, and budget_subcontract_dollars.

If the DIQ check finds that any of these fields contain a value that is less than or equal to zero, it will flag the record as having an issue. This could be caused by a data entry error, such as accidentally entering a negative number, or by a missing value in the data.

To resolve this issue, you should review the flagged records and ensure that all budget fields contain positive values. If a budget field is missing a value, you should investigate why this is the case and enter the correct value if possible.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check for any negative or missing budget dollar values in the 'DS08 WAD' table. The test is looking at various budget categories such as labor, material, ODC, and subcontract dollars. If any of these values are less than or equal to zero, it triggers a warning.

The importance of this check is to ensure that all budget categories have been properly allocated and recorded. Negative or zero values could indicate data entry errors, unallocated funds, or potential oversights in budget planning. These issues could lead to inaccurate financial reporting and project cost overruns if not addressed.

The severity of this check is marked as a 'MAJOR', which means it is of moderate severity. While it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is crucial to address these issues to ensure accurate and reliable project management data.
## Code

```sql
CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsBudgetNegativeOrMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT 
		*
	FROM
		DS08_WAD
	WHERE
			upload_ID = @upload_ID  
		AND budget_labor_dollars <= 0 
		AND budget_labor_hours <= 0 
		AND budget_material_dollars <= 0 
		AND budget_ODC_dollars <= 0 
		AND budget_indirect_dollars <= 0 
		AND budget_subcontract_dollars <= 0
)
```

### Changelog

| Date       | Description of Changes   |
| ---------- | ------------------------ |
| 2024-04-30 | Logic adjusted to account for replacement of 'budget_overhead_dollars' with 'budget_indirect_dollars'. |
