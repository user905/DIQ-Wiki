## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 9080419   |
| Summary     | Are the ODC budget dollars for this CA WAD missing in cost? |
| Error message | budget_ODC_dollars > 0 & DS03.BCWSi_dollars = 0 where EOC = ODC (by WBS_ID_CA). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA ODC Dollars Missing In Cost" is designed to identify any discrepancies in the DS08 WAD table where the ODC budget dollars for a particular CA WAD are not reflected in the cost. 

The test is specifically looking for instances where the 'budget_ODC_dollars' field in the DS08 WAD table is greater than zero, but the corresponding 'BCWSi_dollars' field in the DS03 cost table is zero. This is only checked for records where the 'EOC' field is marked as 'ODC'. 

If the test identifies any such instances, it means that there are ODC budget dollars allocated for a CA WAD, but these are not reflected in the cost. This could be due to a data entry error, or it could indicate a problem with the budgeting or cost tracking process. 

The expected values for the 'budget_ODC_dollars' field in the DS08 WAD table and the 'BCWSi_dollars' field in the DS03 cost table should be consistent. If there are ODC budget dollars allocated for a CA WAD, these should also be reflected in the cost. 

Please ensure that all budget and cost data is entered correctly and consistently across all tables to maintain data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the Other Direct Costs (ODC) budget dollars for a particular Control Account (CA) Work Authorization Document (WAD) are missing in the cost. The test is checking if there are budget ODC dollars greater than zero but the Budgeted Cost of Work Scheduled (BCWS) in dollars is zero for the same CA WAD where the Element of Cost (EOC) is ODC.

The importance of this check is to ensure that all budgeted costs are properly accounted for in the project management data. If ODC budget dollars are not reflected in the cost, it could lead to inaccurate cost projections and financial reporting for the project. This could potentially cause problems during analysis, hence the severity is marked as a MAJOR. It is crucial to rectify this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsODCBudgetMissingInDS03CA] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with NonODCCA as (
		SELECT DISTINCT WBS_ID_CA
		FROM DS03_cost
		WHERE 
				upload_ID = @upload_ID 
			AND WBS_ID_WP NOT IN (
				SELECT WBS_ID_WP
				FROM DS03_cost
				WHERE upload_ID = @upload_ID AND EOC = 'ODC' AND BCWSi_dollars <> 0
			)
	)
	SELECT 
		W.*
	FROM
		DS08_WAD W INNER JOIN NonODCCA C ON W.WBS_ID = C.WBS_ID_CA
	WHERE
			upload_ID = @upload_ID  
		AND TRIM(ISNULL(W.WBS_ID_WP,'')) = ''
		AND budget_ODC_dollars <> 0
)
```
