## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 9080401   |
| Summary     | Is EVT for this SLPP or WP-level WAD something other than K? |
| Error message | EVT <> K for SLPP or PP WAD (by DS01.WBS_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "SLPP or PP WAD with Inappropriate EVT" is designed to ensure that the EVT (Earned Value Technique) for either SLPP (Summary Level Planning Packages) or PP (Planning Packages) in the DS08 WAD (Work Authorization Document) table is always 'K'. 

If this DIQ check fails, it indicates that there are records in the DS08 WAD table where the EVT is not 'K' for either SLPP or PP types. This discrepancy is identified by cross-referencing the WBS_ID (Work Breakdown Structure ID) in the DS08 WAD table with the WBS_ID in the DS01 WBS (Work Breakdown Structure) table.

The expected value for the EVT field in the DS08 WAD table for SLPP or PP types should always be 'K'. If the EVT field contains any other value or is left blank, this will cause the DIQ check to fail. 

To resolve this issue, review the data entries in the DS08 WAD table, specifically the EVT field for records associated with SLPP or PP types. Ensure that the EVT field is correctly set to 'K'.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS08 WAD' table to check if the EVT (Earned Value Technique) for the SLPP (Summary Level Planning Package) or WP-level (Work Package level) WAD (Work Authorization Document) is something other than 'K'. The test status is 'MAJOR', which means that if the EVT is not 'K', it could potentially cause problems during the analysis of the data.

The importance of this check lies in ensuring the accuracy and consistency of the data. The EVT is a key parameter in project management and it should be correctly assigned to ensure proper tracking and management of the project. If the EVT is not 'K' for SLPP or WP-level WAD, it could indicate a discrepancy in the data or a deviation from the standard procedure, which could lead to inaccurate project tracking and management. Therefore, this check is crucial to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_DoesSLPPorPPHaveNonKEVT] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with PPs as (
		SELECT WBS_ID, type
		FROM DS01_WBS
		WHERE upload_ID = @upload_ID AND type IN ('SLPP','PP')
	)
	SELECT 
		*
	FROM
		DS08_WAD
	WHERE
			upload_ID = @upload_ID   
		AND (
			WBS_ID IN (SELECT WBS_ID FROM PPs WHERE type = 'SLPP') OR
			WBS_ID_WP IN (SELECT WBS_ID FROM PPs WHERE type = 'PP') 
		)
		AND ISNULL(EVT,'') <> 'K'
)
```
