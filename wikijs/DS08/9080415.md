## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 9080415   |
| Summary     | Are the labor budget dollars for this WP/PP WAD missing in cost? |
| Error message | budget_labor_dollars > 0 & DS03.BCWSi_dollars = 0 where EOC = labor (by WBS_ID_WP). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "WP Labor Dollars Missing In Cost" is designed to identify any discrepancies in the labor budget dollars for a given Work Package (WP) or Planning Package (PP) in the DS08 WAD table. 

The test is checking if there are any instances where the 'budget_labor_dollars' field in the DS08 WAD table is greater than zero, but the corresponding 'BCWSi_dollars' field in the DS03 Cost table is zero. This is done for entries where the 'EOC' (Element of Cost) is labeled as 'Labor'. The test is performed by comparing the 'WBS_ID_WP' (Work Breakdown Structure ID for Work Package) in both tables.

If such instances are found, it indicates that there are labor budget dollars allocated for a WP/PP in the DS08 WAD table, but no corresponding cost is recorded in the DS03 Cost table. This could be due to a data entry error, a missing entry in the DS03 Cost table, or a discrepancy between the budgeted and actual labor costs.

To resolve this issue, you should ensure that for every WP/PP with labor budget dollars in the DS08 WAD table, there is a corresponding entry in the DS03 Cost table with a non-zero value in the 'BCWSi_dollars' field.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the labor budget dollars for a particular work package or planning package (WP/PP) are not missing in the cost. The test checks if there are any instances where the budgeted labor dollars are greater than zero but the budgeted cost of work scheduled in dollars (BCWSi_dollars) is zero for labor end of contract (EOC). 

The importance of this check is to ensure that all labor costs are accurately accounted for in the budget. If labor costs are not properly included, it could lead to inaccurate budgeting and financial planning, potentially causing financial issues for the project. 

The severity of this check is a MAJOR, which means that while it may not prevent the data from being reviewed, it could cause problems during analysis. It is crucial to address this issue to ensure accurate and reliable project cost management and analysis.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsLaborBudgetMissingInDS03WP] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with NonLaborWP as (
		SELECT DISTINCT WBS_ID_WP
		FROM DS03_cost
		WHERE 
				upload_ID = @upload_ID 
			AND WBS_ID_WP NOT IN (
				SELECT WBS_ID_WP
				FROM DS03_cost
				WHERE upload_ID = @upload_ID AND EOC = 'Labor' AND BCWSi_dollars <> 0
			)
	)
	SELECT 
		W.*
	FROM
		DS08_WAD W INNER JOIN NonLaborWP C ON W.WBS_ID_WP = C.WBS_ID_WP
	WHERE
			upload_ID = @upload_ID  
		AND budget_labor_dollars <> 0
)
```
