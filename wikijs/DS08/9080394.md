> Note: DIQ has been deleted.
> {.is-danger}

## Basic Information

| Key           | Value                                                                                   |
| ------------- | --------------------------------------------------------------------------------------- |
| Table         | DS08 WAD                                                                                |
| Severity      | WARNING                                                                                 |
| Unique ID     | 9080394                                                                                 |
| Summary       | Are the overhead budget dollars for this CA WAD misaligned with what is in cost?        |
| Error message | budget_overhead_dollars <> SUM(DS03.BCWSi_dollars) where EOC = overhead (by WBS_ID_CA). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA Overhead Dollars Misaligned With Cost" is designed to ensure that the overhead budget dollars for a Control Account (CA) Work Authorization Document (WAD) in DS08 WAD table align with the corresponding cost in the DS03 Cost table.

The test is performed by comparing the 'budget_overhead_dollars' field in the DS08 WAD table with the sum of 'BCWSi_dollars' in the DS03 Cost table for each Control Account where the Element of Cost (EOC) is 'Overhead'.

If the test finds a discrepancy between these two values, it indicates that the overhead budget dollars for the Control Account in the DS08 WAD table do not match the overhead cost in the DS03 Cost table. This could be due to an error in data entry, a miscalculation, or a change in the overhead cost that has not been reflected in the budget.

The expected value for the 'budget_overhead_dollars' field in the DS08 WAD table should be equal to the sum of 'BCWSi_dollars' in the DS03 Cost table for the corresponding Control Account where the EOC is 'Overhead'. If these values do not match, it is recommended to review and correct the data in these fields to ensure data integrity and quality.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed to ensure that the overhead budget dollars for a particular Control Account Work Authorization Document (CA WAD) align with the cost data. The test is comparing the budgeted overhead dollars with the sum of the Budgeted Cost of Work Scheduled (BCWSi) dollars for overhead costs.

The importance of this check is to ensure that the overhead costs are accurately represented and budgeted for in the project. If the overhead budget dollars do not match the actual overhead costs, it could lead to financial discrepancies and potential budget overruns.

The severity of this check is marked as a WARNING. This means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during the analysis of the data. It is crucial to address this issue to ensure accurate financial planning and management of the project.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_AreOverheadDollarsMisalignedWithDS03CA] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	with OverheadCA as (
		SELECT WBS_ID_CA, SUM(BCWSi_dollars) BCWSc
		FROM DS03_cost
		WHERE upload_ID = @upload_ID AND EOC = 'Overhead'
		GROUP BY WBS_ID_CA
	)
	SELECT
		W.*
	FROM
		DS08_WAD W INNER JOIN OverheadCA C 	ON W.WBS_ID = C.WBS_ID_CA
											AND budget_indirect_dollars <> C.BCWSc
	WHERE
			upload_ID = @upload_ID
		AND TRIM(ISNULL(W.WBS_ID_WP,'')) = ''
)
```
