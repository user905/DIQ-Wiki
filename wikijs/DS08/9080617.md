## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MINOR |
| Unique ID   | 9080617   |
| Summary     | Is the POP start for this Work Package WAD after the actual start in the forecast schedule? |
| Error message | pop_start > DS04.AS_date where schedule_type = FC (by DS08.WBS_ID_WP & DS04.WBS_ID_WP). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "POP Start After Schedule Actual Start (WP)" is designed to ensure that the Period of Performance (POP) start date for a Work Package (WP) in the DS08 WAD table does not occur after the actual start date in the forecast schedule from the DS04 Schedule table. 

This check is important for maintaining the integrity of the project schedule and ensuring that work is not marked as starting before the official start date. 

If an error is flagged by this DIQ check, it is likely because the POP start date for a WP in the DS08 WAD table is later than the actual start date in the DS04 Schedule table. This discrepancy could be due to a data entry error or a change in the project schedule that was not properly updated in both tables. 

The fields causing the issue are the 'POP_start_date' in the DS08 WAD table and the 'AS_date' in the DS04 Schedule table. The expected value is that the 'POP_start_date' should be on or before the 'AS_date' for the corresponding WP. 

To resolve this issue, review the dates for the affected WP in both tables and update them to ensure that the POP start date is not after the actual start date.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Planned Operation Period (POP) start date for a particular Work Package (WP) in the DS08 WAD table does not occur after the actual start date in the forecast schedule. The test is checking if 'pop_start' is greater than 'DS04.AS_date' where the schedule type is 'FC' (Forecast), and this is done by matching 'DS08.WBS_ID_WP' & 'DS04.WBS_ID_WP'.

The importance of this check is to maintain the integrity and accuracy of the project schedule. If the POP start date is after the actual start date, it could indicate a discrepancy in the project timeline, which could lead to potential issues in project management and execution. This could also affect the accuracy of project forecasting and planning.

The severity of this check is marked as an 'MINOR', which means it is less severe but still important. It indicates that there might be minor problems or that the data doesn't follow all best practices. It's not a critical error, but it's something that should be reviewed and corrected to ensure the accuracy and reliability of the project data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsPOPStartAfterDS04ASDateWP] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with WPActS as (
		SELECT WBS_ID WBS, MAX(AS_date) ActS
		FROM DS04_schedule
		WHERE upload_ID = @upload_ID AND schedule_type = 'FC'
		GROUP BY WBS_ID
	)
	SELECT 
		W.*
	FROM
		DS08_WAD W INNER JOIN WPActS A 	ON W.WBS_ID_WP = A.WBS	
										AND W.POP_start_date > A.ActS
	WHERE
		upload_ID = @upload_ID  
)
```
