## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | MAJOR |
| Unique ID   | 1080433   |
| Summary     | Is the POP start later than the initial auth date for the latest WAD revision? |
| Error message | pop_start_date > initial_auth_date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "POP Start After Initial Auth Date" is performed on the DS08 WAD table. This check is designed to ensure that the Period of Performance (POP) start date is not later than the initial authorization date for the latest Work Authorization Directive (WAD) revision.

If an error message "pop_start_date > initial_auth_date" is displayed, it indicates that the POP start date is later than the initial authorization date. This discrepancy could be due to incorrect data entry or an issue with the timing of the authorization process.

The fields causing this issue are the 'pop_start_date' and 'initial_auth_date'. The expected values for these fields should be such that the 'pop_start_date' is either on or before the 'initial_auth_date'. 

Please review these dates in your data to ensure they are accurate and reflect the correct sequence of events in the project management process.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test, titled "POP Start After Initial Auth Date," is being performed on the 'DS08 WAD' table to check if the Period of Performance (POP) start date is later than the initial authorization date for the latest Work Authorization Document (WAD) revision. The test is currently in the 'TEST' status and has been assigned a severity level of 'MAJOR'. 

The purpose of this test is to ensure that the project's timeline is logically consistent and that work is not being authorized to start before the project has officially been approved. This is important because inconsistencies in the project timeline can lead to confusion, miscommunication, and potential delays in the project. 

The severity level of 'MAJOR' indicates that if this issue is not addressed, it is likely to cause problems during the analysis of the data. It may not prevent the data from being reviewed, but it could potentially lead to inaccurate conclusions or decisions being made based on the data. Therefore, it is crucial to address this issue to maintain the integrity and quality of the EVMS construction project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsPOPStartAfterInitialAuth] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		W.*
	FROM 
		DS08_WAD W INNER JOIN LatestWPWADRev_Get(@upload_ID) R 	ON W.WBS_ID = R.WBS_ID
																AND ISNULL(W.WBS_ID_WP,'') = R.WBS_ID_WP
																AND W.auth_PM_date = R.PMAuth
	WHERE 
			upload_ID = @upload_ID
		AND pop_start_date >= initial_auth_date
)
```
