## Basic Information

| Key           | Value                                                                      |
| ------------- | -------------------------------------------------------------------------- |
| Table         | DS06 Resources                                                             |
| Severity      | MAJOR                                                                    |
| Unique ID     | 1060249                                                                    |
| Summary       | Does this role have a non-labor EOC type?                                  |
| Error message | Role found where EOC is not labor (role_ID is not blank and EOC <> labor). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "Resource Role with Non-Labor EOC" is performed on the DS06 Resources table. This check is designed to ensure that all roles in the table have an 'End of Contract' (EOC) type that is classified as 'Labor'.

If an error is flagged by this DIQ check, it means that there is a role in the DS06 Resources table where the EOC type is not classified as 'Labor'. This is likely due to an incorrect data entry in the 'EOC' field for a particular role.

The fields causing the issue are the 'role_ID' and 'EOC'. The 'role_ID' field should not be blank, indicating that a role has been assigned. The 'EOC' field should contain the value 'Labor', indicating that the EOC type for the role is labor.

If these conditions are not met, the DIQ check will flag an error. To resolve this, ensure that all roles in the DS06 Resources table have a 'Labor' EOC type.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed on the 'DS06 Resources' table to check if there are any roles that have a non-labor EOC (Estimate of Completion) type. The purpose of this check is to ensure that all roles are correctly classified in terms of their EOC type. If a role that should be classified as labor is incorrectly classified as non-labor, it could lead to inaccuracies in project cost estimates and resource allocation.

The severity of this check is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. For instance, it could lead to underestimation of labor costs or overestimation of non-labor costs, which could in turn affect the overall project budget and timeline. Therefore, it is important to address this issue to ensure the integrity and quality of the project management data.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS06_Res_IsRoleEOCNonLabor] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(

	SELECT
		*
	FROM
		DS06_schedule_resources
	WHERE
			upload_id = @upload_ID
		AND role_ID IS NOT NULL
		AND EOC IS NOT NULL
		AND EOC <> 'Labor'
)
```

### Changelog

| Date       | Description of Changes                                   |
| ---------- | -------------------------------------------------------- |
| 2024-04-30 | Logic adjusted to include records where EOC is not null. |
