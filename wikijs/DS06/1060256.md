## Basic Information

| Key           | Value                                                                           |
| ------------- | ------------------------------------------------------------------------------- |
| Table         | DS06 Resources                                                                  |
| Severity      | MAJOR                                                                         |
| Unique ID     | 1060256                                                                         |
| Summary       | Is the EOC for this labor type resource something other than Labor or Indirect? |
| Error message | type = labor where EOC <> Labor or Indirect.                                    |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check for the DS06 Resources table, titled "Labor Resource Lacking Appropriate EOC", is designed to ensure that the Estimated at Completion (EOC) for labor type resources is correctly classified as either 'Labor' or 'Overhead'.

If an error is flagged by this DIQ check, it indicates that there are labor type resources in the DS06 Resources table where the EOC is neither 'Labor' nor 'Overhead'. This discrepancy could be due to a data entry error or a misclassification of the EOC for labor type resources.

To resolve this issue, review the EOC field for all labor type resources in the DS06 Resources table. Ensure that the EOC for each labor type resource is correctly classified as either 'Labor' or 'Overhead'. Any other values in the EOC field for labor type resources are likely to trigger this DIQ check.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed to ensure that all labor resources in the 'DS06 Resources' table have an appropriate 'EOC' (Element of Cost) assigned to them. The EOC should be either 'Labor' or 'Overhead' for labor type resources. If the EOC for a labor type resource is something other than 'Labor' or 'Overhead', it may indicate a data entry error or inconsistency in the data.

The importance of this check is to maintain the integrity and quality of the data. Inaccurate or inconsistent EOC assignments can lead to incorrect cost calculations and misinterpretation of the data, which can in turn affect project management decisions and outcomes. The severity level of 'MAJOR' indicates that this issue is likely to cause problems during data analysis if not addressed.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS06_Res_AreLaborTypeAndEOCMismatched] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT *
	FROM DS06_schedule_resources
	WHERE upload_id = @upload_ID AND type = 'Labor' AND (EOC IS NULL OR EOC NOT IN ('Labor','Indirect'))
)
```

### Changelog

| Date       | Description of Changes                                                                                                                                                        |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 2024-04-30 | Logic adjusted to include records where EOC is either null or does not belong to 'Labor' or 'Indirect', rather than excluding records with EOC values 'Labor' and 'Overhead'. |
