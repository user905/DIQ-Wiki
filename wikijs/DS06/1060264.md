## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS06 Resources |
| Severity    | MAJOR |
| Unique ID   | 1060264   |
| Summary     | Are material, ODC, subcontract, or labor EOCs comingled in the same task? |
| Error message | Task_ID found with combo of material, ODC, subcontract, and/or labor EOC. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This Data Integrity and Quality (DIQ) check is designed to ensure that within the DS06 Resources table, Elements of Cost (EOCs) such as material, Other Direct Costs (ODCs), subcontract, and labor are not improperly combined within the same task. The integrity check identifies any task that contains a combination of these EOC types, which is not a standard practice for project management and accounting within the Department of Energy's EVMS guidelines.

The error highlighted by this check indicates that there are tasks within the project's schedule where different types of direct costs are being reported together. This could potentially lead to issues with tracking and managing project costs accurately, as each EOC type has its own budgeting, reporting, and management requirements. The fields involved in this issue are primarily the `Task_ID` and `EOC` fields within the DS06 Resources table. The expected practice is that each task should be associated with only one type of EOC to maintain clear and accurate financial tracking.

To resolve this issue, review the tasks identified by this check to ensure that each task is correctly assigned only one type of EOC. This may involve splitting tasks into separate entries for each type of cost where necessary or correcting any misclassified EOCs to reflect the true nature of the costs involved.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The DIQ test titled "EOCs Improperly Mingled" is performed on the "DS06 Resources" table to check if there is a mixture of different types of Elements of Cost (EOCs) such as material, Other Direct Costs (ODC), subcontract, or labor within the same task. The presence of a combination of these EOCs in a single task is flagged by this test. The reason this test is important is that the mingling of different types of EOCs within the same task can lead to inaccuracies in cost tracking, budgeting, and financial reporting. It can complicate the analysis of project costs and the allocation of resources, potentially leading to budget overruns or misallocation of funds. The severity level of "MAJOR" indicates that while this issue is likely to cause problems during the analysis of project data, it does not render the data unreviewable but suggests that corrective action should be taken to ensure accurate and effective project management and financial control.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS06_Res_AreEOCsComingled] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT
		R1.*
	FROM
		DS06_schedule_resources R1 INNER JOIN DS06_schedule_resources R2 ON R1.task_ID = R2.task_ID
																		AND R1.schedule_type = R2.schedule_type
																		AND ISNULL(R1.subproject_ID,'') = ISNULL(R2.subproject_ID,'')
																		AND ISNULL(R1.EOC,'') <> ISNULL(R2.EOC,'')
	WHERE
			R1.upload_id = @upload_ID
		AND R2.upload_id = @upload_ID
		AND R1.EOC <> 'Indirect'
		AND R2.EOC <> 'Indirect'
)
```
