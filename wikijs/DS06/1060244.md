## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS06 Resources |
| Severity    | MAJOR |
| Unique ID   | 1060244   |
| Summary     | Does this resource have negative remaining budget (dollars and/or units)? |
| Error message | Resource found with negative remaining budget (remaining_dollars < 0 and/or remaining_units < 0). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Resources with Negative Remaining Budget" is designed to identify any resources in the DS06 Resources table that have a negative remaining budget. This could be in terms of either dollars or units.

The error message "Resource found with negative remaining budget (remaining_dollars < 0 and/or remaining_units < 0)" indicates that there are resources where the remaining budget, either in dollars or units, is less than zero. This is not a valid state for a resource, as it implies that more budget has been used than was initially allocated.

The fields causing this issue are 'remaining_dollars' and 'remaining_units'. The expected values for these fields should always be zero or greater. A negative value suggests an error in data entry or calculations related to the resource's budget.

To resolve this issue, review the resources with negative remaining budgets and correct the values in the 'remaining_dollars' and/or 'remaining_units' fields as necessary. This will ensure the accuracy and integrity of the resource budget data in the DS06 Resources table.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS06 Resources' table to identify any resources that have a negative remaining budget, either in terms of dollars or units. The purpose of this check is to ensure that all resources are properly allocated and that there are no discrepancies in the budgeting process. 

The severity of this test is marked as a 'MAJOR', which means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis. For instance, a resource with a negative remaining budget could indicate an over-allocation of resources or a miscalculation in the budget, which could lead to inaccurate project cost projections and potentially impact the overall project management.

Therefore, this check is important as it helps maintain the integrity and quality of the project management data by ensuring that all resources are accurately accounted for and that the budgeting process is correctly implemented.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS06_Res_IsRemBudgetLTZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS06_schedule_resources
	WHERE
			upload_id = @upload_ID
		AND (remaining_dollars < 0 OR remaining_units < 0)
)
```
