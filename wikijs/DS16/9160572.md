## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS16 Risk Register Tasks |
| Severity    | MAJOR |
| Unique ID   | 9160572   |
| Summary     | Is this task ID missing in the forecast schedule? |
| Error message | task_ID not in DS04.task_ID list where schedule_type = FC. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Task ID Missing in Forecast Schedule" is designed to verify the consistency of task IDs between the DS16 Risk Register Tasks and the DS04 Forecast Schedule. 

This check is performed to ensure that every task ID listed in the DS16 Risk Register Tasks is also present in the DS04 Forecast Schedule. If a task ID from the DS16 Risk Register Tasks is not found in the DS04 Forecast Schedule, it will be flagged as an error.

The error is likely caused by a discrepancy between the task IDs in the two datasets. This could occur if a new task is added to the DS16 Risk Register Tasks but not updated in the DS04 Forecast Schedule, or if there is a typographical error when entering the task ID.

To resolve this issue, ensure that all task IDs in the DS16 Risk Register Tasks are correctly entered and updated in the DS04 Forecast Schedule. The expected value for each task ID in the DS16 Risk Register Tasks should match a corresponding task ID in the DS04 Forecast Schedule.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that all task IDs in the 'DS16 Risk Register Tasks' table are also present in the 'DS04' table where the schedule type is 'Forecast'. The purpose of this check is to maintain data integrity and consistency across different tables. 

The importance of this check lies in the fact that missing task IDs in the forecast schedule could lead to incomplete or inaccurate risk analysis. This could potentially cause problems during project management and decision-making processes. 

The severity of this issue is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. Therefore, it is crucial to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS16_RR_Tasks_IsTaskIDMissingInDS04FC] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS16_risk_register_tasks
	WHERE 
			upload_ID = @upload_ID
		AND task_ID NOT IN (
			SELECT task_ID
			FROM DS04_schedule
			WHERE upload_ID = @upload_ID AND schedule_type = 'FC'
		)
)
```
