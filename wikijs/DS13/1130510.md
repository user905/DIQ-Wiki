## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS13 Subcontract |
| Severity    | MAJOR |
| Unique ID   | 1130510   |
| Summary     | Are profit fee dollars missing on this subcontract? |
| Error message | profit_fee_dollars missing or 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Profit Fee Dollars Missing" is designed to identify any instances in the DS13 Subcontract table where the profit fee dollars are either missing or recorded as zero. 

The field causing the issue in this case is 'profit_fee_dollars'. This field is expected to contain a numerical value representing the profit fee in dollars for each subcontract. If the field is left blank or contains a zero, this DIQ check will flag it as an error. 

The absence of a value or a zero in this field could be due to a data entry error, omission, or a subcontract that does not include a profit fee. It is important to ensure that all subcontracts have an accurate profit fee recorded in the 'profit_fee_dollars' field to maintain data integrity and quality. 

If this DIQ check flags any records, it is recommended to review the original data source for these subcontracts and correct any errors or omissions.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS13 Subcontract' table to check if there are any missing or zero values in the 'profit_fee_dollars' field. The test is titled 'Profit Fee Dollars Missing' and it is currently in the 'TEST' status. 

The importance of this check is to ensure that all subcontracts have a profit fee dollar amount assigned to them. This is crucial for accurate financial tracking and reporting. If profit fee dollars are missing or zero, it could lead to inaccurate financial analysis and projections, which could potentially impact the overall profitability and financial health of the project.

The severity of this test is 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. Therefore, it is recommended that this issue be addressed to ensure the accuracy and reliability of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS13_SubK_AreProfitFeeDollarsMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS13_subK
	WHERE 
			upload_ID = @upload_ID 
		AND ISNULL(profit_fee_dollars,0) = 0
)
```
