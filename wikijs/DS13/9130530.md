## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS13 Subcontract |
| Severity    | MINOR |
| Unique ID   | 9130530   |
| Summary     | Is the forecast finish date misaligned with the early finish in the forecast schedule? |
| Error message | FC_finish_date <> DS04.EF_date where schedule_type = FC (by task_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "FC Finish Misaligned with Forecast Schedule" is designed to identify any discrepancies between the forecast finish date and the early finish date in the forecast schedule. This check is performed on the DS13 Subcontract table.

The error is likely to occur when the forecast finish date (FC_finish_date) in the DS13 Subcontract table does not match the early finish date (EF_date) in the DS04 Schedule table for the same task. This discrepancy can occur due to data entry errors or changes in the project schedule that are not reflected in both tables.

The expected values for this check would be that the FC_finish_date in the DS13 Subcontract table should be equal to the EF_date in the DS04 Schedule table for each task. If these values are not equal, it indicates a misalignment between the forecast finish date and the early finish date in the forecast schedule, which could potentially lead to issues in project management and scheduling. 

Please ensure that the forecast finish dates in the DS13 Subcontract table are consistently updated to match the early finish dates in the DS04 Schedule table to maintain data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the forecast finish date aligns with the early finish in the forecast schedule for the DS13 Subcontract table. The test is checking if there are any discrepancies between the forecast completion date (FC_finish_date) and the early finish date (DS04.EF_date) for tasks where the schedule type is forecasted (FC).

The importance of this check is to maintain the integrity and accuracy of the project schedule. Misalignment between these dates could indicate potential issues with the project timeline, such as delays or early completions, which could impact project management decisions and overall project success. 

The severity of this check is marked as an MINOR. This means that while it may not immediately prevent data from being reviewed, it could potentially cause minor problems or indicate that the data does not adhere to best practices. It's a signal to review the data and correct any discrepancies to ensure accurate forecasting and scheduling.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS13_SubK_IsFCFinishMisalignedWithDS04FCEF] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		SK.*
	FROM 
		DS13_subK SK INNER JOIN DS04_schedule S ON SK.task_ID = S.task_ID
	WHERE 
			SK.upload_ID = @upload_ID 
		AND S.upload_ID = @upload_ID
		AND SK.FC_finish_date <> S.EF_date
		AND schedule_type = 'FC'
)
```
