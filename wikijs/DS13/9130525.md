## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS13 Subcontract |
| Severity    | MINOR |
| Unique ID   | 9130525   |
| Summary     | Is the baseline start date misaligned with the early start in the baseline schedule? |
| Error message | BL_start_date <> DS04.ES_date where schedule_type = BL (by task_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "BL Start Misaligned with Baseline Schedule" is designed to identify any discrepancies between the baseline start date in the DS13 Subcontract table and the early start date in the DS04 Schedule table. 

This check is performed by comparing the 'BL_start_date' field in the DS13 Subcontract table with the 'ES_date' field in the DS04 Schedule table for each task. The check is specifically looking for instances where these two dates do not match for tasks that are marked as 'BL' in the 'schedule_type' field.

If an error is flagged by this DIQ check, it is likely due to a misalignment between the baseline start date and the early start date in the baseline schedule. This could be caused by a data entry error or a change in the project schedule that was not properly updated in both tables.

To resolve this issue, you should review the flagged tasks and ensure that the baseline start date in the DS13 Subcontract table matches the early start date in the DS04 Schedule table. If these dates are not supposed to match for a specific task, you may need to update the 'schedule_type' field to reflect the correct schedule type.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the baseline start date is misaligned with the early start in the baseline schedule for the DS13 Subcontract table. The test is comparing the baseline start date (BL_start_date) with the early start date (DS04.ES_date) for each task ID where the schedule type is baseline (BL). 

The importance of this check is to ensure that the project's baseline schedule is correctly aligned. Misalignment could lead to incorrect assumptions or calculations about the project's timeline, potentially causing delays or inefficiencies. 

The severity of this check is classified as an MINOR. This means that while it may not immediately prevent data review or analysis, it could cause minor problems or indicate that the data does not fully adhere to best practices. It's a signal that the data should be reviewed for potential improvements or corrections to enhance data integrity and quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS13_SubK_IsBLStartMisalignedWithDS04BLES] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		SK.*
	FROM 
		DS13_subK SK INNER JOIN DS04_schedule S ON SK.task_ID = S.task_ID
	WHERE 
			SK.upload_ID = @upload_ID 
		AND S.upload_ID = @upload_ID
		AND SK.BL_start_date <> S.ES_date
		AND schedule_type = 'BL'
)
```
