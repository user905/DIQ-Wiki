## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS13 Subcontract |
| Severity    | MAJOR |
| Unique ID   | 9130538   |
| Summary     | Is this task id missing in the forecast labor resources? |
| Error message | task_ID not in DS06.task_ID where EOC = Labor & schedule_type = FC. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Task ID Missing in Labor Resources" is designed to ensure that all task IDs in the DS13 Subcontract table are also present in the DS06 Schedule Resources table, specifically for records where the 'EOC' field is set to 'Labor' and the 'schedule_type' field is set to 'FC'. 

If this DIQ check fails, it indicates that there are task IDs in the DS13 Subcontract table that are not found in the DS06 Schedule Resources table under the specified conditions. This discrepancy could be due to a variety of reasons such as data entry errors, missing data, or inconsistencies between the two data sets. 

To resolve this issue, you should verify that all task IDs in the DS13 Subcontract table are correctly entered and also exist in the DS06 Schedule Resources table. Additionally, ensure that the 'EOC' field is set to 'Labor' and the 'schedule_type' field is set to 'FC' for these corresponding task IDs in the DS06 table. 

Remember, maintaining data integrity and quality is crucial for accurate and reliable project management data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if there are any missing Task IDs in the forecast labor resources within the DS13 Subcontract table. The Task ID is a crucial piece of information that links tasks to their respective labor resources. If a Task ID is missing, it could lead to issues in tracking labor resources, forecasting, and overall project management.

The severity of this test is marked as a MAJOR. This means that while the data can still be reviewed, the missing Task ID is likely to cause problems during analysis. It could lead to inaccurate labor resource allocation, incorrect forecasting, and potential delays in the project timeline. Therefore, it's important to address this issue to ensure the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS13_SubK_IsTaskIDMissingInDS06Labor] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS13_subK
	WHERE 
			upload_ID = @upload_ID 
		AND task_ID NOT IN  (
			SELECT task_ID
			FROM DS06_schedule_resources
			WHERE upload_ID = @upload_ID AND schedule_type = 'FC' AND EOC = 'Labor'
		)
)
```
