## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS13 Subcontract |
| Severity    | MINOR |
| Unique ID   | 9130522   |
| Summary     | Is the baseline finish date misaligned with the early finish in the baseline schedule? |
| Error message | BL_finish_date <> DS04.EF_date where schedule_type = BL (by task_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "BL Finish Misaligned with Baseline Schedule" is designed to identify any discrepancies between the baseline finish date and the early finish date in the baseline schedule. This check is performed on the DS13 Subcontract table.

The error is likely to occur when the baseline finish date (BL_finish_date) in the DS13 Subcontract table does not match the early finish date (EF_date) in the DS04 Schedule table for the same task. This discrepancy can occur due to data entry errors or changes in the project schedule that are not reflected in the baseline schedule.

The fields causing the issue are the BL_finish_date field in the DS13 Subcontract table and the EF_date field in the DS04 Schedule table. The expected values for these fields should be identical for each task when the schedule type is 'BL' (Baseline). 

If the DIQ check identifies a discrepancy, it is recommended to review and update the relevant dates in the DS13 Subcontract and DS04 Schedule tables to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the baseline finish date is misaligned with the early finish in the baseline schedule for the DS13 Subcontract table. The importance of this check is to ensure that the project is on track and that there are no discrepancies between the planned finish date and the actual finish date. This is crucial for maintaining the project schedule and ensuring that all tasks are completed on time. The severity of this check is an MINOR, which means that while it may not cause major problems, it could potentially lead to minor issues or indicate that the data does not adhere to all best practices. Therefore, it is important to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS13_SubK_IsBLFinishMisalignedWithDS04BLEF] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		SK.*
	FROM 
		DS13_subK SK INNER JOIN DS04_schedule S ON SK.task_ID = S.task_ID
	WHERE 
			SK.upload_ID = @upload_ID 
		AND S.upload_ID = @upload_ID
		AND SK.BL_finish_date <> S.EF_date
		AND schedule_type = 'BL'
)
```
