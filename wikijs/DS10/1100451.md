## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS10 CC Log Detail |
| Severity    | MAJOR |
| Unique ID   | 1100451   |
| Summary     | Does this AUW dollar change above the NTE? |
| Error message | AUW = Y & dollars_delta > NTE_dollars_delta. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "AUW Dollar Change Exceeds NTE" is performed on the DS10 CC Log Detail table. This check is designed to identify any instances where the change in Authorized Unpriced Work (AUW) dollars exceeds the Not-To-Exceed (NTE) dollar change.

The error message "AUW = Y & dollars_delta > NTE_dollars_delta" indicates that the check has identified records where the AUW flag is set to 'Y' (indicating that the work is authorized but not yet priced), and the change in dollars (dollars_delta) is greater than the NTE dollar change (NTE_dollars_delta).

This error is likely to occur if there are inaccuracies or inconsistencies in the data entry process. For example, if the change in AUW dollars is incorrectly recorded as being greater than the NTE dollar change, this would trigger the error. 

To avoid this error, ensure that the AUW flag is correctly set and that the change in AUW dollars (dollars_delta) does not exceed the NTE dollar change (NTE_dollars_delta). The expected values for these fields should align with the actual costs and limits associated with the work being performed.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS10 CC Log Detail' table to check if the Authorized Unpriced Work (AUW) dollar change exceeds the Not To Exceed (NTE) dollar change. The test is flagged as a MAJOR, indicating that if the AUW dollar change is indeed greater than the NTE dollar change, it could potentially cause problems during data analysis.

The importance of this check lies in maintaining the financial integrity of the project. AUW refers to the cost of work that is authorized but not yet priced. NTE is a limit that indicates the maximum cost that a project or task is allowed to reach. If the AUW dollar change exceeds the NTE dollar change, it could indicate cost overruns or mismanagement of funds, which could impact the overall project budget and timeline. Therefore, this check is crucial to ensure that the project is financially on track and to prevent any potential financial issues that could arise.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS10_CCLogDetails_AreAUWDollarsGtNTE] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS10_CC_log_detail
	WHERE 
			upload_ID = @upload_ID
		AND AUW = 'Y'
		AND dollars_delta > 0
		AND NTE_dollars_delta < dollars_delta
)
```
