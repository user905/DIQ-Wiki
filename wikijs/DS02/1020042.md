## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS02 OBS |
| Severity    | MAJOR |
| Unique ID   | 1020042   |
| Summary     | Are the Title and Narrative the same? |
| Error message | Narrative is not distinct from the Title |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Title Equal to Narrative" is designed to ensure that the Title and Narrative fields in the DS02 OBS table are not identical. This check is important because each field should contain unique information. 

If an error is flagged by this DIQ check, it means that the Title and Narrative fields contain the same information. This could be due to a data entry error or a system issue that duplicated the information from one field to the other. 

To resolve this issue, review the entries in the DS02 OBS table and ensure that the Title and Narrative fields contain distinct information. The Title field should contain a concise description of the entry, while the Narrative field should provide a more detailed explanation or context. 

Please note that this check only applies to entries where the Title field is not null, meaning it contains data. If the Title field is empty, this check will not be performed.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the Title and Narrative fields in the DS02 OBS table are identical. The importance of this check is to ensure that there is distinct and meaningful information in both fields. Having the same content in both fields could lead to redundancy and lack of detailed information. The severity level is marked as MAJOR, which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. This could be due to confusion or lack of clarity caused by the repetition of information. Therefore, it is important to address this issue to maintain the quality and integrity of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS02_OBS_IsNarrativeEqualToTitle] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
    -- Insert statements for procedure here
	SELECT 
		* 
	FROM 
		DS02_OBS
	WHERE 
			upload_ID = @upload_ID
		AND TRIM(Title)=TRIM(Narrative)
		AND Title IS NOT NULL
)
```
