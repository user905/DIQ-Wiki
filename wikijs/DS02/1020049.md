## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS02 OBS |
| Severity    | MAJOR |
| Unique ID   | 1020049   |
| Summary     | Is the Parent OBS ID missing? |
| Error message | Parent OBS ID is missing. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Parent OBS ID Missing" is designed to identify any instances in the DS02 OBS table where the Parent OBS ID is missing. This check is particularly relevant for records where the 'external' field is marked as 'N' and the 'Level' field is greater than 1. 

The Parent OBS ID is a crucial piece of information that should be present in all records, as it helps establish the hierarchical relationship between different Organizational Breakdown Structure (OBS) elements. If this field is missing, it could lead to inaccuracies in project management data and hinder the understanding of the project's organizational structure.

If the DIQ check identifies any records with a missing Parent OBS ID, it is likely due to an error in data entry or a glitch in the data import process. The expected value for the Parent OBS ID field would be a valid identifier that corresponds to an existing OBS element. 

To resolve this issue, you should review the data entry or import process to ensure that all necessary fields, including the Parent OBS ID, are being correctly populated.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the Parent OBS (Organizational Breakdown Structure) ID is missing in the DS02 OBS table. The OBS is a hierarchical, tree-like structure that represents the project's control structure that relates the work to be done to the individuals responsible. 

The importance of this check is to ensure that each OBS entry has a corresponding Parent OBS ID. This is crucial for maintaining the hierarchical structure of the project and for tracing responsibility and control paths. If the Parent OBS ID is missing, it could lead to confusion about the project's structure and control, and could potentially cause problems during data analysis.

The severity of this check is marked as a MAJOR. This means that while it's not an immediate threat to the data's usability, it's likely to cause problems during analysis if not addressed. It's recommended to fix this issue to ensure the integrity and quality of the EVMS construction project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS02_OBS_IsParentMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
    -- Insert statements for procedure here
	SELECT 
		* 
	FROM 
		DS02_OBS
	WHERE 
		upload_ID = @upload_ID 
    AND [external] = 'N'
		AND	[Level]>1 
		AND TRIM(ISNULL(parent_OBS_ID,''))=''
)
```
