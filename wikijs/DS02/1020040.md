## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS02 OBS |
| Severity    | WARNING |
| Unique ID   | 1020040   |
| Summary     | Does the Title contain the OBS ID? |
| Error message | OBS ID found within OBS Title. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Title Contains OBS ID" is designed to verify the integrity of the data in the DS02 OBS table. Specifically, it checks whether the OBS ID is found within the OBS Title. 

If an error message "OBS ID found within OBS Title" is returned, it indicates that the OBS ID is incorrectly included in the OBS Title field. This is likely due to an error in data entry or a system glitch that has caused the OBS ID to be duplicated in the OBS Title field.

The OBS ID and OBS Title fields should contain distinct information. The OBS ID field should contain a unique identifier for the OBS, while the OBS Title field should contain a descriptive title for the OBS. The OBS Title should not include the OBS ID. 

To resolve this issue, review the data entries in the DS02 OBS table, specifically the OBS ID and OBS Title fields. Ensure that the OBS Title field does not contain the OBS ID. Correct any entries where the OBS ID is found within the OBS Title to maintain data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS02 OBS' table to check if the title contains the OBS ID. The severity level is 'WARNING', which means that this issue could potentially cause problems during data analysis. The purpose of this test is to ensure that the OBS ID, which is a unique identifier, is not duplicated in the title field. This is important because having the OBS ID in the title could lead to confusion and errors in data interpretation. It could also indicate a lack of data normalization, where data is unnecessarily repeated. Therefore, this check is crucial to maintain the integrity and quality of the EVMS construction project management data.
## Code

```sql
CREATE FUNCTION [dbo].[fnDIQ_DS02_OBS_DoesTitleContainOBSID] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT 
		* 
	FROM 
		DS02_OBS 
	WHERE 
			upload_ID = @upload_ID 
		AND Title COLLATE Latin1_General_BIN like '%' + OBS_ID + '%'
)
```

### Changelog

| Date       | Description of Changes   |
| ---------- | ------------------------ |
| 2024-04-30 | Logic adjusted to use a case-sensitive search for 'Title' using 'OBS_ID', rather than a case-insensitive search. |
