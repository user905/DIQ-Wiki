## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS11 Variance |
| Severity    | MAJOR |
| Unique ID   | 9110494   |
| Summary     | Is the WBS ID for this VAR missing in the WBS Hierarchy? |
| Error message | WBS_ID not in DS01.WBS_ID list. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "WBS ID Missing In WBS Hierarchy" is designed to verify the consistency of the Work Breakdown Structure (WBS) ID in the DS11 Variance table. This check ensures that every WBS ID in the DS11 Variance table is also present in the DS01 WBS Hierarchy table.

If an error message "WBS_ID not in DS01.WBS_ID list" is displayed, it indicates that there are one or more WBS IDs in the DS11 Variance table that are not found in the DS01 WBS Hierarchy table. This discrepancy could be due to data entry errors, missing data, or inconsistencies between the two tables.

To resolve this issue, you should cross-verify the WBS IDs in both tables and ensure that they match. Any missing or inconsistent WBS IDs in the DS01 WBS Hierarchy table should be updated or added to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Work Breakdown Structure (WBS) ID for a particular variance is present in the WBS Hierarchy. The WBS is a key tool in project management that breaks a project into manageable chunks. The WBS ID is a unique identifier for each of these chunks. If a WBS ID for a variance is missing in the WBS Hierarchy, it could lead to confusion, miscommunication, and errors in project management and data analysis.

The severity of this test is marked as a MAJOR. This means that while the issue does not make the data completely unreviewable, it is likely to cause problems during analysis. It could lead to incorrect conclusions or decisions being made based on the data. Therefore, it is important to address this issue to ensure the integrity and quality of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS11_VAR_IsWBSMissingInDS01] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS11_variance
	WHERE 
			upload_ID = @upload_ID
		AND WBS_ID NOT IN (
			SELECT WBS_ID
			FROM DS03_cost
			WHERE upload_ID = @upload_ID
		)
)
```
