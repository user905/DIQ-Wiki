## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS11 Variance |
| Severity    | MINOR |
| Unique ID   | 1110493   |
| Summary     | Is there a schedule variance root cause narrative without an impact statement? |
| Error message | narrative_RC_SVi or narrative_RC_SVc found but narrative_impact_schedule is blank or missing. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check for the DS11 Variance table, titled "Schedule Variance Root Cause Narrative Missing Impact", is designed to identify instances where a schedule variance root cause narrative is present, but an accompanying impact statement is missing. 

This issue arises when either the 'narrative_RC_SVi' or 'narrative_RC_SVc' fields are populated, indicating that a root cause narrative for schedule variance exists, but the 'narrative_impact_schedule' field is either blank or missing. 

The 'narrative_RC_SVi' and 'narrative_RC_SVc' fields should contain descriptions of the root cause for any schedule variances, while the 'narrative_impact_schedule' field should contain a statement detailing the impact of these variances. 

If the DIQ check identifies records where the 'narrative_impact_schedule' field is blank or missing, it suggests that the impact of the schedule variance has not been adequately documented. This could potentially lead to a lack of understanding about the implications of the variance, and hinder effective project management. 

To resolve this issue, ensure that every time a root cause narrative for schedule variance is provided in the 'narrative_RC_SVi' or 'narrative_RC_SVc' fields, an accompanying impact statement is also included in the 'narrative_impact_schedule' field.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS11 Variance' table to check for instances where a schedule variance root cause narrative is present, but an accompanying impact statement is missing. The test is looking for records where 'narrative_RC_SVi' or 'narrative_RC_SVc' fields are populated, but the 'narrative_impact_schedule' field is blank or missing.

The importance of this check is to ensure that all schedule variance root cause narratives are accompanied by an impact statement. This is crucial for understanding the implications of the variance on the project schedule. Without this information, it may be difficult to fully comprehend the effects of the variance and to plan appropriate corrective actions.

The severity of this check is classified as an MINOR. This means that while it's not a critical issue that would prevent the data from being reviewed, it's still a potential problem. It could cause minor issues during analysis or indicate that the data doesn't adhere to all best practices. Therefore, it's recommended to address this issue to maintain high data integrity and quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS11_VAR_IsSVRCNarrMissingImpactNarr] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS11_variance
	WHERE 
			upload_ID = @upload_ID
		AND (
			TRIM(ISNULL(narrative_RC_SVi,'')) <> '' OR 
			TRIM(ISNULL(narrative_RC_SVc,'')) <> '')
		AND TRIM(ISNULL(narrative_impact_schedule,'')) = ''
)
```
