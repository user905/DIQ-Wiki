## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS11 Variance |
| Severity    | MAJOR |
| Unique ID   | 1110488   |
| Summary     | Is the narrative type missing? |
| Error message | narrative_type missing or blank. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Narrative Type Missing" is designed to identify any instances in the DS11 Variance table where the 'narrative_type' field is either missing or blank. 

The 'narrative_type' field is crucial for the proper categorization and understanding of the data entries. If this field is left blank or is missing, it could lead to misinterpretation or misclassification of the data, which could in turn affect the overall project management process.

The DIQ check scans the DS11 Variance table and flags any records where the 'narrative_type' field is either missing or blank. The expected value for this field is a non-empty string that accurately describes the type of narrative associated with the record. 

If the DIQ check identifies any records with missing or blank 'narrative_type' fields, it is likely due to an oversight during the data entry process or a malfunction in the data collection system. It is recommended to review the data entry process to ensure that all fields are being properly filled out, and to check the data collection system for any potential issues that could be causing the 'narrative_type' field to be left blank or missing.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS11 Variance' table to check if the 'narrative_type' field is missing or blank. The 'narrative_type' field is crucial as it provides context or explanation about the data in the table. If this field is missing or blank, it could lead to misinterpretation or misunderstanding of the data, which could in turn affect the analysis and decision-making process.

The severity of this test is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is important to address this issue to ensure the accuracy and reliability of the data analysis. This check is part of the Data Integrity and Quality (DIQ) checks to ensure that the data used in the EVMS construction project management at the US Department of Energy is complete, accurate, and reliable.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS11_VAR_IsNarrTypeMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS11_variance
	WHERE 
			upload_ID = @upload_ID
		AND TRIM(ISNULL(narrative_type,'')) = ''
)
```
