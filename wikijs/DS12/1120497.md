## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS12 Variance CAL |
| Severity    | MAJOR |
| Unique ID   | 1120497   |
| Summary     | Is the closed date for this corrective action before the original due date? |
| Error message | closed_date < original_due_date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Closed Date Before Original Due Date" is performed on the DS12 Variance CAL table. This check is designed to ensure that the closed date for a corrective action is not earlier than the original due date. 

If an error is flagged by this DIQ check, it indicates that there is an inconsistency in the dates recorded for the corrective action. Specifically, the 'closed_date' field is recorded as being earlier than the 'original_due_date'. This is not expected as a corrective action cannot logically be closed before its original due date.

To resolve this issue, review the data entries in the 'closed_date' and 'original_due_date' fields. The 'closed_date' should be the same as or later than the 'original_due_date'. If it is not, correct the dates to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS12 Variance CAL' table to check if the closed date for a corrective action is before the original due date. The purpose of this test is to ensure that the data regarding the timelines of corrective actions is accurate and logical. It is important because if a corrective action is marked as closed before its original due date, it could indicate a data entry error or a process issue that needs to be addressed. The severity of this test is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it could cause problems during analysis. For instance, it could lead to incorrect conclusions about the efficiency of the corrective action process. Therefore, it is crucial to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS12_VAR_CAL_IsClosedDateLtOriginalDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS12_variance_CAL
	WHERE 
			upload_ID = @upload_ID
		AND closed_date < original_due_date
)
```
