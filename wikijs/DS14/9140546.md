## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS14 HDV-CI |
| Severity    | MAJOR |
| Unique ID   | 9140546   |
| Summary     | Is the subcontract ID missing in the subcontract dataset? |
| Error message | subK_ID not in DS14.subK_ID list. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Subcontract ID Missing in Subcontract Work Records" is designed to verify the presence of the subcontract ID in the subcontract dataset (DS14 HDV-CI). 

The error message "subK_ID not in DS14.subK_ID list" indicates that there are instances where the subcontract ID (subK_ID) in the DS14 HDV-CI dataset is not found in the list of subcontract IDs in the DS13_subK dataset. 

This discrepancy could be due to a variety of reasons such as data entry errors, missing data, or issues with data synchronization between the two datasets. 

The expected value for the subcontract ID (subK_ID) in the DS14 HDV-CI dataset should match an existing subcontract ID in the DS13_subK dataset. If the subcontract ID is missing or does not match, it will result in this error. 

To resolve this issue, it is recommended to review the data entry process for the subcontract IDs in both datasets and ensure that they are synchronized correctly.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if there are any missing subcontract IDs in the subcontract work records. The subcontract ID is a crucial piece of information that helps in identifying and tracking the subcontract work. If this ID is missing, it could lead to confusion, mismanagement, and potential errors in the project management process.

The severity of this test is marked as 'MAJOR', which means that while it may not immediately halt the review of the data, it is likely to cause problems during the analysis. It could lead to inaccurate results, misinterpretations, and could potentially disrupt the overall project management process.

Therefore, this check is important to ensure the completeness and accuracy of the subcontract work records. It helps in maintaining the integrity of the data and ensures that the project management process runs smoothly and efficiently.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS14_HDV_CI_IsSubKMissingInDS13] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS14_HDV_CI
	WHERE 
			upload_ID = @upload_ID 
		AND subK_ID NOT IN (
			SELECT subK_ID
			FROM DS13_subK
			WHERE upload_ID = @upload_ID
		)
)
```
