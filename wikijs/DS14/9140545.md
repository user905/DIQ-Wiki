## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS14 HDV-CI |
| Severity    | MAJOR |
| Unique ID   | 9140545   |
| Summary     | Is the HDV-CI missing in the forecast schedule? |
| Error message | HDV_CI_ID not in DS04.HDV_CI_ID list where schedule_type = FC. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "HDV-CI Missing in Schedule (FC)" is designed to verify the presence of HDV-CI in the forecast schedule. This check is performed on the DS14 HDV-CI table.

The error message "HDV_CI_ID not in DS04.HDV_CI_ID list where schedule_type = FC" indicates that there are instances where the HDV_CI_ID from the DS14 HDV-CI table is not found in the DS04 Schedule table where the schedule type is 'FC' (Forecast).

The likely cause of this error is that there are HDV-CI entries in the DS14 HDV-CI table that are not included in the forecast schedule in the DS04 Schedule table. This could be due to a data entry error, a missing entry, or a mismatch between the HDV-CI IDs in the two tables.

To resolve this issue, ensure that all HDV-CI IDs in the DS14 HDV-CI table are also present in the DS04 Schedule table where the schedule type is 'FC'. The expected values for the HDV_CI_ID field in the DS14 HDV-CI table should match the HDV_CI_ID values in the DS04 Schedule table for forecast schedules.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the HDV-CI (High Definition Video-Construction Item) is missing in the forecast schedule. The test is checking if the HDV_CI_ID is not present in the DS04.HDV_CI_ID list where the schedule type is forecasted (FC). 

The importance of this check is to ensure that all necessary construction items are included in the forecast schedule. If the HDV-CI is missing, it could lead to incomplete or inaccurate forecasting, which could potentially disrupt the project timeline and budget. 

The severity of this check is marked as a MAJOR. This means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis. It is crucial to address this issue to ensure accurate and reliable project forecasting.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS14_HDV_CI_IsHDVCIMissingInDS04FC] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS14_HDV_CI
	WHERE 
			upload_ID = @upload_ID 
		AND HDV_CI_ID NOT IN (
			SELECT HDV_CI_ID 
			FROM DS04_schedule
			WHERE upload_ID = @upload_ID AND schedule_type = 'FC'
		)
)
```
