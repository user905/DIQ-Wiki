## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS14 HDV-CI |
| Severity    | MAJOR |
| Unique ID   | 1140547   |
| Summary     | Is there a subcontract PO ID without a subcontract ID? |
| Error message | subK_PO_ID found but subK_ID is missing or blank. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Subcontract PO ID Missing Subcontract ID" is designed to identify any instances in the DS14 HDV-CI table where a Subcontract Purchase Order (PO) ID is present, but the corresponding Subcontract ID is missing or blank.

The error message "subK_PO_ID found but subK_ID is missing or blank" indicates that there is a record in the DS14 HDV-CI table where the subK_PO_ID field is populated, but the subK_ID field is either not populated or contains a blank value. 

This discrepancy could be due to a data entry error or omission during the data input process. The expected value for the subK_ID field should be a valid Subcontract ID that corresponds to the Subcontract PO ID in the subK_PO_ID field. 

To maintain data integrity and quality, it is important to ensure that every Subcontract PO ID has a corresponding Subcontract ID. Please review the data in the DS14 HDV-CI table and correct any instances where a Subcontract PO ID is present but the Subcontract ID is missing or blank.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that every subcontract Purchase Order (PO) ID in the 'DS14 HDV-CI' table is associated with a corresponding subcontract ID. The test is checking for instances where a 'subK_PO_ID' is found, but the 'subK_ID' is missing or blank. 

The importance of this check lies in maintaining the integrity and consistency of the data. In the context of EVMS construction project management, each subcontract PO ID should be linked to a specific subcontract ID for proper tracking and management of subcontracts. If a subcontract PO ID is not associated with a subcontract ID, it could lead to confusion, mismanagement, or errors in subsequent data analysis and project management tasks.

The severity of this check is marked as 'MAJOR', which implies that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis. Therefore, it is recommended to address this issue to ensure accurate and efficient data analysis and project management.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS14_HDV_CI_IsSubKPOIDMissingSubKID] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS14_HDV_CI
	WHERE 
			upload_ID = @upload_ID 
		AND TRIM(ISNULL(subK_PO_ID,'')) <> ''
		AND TRIM(ISNULL(subK_ID,'')) = ''
)
```
