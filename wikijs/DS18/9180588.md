## Basic Information

| Key           | Value                                                                                   |
| ------------- | --------------------------------------------------------------------------------------- |
| Table         | DS18 Sched EU                                                                           |
| Severity      | MINOR                                                                                   |
| Unique ID     | 9180588                                                                                 |
| Summary       | Are the EU maximum days for this task less than the original duration?                  |
| Error message | EU_max_days < DS04.duration_original_days by schedule_type, task_ID, and subproject_ID. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "EU Maximum Days Less Than Original Duration" is designed to ensure that the maximum days allocated for a task in the DS18 Sched EU table are not less than the original duration of the task as specified in the DS04 Schedule table.

The fields involved in this check are 'EU_max_days' from the DS18 Sched EU table and 'duration_original_days' from the DS04 Schedule table. The check is performed by comparing these two fields for each task, identified by 'task_ID' and 'schedule_type'.

If an error is flagged by this check, it indicates that the maximum days allocated for a task in the DS18 Sched EU table is less than the original duration of the task in the DS04 Schedule table. This could be due to a data entry error or a miscalculation in the planning process.

The expected values for the 'EU_max_days' field should be equal to or greater than the 'duration_original_days' field for each corresponding task. If this is not the case, the data will need to be reviewed and corrected to ensure the integrity and quality of the project management data.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed on the 'DS18 Sched EU' table to check if the maximum days estimated for a task (EU_max_days) are less than the original duration of the task (DS04.duration_original_days). The test is categorized as an MINOR, indicating that while it may not cause significant problems, it could potentially lead to minor issues or suggest that the data does not adhere to all best practices.

The importance of this check lies in ensuring the accuracy and consistency of the project schedule. If the estimated maximum days for a task are less than the original duration, it could indicate an underestimation of the task's complexity or an overestimation of the team's capacity. This could lead to unrealistic project timelines and potential delays. Therefore, this check helps maintain the integrity and quality of the project management data, allowing for more accurate planning and execution of tasks.

## Code

```sql
CREATE FUNCTION [dbo].[fnDIQ_DS18_Sched_EU_IsEUMaxLtDS04OrigDur] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT E.*
	FROM DS18_schedule_EU E INNER JOIN DS04_schedule S 	ON E.task_ID = S.task_ID
													 	AND E.schedule_type = S.schedule_type
														AND ISNULL(E.subproject_ID,'') = ISNULL(S.subproject_ID,'')
														AND EU_max_days < duration_original_days
	WHERE
			E.upload_ID = @upload_ID
		AND S.upload_ID = @upload_ID
)
```

### Changelog

| Date       | Description of Changes                                                                       |
| ---------- | -------------------------------------------------------------------------------------------- |
| 2024-04-30 | Logic adjusted to account for the addition of subproject_id field. Minor update to metadata. |
