## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MINOR |
| Unique ID   | 1070335   |
| Summary     | Is the UB estimated days amount greater than UB budgeted? |
| Error message | UB_est_days > UB_est_days. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Estimated Greater Than UB Budgeted (Days)" is designed to verify the integrity of data in the DS07 IPMR Header table. Specifically, it checks whether the estimated Unburned (UB) days are greater than the budgeted UB days.

If this DIQ check fails, it indicates that the estimated UB days are incorrectly recorded as being more than the budgeted UB days. This discrepancy could be due to a data entry error or a miscalculation in the estimation process.

The fields causing the issue are 'UB_est_days' and 'UB_bgt_days'. The expected value for 'UB_est_days' should be less than or equal to 'UB_bgt_days'. If the estimated UB days are greater than the budgeted UB days, it suggests an overestimation of the unburned days, which could lead to inaccurate project management decisions.

To resolve this issue, review the data entries for 'UB_est_days' and 'UB_bgt_days' in the DS07 IPMR Header table. Ensure that the estimated UB days are not exceeding the budgeted UB days. If necessary, adjust the estimates to align with the budgeted figures.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the Undistributed Budget (UB) estimated days amount is greater than the UB budgeted days. The test is designed to alert if the estimated days to complete a task exceed the budgeted days. 

The importance of this check lies in its ability to highlight potential scheduling or budgeting issues. If the estimated days are consistently higher than the budgeted days, it could indicate that tasks are taking longer than expected, which could lead to project delays and cost overruns. 

The severity of this check is classified as an 'MINOR', which means it's not a critical issue that would prevent the data from being reviewed, but it's a potential problem that should be addressed to ensure the data follows best practices and to prevent minor issues from escalating.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_AreUBEstDaysGtUBBgtDays] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_est_days > ISNULL(UB_bgt_days,0)
)
```
