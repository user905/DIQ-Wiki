## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MINOR |
| Unique ID   | 1070347   |
| Summary     | Are there UB estimated days but no UB estimated dollars? |
| Error message | UB_est_days <> 0 & UB_est_dollars = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Estimated Days without UB Estimated Dollars" is designed to identify any inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Undistributed Budget (UB) estimated days recorded, but no corresponding UB estimated dollars.

The error message "UB_est_days <> 0 & UB_est_dollars = 0" indicates that there are records where the field 'UB_est_days' has a value other than zero, but the 'UB_est_dollars' field is zero or null. This is a potential issue as it suggests that there are estimated days allocated to the UB, but no corresponding budget, which could lead to inaccuracies in project management and budgeting.

The expected values for these fields would typically be that if 'UB_est_days' has a value other than zero, 'UB_est_dollars' should also have a value other than zero. This would indicate that both the time and budget for the UB have been appropriately estimated and recorded. 

If this DIQ check identifies any records that do not meet these expectations, it may be necessary to review the data entry process for these fields to ensure that both estimated days and dollars are being accurately recorded for the UB.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are 'UB estimated days' but no corresponding 'UB estimated dollars'. The test is looking for records where the 'UB_est_days' field is not equal to zero, but the 'UB_est_dollars' field is equal to zero. 

The importance of this check is to ensure consistency and completeness in the data. In the context of EVMS (Earned Value Management System) construction project management, both estimated days and estimated dollars are crucial for accurate project planning and tracking. If there are estimated days for an unbilled (UB) task but no estimated dollars, it could lead to inaccuracies in cost projections and financial reporting.

The severity of this check is marked as 'MINOR', which is less severe. This means that while it may not prevent the data from being reviewed, it could potentially cause minor problems or indicate that the data does not adhere to all best practices. It's a signal to the data management team to review these records and possibly correct or fill in the missing data to improve the overall data quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBEstDaysExistWithoutUBEstDollars] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_est_days <> 0
		AND ISNULL(UB_est_dollars,0) = 0
)
```
