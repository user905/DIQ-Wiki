## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MAJOR |
| Unique ID   | 1070269   |
| Summary     | Are the PM EAC dollars increasing in an order other than best, likely, worst? |
| Error message | EAC_PM_best_dollars >= EAC_PM_likely_dollars OR EAC_PM_likely_dollars >= EAC_PM_worst_dollars. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "PM EAC Dollars Out of Order" is designed to ensure that the Estimated at Completion (EAC) values in the DS07 IPMR Header table are in the correct order. The expected order for these values is from best to worst, meaning the 'EAC_PM_best_dollars' should be less than or equal to 'EAC_PM_likely_dollars', and 'EAC_PM_likely_dollars' should be less than or equal to 'EAC_PM_worst_dollars'.

If the DIQ check identifies any records where this is not the case, it indicates that there may be an error in the data entry or calculation of these EAC values. For example, if 'EAC_PM_best_dollars' is greater than 'EAC_PM_likely_dollars', or 'EAC_PM_likely_dollars' is greater than 'EAC_PM_worst_dollars', this would trigger the DIQ check.

To resolve this issue, you should review the EAC values in the DS07 IPMR Header table and ensure they are entered in the correct order. If necessary, you may need to recalculate these values to ensure they accurately reflect the best, likely, and worst case scenarios for the project's estimated completion cost.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check the order of the PM EAC (Estimate at Completion) dollars. The test is checking if the PM EAC dollars are increasing in an order other than best, likely, worst. This is important because the order of these values should logically follow the progression from best to worst. If the values are out of order, it could indicate a data entry error or a misunderstanding of the project's financial status.

The severity of this test is marked as a 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. If the PM EAC dollars are not in the correct order, it could lead to incorrect interpretations of the project's financial health and potentially lead to poor decision making. Therefore, it is crucial to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_ArePMEACDollarsOutOfOrder] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND (
			EAC_PM_best_dollars >= EAC_PM_likely_dollars OR 
			EAC_PM_likely_dollars >= EAC_PM_worst_dollars
		)
)
```
