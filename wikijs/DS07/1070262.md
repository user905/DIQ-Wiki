## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MAJOR |
| Unique ID   | 1070262   |
| Summary     | Is CBB negative? |
| Error message | CBB_dollars < 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Negative CBB" is designed to identify any instances where the Contract Budget Base (CBB) in dollars is recorded as a negative value in the DS07 IPMR Header table. 

The CBB is a crucial field in project management as it represents the total authorized budget for a contract. Therefore, it is expected to always be a positive value. A negative value in this field could indicate an error in data entry or calculation.

If this DIQ check identifies any records where the CBB is negative, it suggests that there may be inaccuracies in the data that need to be addressed. The source of these inaccuracies could be a manual data entry error, a calculation error, or a system error during data import or transformation. 

To resolve this issue, you should review the identified records and correct the CBB values to ensure they accurately reflect the authorized budget for the respective contracts.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the Contract Budget Base (CBB) is negative. The Contract Budget Base is the total amount budgeted for the contract and it should not be negative. A negative value could indicate an error in data entry or calculation. 

The severity of this test is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. For instance, a negative budget could lead to incorrect financial analysis or projections. 

The importance of this check is to ensure the accuracy and reliability of the financial data in the project management system. It helps to maintain the integrity of the data by identifying potential errors or inconsistencies that could impact the overall understanding and management of the project budget.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsCBBLTZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND CBB_dollars < 0
)
```
