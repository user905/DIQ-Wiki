## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MAJOR |
| Unique ID   | 1070264   |
| Summary     | Is the PM EAC Best date earlier than the CPP Status Date? |
| Error message | EAC_PM_best_date < DS00.CPP_Status_Date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "PM EAC Best Date Earlier Than CPP SD" is designed to verify the consistency of dates in the DS07 IPMR Header table. Specifically, it checks whether the Project Manager's Estimate at Completion (EAC) Best date is earlier than the Current Period Performance (CPP) Status Date.

If this DIQ check fails, it indicates that the EAC_PM_best_date field in the DS07 IPMR Header table contains a date that is earlier than the date in the CPP_status_date field. This is an inconsistency because the EAC Best date, which represents the project manager's best estimate of when the project will be completed, should not be earlier than the CPP Status Date, which represents the date of the current status of the project.

To resolve this issue, ensure that the EAC_PM_best_date is not earlier than the CPP_status_date. The EAC_PM_best_date should ideally be the same as or later than the CPP_status_date. If the dates are not in this order, it may indicate an error in data entry or project scheduling.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the Project Manager's (PM) Estimate at Completion (EAC) Best date is earlier than the Current Period Performance (CPP) Status Date. The test is checking the condition 'EAC_PM_best_date < DS00.CPP_Status_Date'. 

The importance of this check is to ensure the consistency and accuracy of the project management data. The PM's EAC Best date should not be earlier than the CPP Status Date, as this could indicate a potential error in data entry or a discrepancy in the project timeline. 

The severity of this test is marked as 'MAJOR', which means that if this issue is not addressed, it is likely to cause problems during the analysis of the data. It may not prevent the data from being reviewed, but it could lead to incorrect conclusions or decisions based on the data. Therefore, it is crucial to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsEACPMBestLtCPPSD] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND EAC_PM_best_date < CPP_status_date
)
```
