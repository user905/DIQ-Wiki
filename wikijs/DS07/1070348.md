## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MINOR |
| Unique ID   | 1070348   |
| Summary     | Are there UB estimated dollars but no UB budget dollars? |
| Error message | UB_est_dollars <> 0 & UB_bgt_dollars = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Estimated without UB Budget (Dollars)" is designed to identify any inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Undistributed Budget (UB) estimated dollars present, but no corresponding UB budget dollars.

The error is likely to occur when the 'UB_est_dollars' field has a value other than zero, indicating that there are estimated UB dollars, but the 'UB_bgt_dollars' field is either null or zero, indicating that there are no budgeted UB dollars. This inconsistency could be due to a data entry error or a missing update in the budget data.

The expected values for a consistent data set would be that if 'UB_est_dollars' has a value other than zero, 'UB_bgt_dollars' should also have a value other than zero. Conversely, if 'UB_bgt_dollars' is zero or null, 'UB_est_dollars' should also be zero. 

This DIQ check ensures that the estimated and budgeted UB dollars in the DS07 IPMR Header data align correctly, thereby maintaining the integrity and quality of the project management data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are Undistributed Budget (UB) estimated dollars present, but no corresponding UB budget dollars. The test is looking for records where the 'UB_est_dollars' field is not equal to zero and the 'UB_bgt_dollars' field is equal to zero. 

The importance of this check is to ensure that all estimated costs have a corresponding budget allocation. If there are estimated costs without a budget, it could lead to financial discrepancies and potential overspending. This could also indicate a data entry error or oversight in budget planning.

The severity of this check is marked as an 'MINOR', which means it's not critical but could potentially cause minor problems or indicate that the data doesn't follow all best practices. It's advisable to review and correct these instances to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBEstDollarsExistWithoutUBBgtDollars] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_est_dollars <> 0
		AND ISNULL(UB_bgt_dollars,0) = 0
)
```
