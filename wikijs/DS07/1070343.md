## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MINOR |
| Unique ID   | 1070343   |
| Summary     | Are there UB budget days but no UB estimated days? |
| Error message | UB_bgt_days <> 0 & UB_est_day = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Budget without UB Estimate (Days)" is designed to identify any inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Unbudgeted (UB) budget days recorded, but no corresponding UB estimated days.

The error is likely to occur when the 'UB_bgt_days' field has a value other than zero, indicating that there are UB budget days, but the 'UB_est_days' field is either null or zero, suggesting that there are no UB estimated days. This inconsistency could be due to a data entry error or a missing estimate.

The expected values for these fields would be either both zero, indicating no UB budget or estimated days, or both having a value other than zero, indicating the presence of UB budget and estimated days. The presence of a value in the 'UB_bgt_days' field should always correspond with a value in the 'UB_est_days' field to maintain data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are Unbudgeted (UB) budget days but no corresponding UB estimated days. The test is looking for records where the 'UB_bgt_days' field is not equal to zero and the 'UB_est_day' field is equal to zero. 

The importance of this check is to ensure consistency and accuracy in the data. If there are UB budget days, there should logically be an estimate of those days as well. If this is not the case, it could indicate a data entry error or a problem with the budgeting process. 

The severity of this check is classified as an 'MINOR'. This means that while it may not prevent the data from being reviewed, it could potentially cause minor problems during analysis or indicate that the data does not adhere to all best practices. It's a signal to review these records and correct any inconsistencies to improve the overall data quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBBgtDaysExistWithoutUBEstDays] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_bgt_days <> 0
		AND ISNULL(UB_est_days,0) = 0
)
```
