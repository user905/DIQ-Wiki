## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MAJOR |
| Unique ID   | 1070382   |
| Summary     | Are the UB days negative? |
| Error message | UB_bgt_days < 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Negative UB (Days)" is performed on the DS07 IPMR Header table. This check is designed to identify any instances where the "UB_bgt_days" field contains a negative value.

The "UB_bgt_days" field represents the Undistributed Budget (UB) in days. In the context of project management, the UB refers to the portion of the total budget that has not yet been allocated to specific tasks or activities. As such, it is not logical for this value to be negative. A negative value in this field could indicate an error in data entry or calculation.

If this DIQ check identifies any records where "UB_bgt_days" is less than zero, it suggests that there may be an issue with the way the undistributed budget is being tracked or reported. The expected value for the "UB_bgt_days" field should always be zero or a positive number. 

If you encounter this error, it is recommended to review the data entry process for the undistributed budget and ensure that all calculations are being performed correctly.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if there are any instances where the UB (Undistributed Budget) days are negative, which is indicated by 'UB_bgt_days < 0'. The Undistributed Budget refers to the portion of the total budget that has not yet been allocated to specific tasks or activities in the project. 

The importance of this check is to ensure the accuracy and reliability of the project's budget data. Negative values for UB days could indicate errors in data entry, budget allocation, or project scheduling. These errors could potentially lead to inaccurate project forecasting, budget overruns, or mismanagement of resources.

The severity of this check is marked as 'MAJOR', which implies that while the data can still be reviewed, having negative UB days is likely to cause problems during the analysis of the project's budget and schedule. Therefore, it is crucial to address this issue to ensure accurate and effective project management.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsUBBgtDaysNegative] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_bgt_days < 0
)
```
