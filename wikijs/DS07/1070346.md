## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MINOR |
| Unique ID   | 1070346   |
| Summary     | Are there UB estimated days but no UB budget days? |
| Error message | UB_est_days <> 0 & UB_bgt_days = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Estimated without UB Budget (Days)" is designed to identify any inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Unbudgeted (UB) estimated days recorded, but no corresponding UB budget days.

The error message "UB_est_days <> 0 & UB_bgt_days = 0" indicates that the DIQ check has found records where the field for UB estimated days (UB_est_days) is not zero, but the field for UB budget days (UB_bgt_days) is zero. This is a potential issue as it suggests that there are estimated days for work that has not been budgeted for, which could lead to project management issues.

The expected values for these fields would typically be that if there are UB estimated days (UB_est_days) recorded, there should also be corresponding UB budget days (UB_bgt_days) recorded. If there are no UB budget days, then there should also be no UB estimated days.

If this error is occurring, it may be due to data entry errors or inconsistencies in how the data is being recorded. It is recommended to review the data entry process for these fields to ensure that they are being filled out correctly and consistently.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are Unbudgeted (UB) estimated days but no corresponding UB budget days. The test is looking for records where the value of UB estimated days is not equal to zero, but the UB budget days is equal to zero. 

The importance of this check is to ensure that all estimated days for unbudgeted work have corresponding budget days. This is crucial for accurate project management and forecasting. If there are estimated days for work that is not budgeted, it could lead to inaccurate project timelines and budget overruns. 

The severity of this check is classified as an 'MINOR'. This means that while it may not immediately prevent data from being reviewed, it could potentially cause minor problems or indicate that the data does not adhere to all best practices. It's a signal to the data analyst to review these records and possibly make corrections to ensure the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBEstDaysExistWithoutUBBgtDays] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_est_days <> 0
		AND ISNULL(UB_bgt_days,0) = 0
)
```
