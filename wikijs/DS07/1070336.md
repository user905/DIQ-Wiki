## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MINOR |
| Unique ID   | 1070336   |
| Summary     | Is the UB estimated dollar amount greater than UB budgeted? |
| Error message | UB_est_dollars > UB_est_dollars. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Estimated Greater Than UB Budgeted (Dollars)" is designed to verify the integrity of the data in the DS07 IPMR Header table. Specifically, it checks whether the estimated Un-Budgeted (UB) dollar amount is greater than the budgeted UB dollar amount.

If this DIQ check fails, it indicates that there are entries in the DS07 IPMR Header table where the estimated UB dollar amount (UB_est_dollars) is greater than the budgeted UB dollar amount (UB_bgt_dollars). This could be due to a data entry error or a miscalculation in the budgeting process.

The expected values for this check would be that the estimated UB dollar amount should always be less than or equal to the budgeted UB dollar amount. If the estimated amount is greater, it suggests that the project is going over budget, which could lead to financial issues down the line.

To resolve this issue, review the entries in the DS07 IPMR Header table and correct any discrepancies between the estimated and budgeted UB dollar amounts. Ensure that the estimated amount is not greater than the budgeted amount to maintain the integrity and quality of the data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the Undistributed Budget (UB) estimated dollar amount is greater than the UB budgeted in the DS07 IPMR Header table. The Undistributed Budget refers to the budget amount that has not yet been allocated to specific tasks or work packages. 

The importance of this check is to ensure that the estimated costs do not exceed the budgeted costs. If the estimated costs are higher, it could indicate a potential budget overrun, which could lead to financial issues in the project. 

The severity of this check is marked as an MINOR. This means that while it is not a critical error that would prevent the data from being reviewed, it is a potential issue that could cause minor problems or indicate that the data does not follow all best practices. It's a signal to the project management team to review the budgeting process and make necessary adjustments to prevent potential financial issues.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_AreUBEstDollarsGtUBBgtDollars] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_est_dollars > ISNULL(UB_bgt_dollars,0)
)
```
