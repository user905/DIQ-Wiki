## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | MAJOR |
| Unique ID   | 9070341   |
| Summary     | Is there an OTB/OTS date without SV reprogramming? |
| Error message | OTB_OTS_date is not null/blank & SUM(DS03.SV_rpg) = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "OTB / OTS Without SV Reprogramming" is designed to ensure that there is no instance where an Over Target Baseline (OTB) or Over Target Schedule (OTS) date exists without corresponding Schedule Variance (SV) reprogramming. This check is performed on the DS07 IPMR Header table.

The error message "OTB_OTS_date is not null/blank & SUM(DS03.SV_rpg) = 0" indicates that there is an OTB or OTS date present, but the sum of SV reprogramming in the DS03 Cost table is zero. This could be due to a data entry error where the OTB or OTS date was entered, but the corresponding SV reprogramming was not updated in the DS03 Cost table.

The fields causing this issue are the OTB_OTS_date field in the DS07 IPMR Header table and the SV_rpg field in the DS03 Cost table. The expected values for these fields are that if an OTB or OTS date is present (i.e., not null or blank), there should be a corresponding non-zero value in the SV reprogramming field. 

To resolve this issue, ensure that whenever an OTB or OTS date is entered in the DS07 IPMR Header table, the corresponding SV reprogramming in the DS03 Cost table is also updated.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there is an Over Target Baseline (OTB) or Over Target Schedule (OTS) date present, but without corresponding Schedule Variance (SV) reprogramming. The test is looking for records where the 'OTB_OTS_date' field is not null or blank, but the sum of 'SV_rpg' in the 'DS03' table is zero.

The importance of this check is to ensure the integrity and accuracy of the project management data. In the context of Earned Value Management Systems (EVMS), an OTB or OTS represents a formal change in the project's cost and schedule objectives. If there is an OTB or OTS date, there should be corresponding SV reprogramming to reflect the changes in the project's objectives. If not, it could lead to inaccurate project performance analysis and forecasting.

The severity of this check is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is crucial to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoesOTBOTSDateExistWithoutSVRpg] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND (SELECT SUM(ISNULL(SV_rpg,0)) FROM DS03_cost WHERE upload_ID = @upload_ID) = 0
		AND OTB_OTS_date IS NOT NULL
)
```
