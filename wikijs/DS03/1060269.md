## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS03 Cost |
| Severity    | MAJOR |
| Unique ID   | 1060269   |
| Summary     | Do the CA & WP WBS IDs match? |
| Error message | WBS_ID_CA = WBS_ID_WP |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This Data Integrity and Quality (DIQ) check is designed to ensure that within the DS03 Cost table, the Work Breakdown Structure (WBS) IDs for Cost Accounts (CA) and Work Packages (WP) are correctly aligned and match each other. The purpose of this check is to verify that the WBS ID assigned to a Cost Account is the same as the WBS ID assigned to the corresponding Work Package. This alignment is crucial for maintaining the integrity of project management data, as it ensures that costs are accurately tracked and reported against the correct elements of the project's work breakdown structure.

When this DIQ check identifies discrepancies, it means that there are instances where the WBS IDs for Cost Accounts and Work Packages do not match. This mismatch could be due to several reasons, such as data entry errors, updates to the WBS structure that have not been consistently applied across Cost Accounts and Work Packages, or misalignment in the project's planning and execution phases.

The fields involved in this issue are WBS_ID_CA (the WBS ID for Cost Accounts) and WBS_ID_WP (the WBS ID for Work Packages). Expected values for these fields are that they should be identical strings for any given pair of Cost Account and Work Package that are meant to be associated with each other. Any deviation from this expectation indicates a potential error that needs to be addressed to ensure accurate project management and reporting.

To resolve these discrepancies, users should review the project's WBS structure and the assignments of WBS IDs to both Cost Accounts and Work Packages. Corrections may involve updating the WBS IDs in either or both fields to ensure they accurately reflect the intended structure and relationships within the project's work breakdown structure.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This DIQ test is performed to ensure that the Work Breakdown Structure (WBS) IDs for Control Accounts (CA) match those for Work Packages (WP) within the DS03 Cost table. The importance of this check lies in maintaining consistency and integrity in project management data, specifically in tracking and reporting costs accurately across different levels of the project's WBS. A mismatch between the WBS IDs for CAs and WPs could lead to misallocation of costs, confusion in project progress tracking, and potential issues in cost reporting and analysis. The severity level of MAJOR indicates that while the issue is not critical enough to prevent data review, it is likely to cause problems during analysis if not addressed, such as inaccuracies in cost performance reports and difficulties in aligning project activities with the budget. Ensuring that CA and WP WBS IDs match is crucial for accurate project management and financial control.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_IsCAWBSEqTWPWBS] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT * 
	FROM DS03_Cost
	WHERE upload_ID = @upload_ID AND TRIM(WBS_ID_CA) = TRIM(WBS_ID_WP)
)
```
