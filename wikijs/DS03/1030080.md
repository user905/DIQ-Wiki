## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS03 Cost |
| Severity    | MAJOR |
| Unique ID   | 1030080   |
| Summary     | Does this WP or PP have negative budget? |
| Error message | WP or PP found with BCWSi < 0 (Dollars, Hours, or FTEs). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Negative Budget" is designed to identify any Work Packages (WP) or Planning Packages (PP) in the DS03 Cost table that have a negative budget. This is determined by checking if the Budgeted Cost of Work Scheduled (BCWSi) in dollars, hours, or Full-Time Equivalents (FTEs) is less than zero.

If the DIQ check identifies a WP or PP with a negative BCWSi, it means that there is an error in the data. This could be due to a data entry error, a calculation error, or a system error. The fields causing the issue are BCWSi_dollars, BCWSi_FTEs, and BCWSi_hours. 

The expected values for these fields should be zero or greater. A negative value indicates that the budgeted cost of work scheduled is less than the cost of work performed, which is not a valid scenario in project management. Therefore, any negative values in these fields should be corrected to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS03 Cost' table to check for any Work Packages (WP) or Planning Packages (PP) that have a negative budget. The test is looking for instances where the Budgeted Cost of Work Scheduled (BCWSi) is less than zero, which could be in terms of dollars, hours, or Full-Time Equivalents (FTEs). 

The importance of this check is to ensure that there are no budgeting errors in the project management data. A negative budget could indicate a data entry error, a calculation error, or a budgeting oversight. These errors could lead to inaccurate project cost projections and could potentially cause problems during the analysis of the project's cost performance. 

The severity of this check is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis if not addressed. Therefore, it is crucial to correct any instances of negative budgets to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_IsBCWSLessThanZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT 
		* 
	FROM 
		DS03_Cost
	WHERE
			upload_ID = @upload_ID
		AND (BCWSi_dollars < 0 OR BCWSi_FTEs < 0 OR BCWSi_hours < 0)
)
```
