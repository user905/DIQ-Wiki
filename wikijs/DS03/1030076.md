## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS03 Cost |
| Severity    | MINOR |
| Unique ID   | 1030076   |
| Summary     | Does this CA, WP, or PP have negative actuals? |
| Error message | CA, WP, or PP found with ACWPi < 0 (Dollars, Hours, or FTEs). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled 'Negative Actuals' is designed to identify any instances in the DS03 Cost table where the Actual Cost of Work Performed (ACWP) is recorded as a negative value. This check is important because negative values for ACWP are not valid in the context of project management data.

The fields that are checked for negative values are ACWPi_dollars, ACWPi_FTEs, and ACWPi_hours. These fields represent the actual cost of work performed in terms of dollars, full-time equivalents, and hours, respectively. 

If the DIQ check identifies any instances where these fields contain negative values, it indicates an error in the data. This could be due to a data entry error, a calculation error, or a system error. 

The expected values for these fields are non-negative numbers. For ACWPi_dollars, a small cushion of -$10 is allowed to account for minor discrepancies, but any value less than -$10 is considered an error. For ACWPi_FTEs and ACWPi_hours, any value less than 0 is considered an error. 

If the DIQ check identifies any errors, the relevant Cost Account (CA), Work Package (WP), or Planning Package (PP) will need to be reviewed and corrected to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS03 Cost' table to check for any Control Account (CA), Work Package (WP), or Planning Package (PP) that have negative actuals. The test is looking for instances where the Actual Cost of Work Performed (ACWPi) is less than zero, which could be in terms of dollars, hours, or Full-Time Equivalents (FTEs). 

The importance of this check is to ensure the accuracy and reliability of the cost data. Negative actuals could indicate data entry errors, calculation errors, or other issues that could distort the true cost picture. This could lead to incorrect conclusions or decisions based on this data. 

The severity of this check is classified as an 'MINOR', which means it is less severe but still important. It indicates that there might be minor problems or that the data doesn't follow all best practices. It's not a critical error that would prevent the data from being reviewed, but it's something that should be corrected to ensure the highest quality and integrity of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_IsACWPLessThanZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT 
		* 
	FROM 
		DS03_Cost
	WHERE
			upload_ID = @upload_ID
		-- ACWP Dollars has a cushion of -$10
		AND (ACWPi_dollars < -10 OR ACWPi_FTEs < 0 OR ACWPi_hours < 0)
)
```
