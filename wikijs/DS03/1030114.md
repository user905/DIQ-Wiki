## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS03 Cost |
| Severity    | MINOR |
| Unique ID   | 1030114   |
| Summary     | Does this indirect have hours or FTEs? |
| Error message | EOC = 'Indirect' or is_indirect = 'Y' AND (BCWSi, BCWPi, ACWPi, or ETCi hours or FTEs > 0) |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This Data Integrity and Quality (DIQ) check is designed to ensure the accuracy of data within the DS03 Cost table, specifically focusing on indirect costs and their association with hours or Full-Time Equivalents (FTEs). The purpose of this check is to identify any indirect cost entries that have been assigned hours or FTEs, which may not align with standard accounting practices for indirect costs.

Indirect costs, by definition, are expenses that are not directly tied to a specific project activity but are necessary for the overall operation of the project. These costs are typically allocated across various activities and should not directly include hours or FTEs. However, this DIQ test flags any entries where an indirect cost has been associated with hours or FTEs, indicating a potential misclassification or data entry error.

The fields involved in this check include the designation of a cost as 'Indirect' (either through the EOC field being labeled 'Indirect' or the is_indirect field marked 'Y'), and the presence of values greater than zero in any of the following fields: BCWSi_hours, BCWSi_FTEs, BCWPi_hours, BCWPi_FTEs, ACWPi_hours, ACWPi_FTEs, ETCi_hours, or ETCi_FTEs. These fields represent different aspects of budgeted and actual work, including the Budgeted Cost for Work Scheduled (BCWS), the Budgeted Cost for Work Performed (BCWP), the Actual Cost of Work Performed (ACWP), and the Estimate to Complete (ETC) for indirect costs, in terms of hours and FTEs.

If this DIQ test identifies records, it likely indicates that indirect costs have been incorrectly assigned direct labor hours or FTEs. This could be due to a misunderstanding of cost categorization, a mislabeling of cost types, or a data entry error. Expected values for indirect costs would typically not include direct labor hours or FTEs, as these are direct costs associated with specific project tasks or activities.

To address these issues, it is recommended to review the specific entries flagged by this DIQ test, verify the accuracy of the cost categorization, and correct any misclassified costs or data entry errors to ensure the integrity of project cost management data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This DIQ test, titled "Indirect With Hours and/or FTEs," is performed on the "DS03 Cost" table to check if any indirect costs are associated with hours or Full-Time Equivalents (FTEs). The test is executed by identifying records where either the End of Cost (EOC) is marked as 'Indirect' or a flag indicating the cost is indirect (is_indirect) is set to 'Y'. For these identified indirect costs, the test then checks if there are any associated hours or FTEs recorded in the Budgeted Cost for Work Scheduled (BCWSi), Budgeted Cost for Work Performed (BCWPi), Actual Cost of Work Performed (ACWPi), or the Estimate to Complete (ETCi) fields.

The importance of this check lies in ensuring that indirect costs are accurately captured and categorized within the project management data. Indirect costs, unlike direct costs, are not tied directly to specific project activities or outputs. They typically include overheads or administrative expenses that are spread across projects. Associating hours or FTEs with indirect costs could indicate a misclassification of costs or an error in data entry, which could lead to inaccuracies in project cost tracking and reporting.

The severity level of this test is marked as an MINOR. This indicates that while the presence of hours or FTEs in indirect cost records may not immediately disrupt the analysis or management of the project data, it suggests potential minor problems or deviations from best practices in data management. It serves as a prompt to review and correct the data to ensure that indirect costs are accurately represented, supporting effective project management and financial oversight.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_DoesIndirectHaveHoursOrFTEs] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT * 
	FROM DS03_Cost
	WHERE 	upload_ID = @upload_ID
		AND (EOC = 'Indirect' or is_indirect = 'Y')
		AND (
        BCWSi_hours > 0 OR BCWSi_FTEs > 0 OR 
        BCWPi_hours > 0 OR BCWPi_FTEs > 0 OR 
        ACWPi_hours > 0 OR ACWPi_FTEs > 0 OR 
        ETCi_hours > 0 OR ETCi_FTEs > 0
      )
)
```
