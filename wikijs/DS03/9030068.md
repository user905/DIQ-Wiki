## Basic Information

| Key           | Value                                                                                            |
| ------------- | ------------------------------------------------------------------------------------------------ |
| Table         | DS03 Cost                                                                                        |
| Severity      | MINOR                                                                                            |
| Unique ID     | 9030068                                                                                          |
| Summary       | Is this PP scheduled to start within 4-6 months?                                                 |
| Error message | PP with BCWSi > 0 (Dollar, Hours, or FTEs) and period_date within 4-6 months of CPP Status Date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "PP Starting Within 4-6 Months" is designed to verify if a particular Performance Package (PP) in the DS03 Cost table is scheduled to start within a 4-6 month timeframe.

The test checks for PPs where the Budgeted Cost of Work Scheduled (BCWSi) is greater than zero in either dollars, hours, or Full-Time Equivalents (FTEs). The BCWSi fields represent the budgeted cost of work that is scheduled to be performed. If these fields are greater than zero, it indicates that there is work planned for the PP.

The test also checks the 'period_date' field, which should fall within 4-6 months of the 'CPP_status_date'. The 'CPP_status_date' is the date when the status of the Control Account Plan (CAP) was last updated. If the 'period_date' is not within this 4-6 month range, it may indicate a scheduling issue.

If the test fails, it could be due to incorrect data in the BCWSi fields or the 'period_date' not being within the expected range of the 'CPP_status_date'. Please ensure that the BCWSi fields have values greater than zero if there is work planned for the PP, and that the 'period_date' is correctly scheduled within 4-6 months of the 'CPP_status_date'.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed on the 'DS03 Cost' table to check if any Planned Packages (PP) are scheduled to start within the next 4-6 months. The test is looking for any PP with a Budgeted Cost of Work Scheduled (BCWSi) greater than 0 (in terms of Dollar, Hours, or FTEs) and a period_date that falls within 4-6 months of the Current Project Phase (CPP) Status Date.

The severity of this test is marked as an 'MINOR', which means it is not a critical issue but could potentially cause minor problems or indicate that the data does not adhere to all best practices.

The importance of this check is to ensure that the project management data is accurate and up-to-date. It helps in identifying any upcoming planned packages that are due to start soon, which is crucial for effective project planning and resource allocation. It also helps in maintaining the integrity of the project timeline and budget, as any discrepancies in these areas could lead to project delays or cost overruns.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_DoesPPStartInFourToSixMonths] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(

	SELECT
		*
	FROM
		DS03_Cost
	WHERE
			upload_ID = @upload_ID
		AND	(EVT = 'K' OR WBS_ID_WP IN (SELECT WBS_ID FROM DS01_WBS WHERE upload_ID = @upload_ID AND type = 'PP'))
		AND (BCWSi_dollars > 0 OR BCWSi_FTEs > 0 OR BCWSi_hours > 0)
		AND period_date <= DATEADD(month,6,CPP_status_date)
		AND period_date > DATEADD(month,3,CPP_status_date)
)
```
