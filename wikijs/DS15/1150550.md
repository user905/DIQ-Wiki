## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS15 Risk Register |
| Severity    | MINOR |
| Unique ID   | 1150550   |
| Summary     | Is the approved date after the realized date? |
| Error message | approved_date > realized_date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Approved Date After Realized Date" is designed to ensure that the approved date for a risk is not set after the date the risk was realized. This check is performed on the data in the DS15 Risk Register.

If an error is flagged by this DIQ check, it indicates that there are instances where the approved date for a risk is recorded as being later than the date the risk was realized. This is likely due to a data entry error.

The fields causing the issue are the 'approved_date' and 'realized_date' fields. The expected values for these fields should be such that the 'approved_date' is either on or before the 'realized_date'. 

Please review the data in these fields and correct any discrepancies to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS15 Risk Register' table to ensure that the 'approved date' is not later than the 'realized date'. The test is checking if the 'approved date' is greater than the 'realized date', which could indicate a potential issue with the data entry or the process of approval and realization of risks.

The importance of this check is to maintain the logical consistency and accuracy of the data. In a typical risk management process, a risk cannot be approved after it has been realized. Therefore, this test helps to identify any anomalies or errors in the data that could potentially disrupt further analysis or decision-making processes.

The severity of this test is marked as 'MINOR', which means it is less severe but still important to note. It indicates that there might be minor problems or that the data doesn't follow all best practices. While it may not stop the data from being reviewed, it could potentially cause issues during analysis if not addressed.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS15_Risk_Register_IsAppDateGtRealizedDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS15_risk_register
	WHERE 
			upload_ID = @upload_ID 
		AND approved_date > realized_date
)
```
