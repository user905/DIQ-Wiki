## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS15 Risk Register |
| Severity    | MAJOR |
| Unique ID   | 9150560   |
| Summary     | Is this risk missing an impact task in the risk log? |
| Error message | risk_ID not in DS16.task_ID list where risk_task_type = Impact. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Risk Missing Impact Task" is designed to identify any risks in the DS15 Risk Register that are missing an associated impact task in the risk log. 

The error message "risk_ID not in DS16.task_ID list where risk_task_type = Impact" indicates that there is a risk entry in the DS15 Risk Register that does not have a corresponding task entry in the DS16 Risk Register Tasks where the task type is 'Impact'. 

This discrepancy could be due to a variety of reasons such as data entry errors, missing data, or issues with data synchronization between the two registers. 

The fields causing the issue are the 'risk_ID' field in the DS15 Risk Register and the 'task_ID' and 'risk_task_type' fields in the DS16 Risk Register Tasks. The expected values would be that for every 'risk_ID' in the DS15 Risk Register, there should be a corresponding 'task_ID' in the DS16 Risk Register Tasks where the 'risk_task_type' is 'Impact'. 

To resolve this issue, you should ensure that every risk in the DS15 Risk Register has an associated impact task in the DS16 Risk Register Tasks.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS15 Risk Register' table to check if there are any risks that are missing an associated impact task in the risk log. The test is looking for instances where the risk ID does not appear in the DS16.task_ID list where the risk_task_type is set to 'Impact'. 

The importance of this check is to ensure that all risks identified in the project have a corresponding impact task. This is crucial for effective risk management as it allows for the identification of potential impacts of each risk on the project. If a risk does not have an associated impact task, it may lead to inadequate risk mitigation strategies, which could potentially jeopardize the project. 

The severity of this check is marked as 'MAJOR', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is therefore recommended that this issue be addressed to ensure accurate and effective risk management in the EVMS construction project.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS15_Risk_Register_IsRiskMissingDS16ImpactTask] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS15_risk_register
	WHERE 
			upload_ID = @upload_ID
		AND risk_ID NOT IN (
			SELECT risk_ID
			FROM DS16_risk_register_tasks
			WHERE upload_ID = @upload_ID AND risk_task_type = 'Impact'
		)
)
```
