## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | MINOR |
| Unique ID   | 1040230   |
| Summary     | Does this task have a soft constraint without a justification? |
| Error message | Task found with a soft constraint (constraint_type = CS_MSOA or CS_MEOA) but no justification (justification_constraint_soft is null or empty). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Soft Constraint Missing Justification" is designed to ensure that every task in the DS04 Schedule table that has a soft constraint also has a corresponding justification. 

A soft constraint is a scheduling parameter that guides when a task should start or end but allows for flexibility. In the DS04 Schedule table, these are identified by the constraint_type field having a value of either CS_MSOA or CS_MEOA. 

The DIQ check is flagging an issue when a task with a soft constraint does not have a corresponding justification. This is identified when the justification_constraint_soft field is either null or empty. 

The likely cause of this error is that when a task was entered into the DS04 Schedule table with a soft constraint, the justification for that constraint was not provided. This could be due to an oversight during data entry or a misunderstanding of the requirement to provide a justification for each soft constraint.

To resolve this issue, review the tasks in the DS04 Schedule table that have been flagged by this DIQ check. For each task, if a soft constraint is present, ensure that a corresponding justification is also provided in the justification_constraint_soft field.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that all tasks with a soft constraint in the DS04 Schedule table have an accompanying justification. A soft constraint in project management is a limitation or condition that can be adjusted if necessary, such as a preferred start or end date for a task. However, for the sake of data integrity and transparency, it's important that any such constraints are justified.

The severity of this test is marked as an MINOR. This means that while it's not a critical error that would prevent the data from being reviewed, it's still a potential issue that could cause minor problems. For instance, if a task with a soft constraint is adjusted without a clear reason, it could lead to confusion or misinterpretation of the data. Therefore, this check is important to ensure that all soft constraints are properly justified, promoting clarity and understanding in the project management process.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsSoftConstraintMissingJustification] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND constraint_type in (SELECT type FROM SoftConstraints)
		AND ISNULL(justification_constraint_soft,'') = ''
)
```
