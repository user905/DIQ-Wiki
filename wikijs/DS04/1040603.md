## Basic Information

| Key           | Value                                                                                                                     |
| ------------- | ------------------------------------------------------------------------------------------------------------------------- |
| Table         | DS04 Schedule                                                                                                             |
| Severity      | MINOR                                                                                                                     |
| Unique ID     | 1040603                                                                                                                   |
| Summary       | Is this BL task with high float missing a justification in the baseline schedule?                                         |
| Error message | justification_high_float is blank where task schedule_type = FC and float_total_days > 10% of project remaining duration. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "High Float Missing Justification (BL)" is designed to ensure that all tasks in the DS04 Schedule table with a high float value have an associated justification.

A high float value is defined as a task where the total float days are greater than 10% of the remaining project duration. The remaining project duration is calculated as the difference between the CPP status date and the EF date for tasks in the baseline schedule with a milestone level of 175.

If a task with a high float value does not have a justification (i.e., the 'justification_high_float' field is blank), this DIQ check will flag it as an error.

The likely cause of this error is that during data entry, the justification for a high float task was not provided. This could be an oversight or due to a lack of understanding of the importance of providing justifications for high float tasks.

To resolve this error, a justification should be provided for all tasks with high float values. This justification should be entered into the 'justification_high_float' field in the DS04 Schedule table.

Please note that this DIQ check only applies to tasks in the baseline schedule. Tasks in other types of schedules are not subject to this check.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed on the 'DS04 Schedule' table to check if tasks with high float (more than 10% of the remaining project duration) have a justification in the baseline schedule. The test is looking for instances where the 'justification_high_float' field is blank for these tasks.

The importance of this check is to ensure that all tasks with high float, which could potentially delay the project, have a valid reason documented. This is crucial for maintaining transparency and accountability in project management. It also aids in identifying potential risks or issues that could impact the project timeline.

The severity of this test is marked as an 'MINOR', which means it's not critical but could indicate minor problems or deviations from best practices. It's advisable to address these issues to maintain the integrity and quality of the project management data.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsHighFloatJustificationMissingBL] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(

	with RemDur as (
		SELECT MAX(DATEDIFF(d,CPP_status_date,EF_date)) RemDur
		FROM DS04_schedule
		WHERE upload_ID = @upload_ID AND schedule_type = 'BL' AND milestone_level = 175
	)
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND schedule_type = 'BL'
		AND float_total_days / NULLIF((SELECT TOP 1 RemDur FROM RemDur),0) >= .1
		AND TRIM(ISNULL(justification_float_high,''))=''
		AND (SELECT TOP 1 RemDur FROM RemDur) > 0
)
```

### Changelog

| Date       | Description of Changes                |
| ---------- | ------------------------------------- |
| 2024-04-30 | Minor metadata updates & corrections. |
