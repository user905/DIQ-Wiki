## Basic Information

| Key           | Value                                         |
| ------------- | --------------------------------------------- |
| Table         | DS04 Schedule                                 |
| Severity      | MAJOR                                       |
| Unique ID     | 9040200                                       |
| Summary       | Does this WBS Summary task have logic?        |
| Error message | task_ID where type = WS in DS05.task_ID list. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "WBS Summary Task with Logic" is designed to verify the presence of logic in the Work Breakdown Structure (WBS) summary tasks in the DS04 Schedule table.

The error message "task_ID where type = WS in DS05.task_ID list" indicates that there are WBS summary tasks (identified by 'WS' in the 'type' field) in the DS04 Schedule table that are missing corresponding entries in the DS05 Schedule Logic table.

This discrepancy could be due to a variety of reasons such as missing data during the data entry process, errors in data transfer between systems, or inconsistencies in data management practices.

To resolve this issue, ensure that each WBS summary task in the DS04 Schedule table has a corresponding entry in the DS05 Schedule Logic table. The 'task_ID' field should match between the two tables, and the 'type' field in the DS04 Schedule table should be set to 'WS' for these entries.

This check is crucial to maintain the integrity and quality of the project management data, as the presence of logic in WBS summary tasks is essential for accurate and effective project scheduling and management.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed on the 'DS04 Schedule' table to check if the Work Breakdown Structure (WBS) Summary task has logic. The test is looking for task_IDs where the type is 'WS' in the DS05.task_ID list. The severity of this test is marked as a 'MAJOR', which means that if this issue is not addressed, it is likely to cause problems during the analysis of the data.

The importance of this check lies in ensuring the integrity and quality of the project management data. In the context of EVMS (Earned Value Management System), the WBS Summary task should ideally have logic to ensure proper scheduling and sequencing of tasks. If the WBS Summary task lacks logic, it could lead to inaccuracies in project planning and execution, potentially causing delays and cost overruns. Therefore, this check is crucial in maintaining the accuracy and reliability of the project management data.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_DoesWBSSummaryHaveLogic] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT
		S.*
	FROM
		DS04_schedule S INNER JOIN DS05_schedule_logic L ON S.task_ID = L.task_ID
														AND S.schedule_type = L.schedule_type
														AND ISNULL(S.subproject_ID,'') = ISNULL(L.subproject_ID,'')
	WHERE
			S.upload_ID = @upload_ID
		AND L.upload_ID = @upload_ID
		AND S.type = 'WS'
)
```

### Changelog

| Date       | Description of Changes                                             |
| ---------- | ------------------------------------------------------------------ |
| 2024-04-30 | Logic adjusted to account for the addition of subproject_id field. |
