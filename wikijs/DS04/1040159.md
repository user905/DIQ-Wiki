## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | MAJOR |
| Unique ID   | 1040159   |
| Summary     | Is your forecast schedule missing the CD-4 milestone? |
| Error message | No row found for CD-4 milestone (milestone_level = 190) in forecast schedule (schedule_type = FC). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CD-4 Milestone Missing in Forecast" is designed to ensure that your forecast schedule in the DS04 Schedule table includes the CD-4 milestone. 

The CD-4 milestone is identified by a milestone level of 190. If this milestone is missing from your forecast schedule, the DIQ check will return an error message stating "No row found for CD-4 milestone (milestone_level = 190) in forecast schedule (schedule_type = FC)."

The likely cause of this error is that the CD-4 milestone has not been included in the forecast schedule data that was entered into the DS04 Schedule table. The expected value for the milestone level field is 190, and the expected value for the schedule type field is 'FC' to indicate a forecast schedule.

To resolve this issue, please ensure that the CD-4 milestone is included in your forecast schedule data with the correct milestone level and schedule type values.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the forecast schedule in the DS04 Schedule table includes the CD-4 milestone. The CD-4 milestone is a critical part of the project lifecycle, marking the completion of project execution and the start of operations. 

The severity of this test is marked as a MAJOR. This means that while the absence of the CD-4 milestone in the forecast schedule may not prevent the data from being reviewed, it is likely to cause problems during analysis. The forecast schedule may be inaccurate or incomplete without this milestone, potentially leading to incorrect conclusions or decisions based on the data.

The importance of this check lies in maintaining the integrity and quality of the project management data. It ensures that all necessary milestones are included in the forecast schedule, providing a complete and accurate picture of the project timeline. This, in turn, supports effective project management and decision-making.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsCD4MissingInFC] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
    * 
  FROM 
    DummyRow_Get(@upload_ID) 
  WHERE 
    (SELECT COUNT(*) FROM DS04_schedule WHERE upload_ID = @upload_ID AND schedule_type = 'FC' AND milestone_level = 190) = 0
)
```
