## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | MINOR |
| Unique ID   | 1040204   |
| Summary     | Is this major post-CD3 milestone not coded as a finish milestone? |
| Error message | Post-CD3 milestone (milestone_level = 160 - 800) is not coded as a finish milestone (type = FM). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check for the DS04 Schedule table, titled "Post-CD3 Project Milestone Not Coded As Finish Milestone", is designed to ensure that all major post-CD3 milestones are correctly coded as finish milestones. 

The error message "Post-CD3 milestone (milestone_level = 160 - 800) is not coded as a finish milestone (type = FM)" indicates that there are records in the DS04 Schedule table where the milestone level is between 160 and 800, but the type is not coded as 'FM' (Finish Milestone). 

The likely cause of this error is incorrect data entry or coding in the 'type' field for certain records. The expected value for the 'type' field for all post-CD3 milestones (i.e., those with a milestone level between 160 and 800) should be 'FM'. 

To resolve this issue, review the records identified by the DIQ check and correct the 'type' field as necessary to ensure that all post-CD3 milestones are correctly coded as finish milestones.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that major post-CD3 milestones in the DS04 Schedule table are correctly coded as finish milestones. The post-CD3 phase of a project is a critical stage where the project is being executed and controlled, and it's important that milestones in this phase are accurately marked as 'finished' when they are completed. 

The importance of this check is to maintain the accuracy and reliability of the project's progress data. If milestones are not correctly marked as finished, it could lead to misunderstandings about the project's status, potentially causing delays or misallocation of resources. 

The severity of this issue is marked as an MINOR, which means it's not likely to cause major problems during data analysis, but it's still a deviation from best practices. It's recommended to correct this issue to ensure the data is as accurate and reliable as possible.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsPostCD3MSNotCodedAsFM] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_ID = @upload_ID
		AND	milestone_level BETWEEN 160 AND 800
		AND type <> 'FM'
)
```
