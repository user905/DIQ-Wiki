## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | MINOR |
| Unique ID   | 1040211   |
| Summary     | Is this soft constraint missing a constraint date? |
| Error message | Soft constraint found (constraint_type = CS_MSOA or CS_MEOA) missing a constraint_date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Soft Constraint Missing Date" is designed to identify any instances in the DS04 Schedule table where a soft constraint is missing a constraint date. 

A soft constraint is a scheduling parameter that is flexible, such as a milestone start or end date (identified as 'CS_MSOA' or 'CS_MEOA' in the 'constraint_type' field). These constraints should always have an associated date in the 'constraint_date' field. 

If the DIQ check identifies a record where a soft constraint does not have a corresponding date, it will trigger an error. This could be caused by incomplete data entry or a data import error. 

To resolve this issue, ensure that all soft constraints in the DS04 Schedule table have an associated date in the 'constraint_date' field.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS04 Schedule' table to check if there are any soft constraints that are missing a constraint date. Soft constraints, such as 'Must Start On or After' (CS_MSOA) or 'Must End On or After' (CS_MEOA), are important in project scheduling as they define the flexibility in the start or end dates of a task. 

The severity of this test is marked as an 'MINOR', which means it is not a critical issue that would prevent the data from being reviewed, but it could potentially cause minor problems or indicate that the data does not follow all best practices. 

The importance of this check lies in ensuring the completeness and accuracy of the project schedule data. If a soft constraint is missing a constraint date, it could lead to incorrect scheduling or misinterpretation of the project timeline. Therefore, while it may not halt the review process, it is still crucial to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsSoftConstraintMissingDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND constraint_type in (SELECT type FROM SoftConstraints)
		AND constraint_date IS NULL
)
```
