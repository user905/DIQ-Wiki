## Basic Information

| Key           | Value                                                                                         |
| ------------- | --------------------------------------------------------------------------------------------- |
| Table         | DS04 Schedule                                                                                 |
| Severity      | MAJOR                                                                                       |
| Unique ID     | 1040167                                                                                       |
| Summary       | Does this task along the Driving Path have an Actual Start earlier than the Early Start? (BL) |
| Error message | FC AS_date < BL ES_date where driving_path = Y (compare by task_ID & subproject_ID).          |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

The Data Integrity and Quality (DIQ) check titled "Actual Start Prior to Early Start Along the Driving Path" is designed to identify any tasks in the DS04 Schedule where the Actual Start date (AS_date) is earlier than the Early Start date (ES_date) along the driving path.

This check is important because in project management, the Actual Start date of a task should not precede its Early Start date. If this occurs, it could indicate a data entry error or a scheduling issue that needs to be addressed.

The fields involved in this check are the task_ID, AS_date, ES_date, and driving_path. The driving_path field should have a value of 'Y' to indicate that the task is along the driving path. The AS_date and ES_date fields should contain the actual and early start dates of the tasks, respectively.

If an error is flagged by this check, it means that for the task in question, the AS_date is earlier than the ES_date. This could be due to a data entry error where the dates were entered incorrectly, or it could indicate a scheduling issue where tasks are starting earlier than planned.

To resolve this issue, you should review the task details in the DS04 Schedule, verify the accuracy of the start dates, and adjust the schedule as necessary.

## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
> {.is-warning}

This test is being performed on the 'DS04 Schedule' table to check if any task along the Driving Path has an Actual Start date that is earlier than the Early Start date. The Driving Path refers to the sequence of activities that determines the shortest time to complete the project. If a task starts earlier than planned, it could potentially disrupt this sequence and affect the overall project timeline.

The severity of this test is marked as a 'MAJOR', which means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis. This could lead to inaccurate project timelines, incorrect resource allocation, and ultimately, project delays.

The importance of this check lies in ensuring the integrity and accuracy of the project schedule data. It helps in maintaining a realistic and achievable project timeline, which is crucial for effective project management. It also aids in identifying potential issues early on, allowing for timely corrective actions.

## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsDPASDateEarlierThanESDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	with BLDPTasks as (
		SELECT task_ID, ES_Date, ISNULL(subproject_ID, '') SubP
		FROM DS04_schedule
		WHERE upload_ID = @upload_ID AND schedule_type = 'BL' AND driving_path = 'Y'
	)
	SELECT
		F.*
	FROM
		DS04_schedule F INNER JOIN BLDPTasks B  ON F.task_ID = B.task_ID
												AND ISNULL(F.subproject_ID,'') = B.SubP
												AND F.AS_date < B.ES_date
	WHERE
			upload_id = @upload_ID
		AND schedule_type = 'FC'
)
```

### Changelog

| Date       | Description of Changes                                                                                  |
| ---------- | ------------------------------------------------------------------------------------------------------- |
| 2024-04-30 | Logic adjusted to account for the addition of 'subproject_ID' field, as well as to improve readability. |
