[
  {
    "UID": "1030089",
    "DIQ Name v4": "fnDIQ_DS03_Cost_IsLaborMissingBCWPDollarsHoursOrFTEs",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,32 +1,56 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS03_Cost_IsLaborMissingBCWPDollarsHoursOrFTEs](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      " ",
      " ",
      " ",
      "+",
      "+",
      "+",
      "+",
      " /*",
      "-UPDATE:Nov2023.DIDv5introducedis_indirectandreplacedOverheadintheEOCwithIndirect.",
      "-PerdiscussionwithBK&DG,Indirectsshouldhaveonly$values,whichiswhyis_indirect=YhasbeenexcludedfromthisDIQ.",
      " ",
      " ThisfunctionlooksforLaborwherePerformancehasbeenrecordedononeofthethreeBCWPifields,",
      "+",
      " butnottheothers.",
      "+",
      " ItdoesthisbyfilteringforanyEOC=LaborrowwithBCWPiDollars,Hours,orFTEs<>0,",
      "+",
      " andanyrowwithBCWPiDollars,Hours,orFTEs=0.",
      " ",
      "+",
      "+",
      " TheORsbetweeneachoftheBCWPitypesallowsthistoworkforanycombination.",
      "+",
      " E.g.BCWPi_Dollars<>0&BCWPi_FTEs=0.",
      " ",
      "+",
      "+",
      "+",
      " SELECT",
      "+",
      " *",
      "+",
      " FROM",
      "+",
      " DS03_Cost",
      "+",
      " WHERE",
      "+",
      " upload_ID=@upload_ID",
      "+",
      " ANDEOC='Labor'",
      "-ANDISNULL(is_indirect,'')<>'Y'",
      "+",
      " AND(BCWPi_dollars<>0ORBCWPi_FTEs<>0ORBCWPi_hours<>0)",
      "+",
      " AND(BCWPi_dollars=0ORBCWPi_FTEs=0ORBCWPi_hours=0)",
      "+",
      " )"
    ]
  },
  {
    "UID": "1040114",
    "DIQ Name v4": "fnDIQ_DS04_Sched_AreSVTsAndNonSVTsComingled",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,48 +1,96 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS04_Sched_AreSVTsAndNonSVTsComingled](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      " ",
      " ",
      " ",
      "+",
      "+",
      "+",
      "+",
      " /*",
      "+",
      " ThisfunctionlooksforWBSswithatleastoneSVT,butwhereothertaskswithintheWBSarenotSVT.",
      " ",
      "+",
      "+",
      " Todothis,itcreatesacte,NonSVT,withalistofWBSIDsandscheduletypes",
      "+",
      " wherethesubtypeisnotSVT.",
      "+",
      "+",
      " ",
      " InanotherCTE,ToFlag,itthenleftjoinsthisbacktotheschedulewheresubtype*is*SVT(bytheWBSIDsandscheduletype).",
      " ",
      "+",
      "+",
      " Anyrowswherethejoinisexists(i.e.rightsideofthejoinisnotnull)isaflag",
      "+",
      " forthatWBSIDasawhole.",
      " ",
      "+",
      "+",
      " Insertingflagsintothe#ToFlagtemptable,wethenjointothescheduleDS",
      "+",
      " toreturnallflaggedWBSIDsbyscheduletype.",
      "+",
      "+",
      " withNonSVTas(",
      "+",
      " SELECTWBS_ID,schedule_type",
      "+",
      " FROMDS04_schedule",
      "+",
      " WHEREupload_ID=@upload_IDANDISNULL(subtype,'')<>'SVT'",
      "+",
      " GROUPBYWBS_ID,schedule_type",
      "+",
      " ),ToFlagas(",
      "+",
      " SELECTS.WBS_ID,S.schedule_type",
      "+",
      " FROM",
      "+",
      " DS04_scheduleSLEFTJOINNonSVTNONS.schedule_type=N.schedule_type",
      "+",
      " ANDS.WBS_ID=N.WBS_ID",
      "+",
      " WHERE",
      "+",
      " S.upload_ID=@upload_ID",
      "+",
      " ANDISNULL(S.subtype,'')='SVT'",
      "+",
      " ANDN.WBS_IDISNOTNULL",
      "+",
      " )",
      " ",
      " ",
      "+",
      "+",
      "+",
      " SELECT",
      "+",
      " S.*",
      "+",
      " FROM",
      "+",
      " DS04_scheduleSINNERJOINToFlagFONS.WBS_ID=F.WBS_ID",
      "+",
      " ANDS.schedule_type=F.schedule_type",
      "+",
      " WHERE",
      "+",
      " upload_id=@upload_ID",
      " ",
      "+",
      "+",
      " )"
    ]
  },
  {
    "UID": "1070374",
    "DIQ Name v4": "fnDIQ_DS07_IPMR_IsThresholdScheduleCumPctFavEqToZero",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,19 +1,38 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS07_IPMR_IsThresholdScheduleCumPctFavEqToZero](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      " ",
      " ",
      " ",
      "+",
      "+",
      "+",
      "+",
      " /*",
      "+",
      " Checkstoseewhetherthreshold_Schedule_cum_pct_fav=0",
      "+",
      "+",
      " SELECT",
      "+",
      " *",
      "+",
      " FROM",
      "+",
      " DS07_IPMR_header",
      "+",
      " WHERE",
      "+",
      " upload_ID=@upload_ID",
      "+",
      " ANDISNULL(threshold_Schedule_cum_pct_fav,0)=0",
      "+",
      " )"
    ]
  },
  {
    "UID": "9080414",
    "DIQ Name v4": "fnDIQ_DS08_WAD_IsLaborBudgetMissingInDS03CA",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,39 +1,78 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS08_WAD_IsLaborBudgetMissingInDS03CA](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      " ",
      " ",
      " ",
      "+",
      "+",
      "+",
      "+",
      " /*",
      "+",
      " ThisfunctionlooksforCAWADswithlaborbudgetdollarswherenolaborBCWSi",
      "+",
      " existsinDS03.",
      " ",
      "+",
      "+",
      " Todothis,wecreateacte,NonLaborCA,wherewelookforCAWBSsthathaveWPIDs",
      "+",
      " thatdonotexistinthelistoflaborWPIDs.",
      "+",
      "+",
      " ",
      " WethenjoinbacktoDS08byCAWPIDtofindouroutputrows.",
      " ",
      "+",
      "+",
      "+",
      " withNonLaborCAas(",
      "+",
      " SELECTDISTINCTWBS_ID_CA",
      "+",
      " FROMDS03_cost",
      "+",
      " WHERE",
      "+",
      " upload_ID=@upload_ID",
      "+",
      " ANDWBS_ID_WPNOTIN(",
      "+",
      " SELECTWBS_ID_WP",
      "+",
      " FROMDS03_cost",
      "+",
      " WHEREupload_ID=@upload_IDANDEOC='Labor'ANDBCWSi_dollars<>0",
      "-)",
      "+",
      " )",
      " ",
      "+)",
      "+",
      "+",
      "+",
      " SELECT",
      "+",
      " W.*",
      "+",
      " FROM",
      "+",
      " DS08_WADWINNERJOINNonLaborCACONW.WBS_ID=C.WBS_ID_CA",
      "+",
      " WHERE",
      "+",
      " upload_ID=@upload_ID",
      "+",
      " ANDTRIM(ISNULL(W.WBS_ID_WP,''))=''",
      "+",
      " ANDbudget_labor_dollars<>0",
      "+",
      " )"
    ]
  },
  {
    "UID": "1060249",
    "DIQ Name v4": "fnDIQ_DS06_Res_IsRoleEOCNonLabor",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,22 +1,42 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS06_Res_IsRoleEOCNonLabor](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      " ",
      " ",
      " ",
      "+",
      "+",
      "+",
      "+",
      " /*",
      "+",
      " ThisfunctionlooksforresourceswitharoleIDthatarenotalaborEOCtype.",
      "+",
      "+",
      " SELECT",
      "+",
      " *",
      "+",
      " FROM",
      "+",
      " DS06_schedule_resources",
      "+",
      " WHERE",
      "+",
      " upload_id=@upload_ID",
      "+",
      " ANDrole_IDISNOTNULL",
      "-ANDEOCISNOTNULL",
      "+",
      " ANDEOC<>'Labor'",
      " ",
      "+",
      "+",
      " )"
    ]
  },
  {
    "UID": "1070337",
    "DIQ Name v4": "fnDIQ_DS07_IPMR_DoesMRRpgExist",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,20 +1,40 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS07_IPMR_DoesMRRpgExist](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      " ",
      " ",
      " ",
      "+",
      "+",
      "+",
      "+",
      " /*",
      "+",
      " ThisfunctioncheckswhetherMR_rpg<>0",
      " ",
      "+",
      "+",
      "+",
      " SELECT",
      "+",
      " *",
      "+",
      " FROM",
      "+",
      " DS07_IPMR_header",
      "+",
      " WHERE",
      "+",
      " upload_ID=@upload_ID",
      "+",
      " ANDMR_rpg_dollars<>0",
      "+",
      " )"
    ]
  },
  {
    "UID": "9070305",
    "DIQ Name v4": "fnDIQ_DS07_IPMR_IsEACPMLikelyLtLastDS03ETCPlusUB",
    "Type": "Name matched",
    "Diff": [
      "--- \n",
      "+++ \n",
      "@@ -1,34 +1,68 @@\n",
      " CREATEFUNCTION[dbo].[fnDIQ_DS07_IPMR_IsEACPMLikelyLtLastDS03ETCPlusUB](",
      "+",
      " @upload_idint=0",
      "+",
      " )",
      "+",
      " RETURNSTABLE",
      "+",
      " ASRETURN",
      "+",
      " (",
      "+",
      " /*",
      "+",
      " ThisfunctioncheckstoseeiftheEACPMlikelydateisbefore",
      "+",
      " thelastrecordedETCidate+UBESTdays.",
      " ",
      "+",
      "+",
      " Becausethetestisoncalendardays,weneedtoaddaweekendfactortotheUBESTdays,",
      "+",
      " whichadds2daysforevery5inUB_EST_Days.",
      " ",
      "+",
      "+",
      " SowedivideUB_EST_Daysbyfive,multiplybytwo,andthenaddthevaluebacktoUB_Est_days",
      "+",
      " todothefinalcomparison.",
      " ",
      "+",
      "+",
      "+",
      " withLastETCias(",
      "+",
      " SELECTMAX(period_date)LastETC",
      "+",
      " FROMDS03_cost",
      "+",
      " WHEREupload_ID=@upload_IDAND(ETCi_dollars>0ORETCi_FTEs>0ORETCi_hours>0)",
      "+",
      " ),WeekendFactoras(",
      "+",
      " SELECT(ISNULL(UB_est_days,0)/5)*2WkndF",
      "+",
      " FROMDS07_IPMR_header",
      "+",
      " WHEREupload_ID=@upload_ID",
      "+",
      " )",
      " ",
      "+",
      "+",
      " SELECT",
      "+",
      " *",
      "+",
      " FROM",
      "+",
      " DS07_IPMR_header",
      "+",
      " WHERE",
      "+",
      " upload_ID=@upload_ID",
      "+",
      " ANDEAC_PM_likely_date<DATEADD(day,(SELECTTOP1WkndFFROMWeekendFactor),(SELECTTOP1LastETCFROMLastETCi))",
      "+",
      " )"
    ]
  }
]
