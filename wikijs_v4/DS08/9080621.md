## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | ALERT |
| Unique ID   | 9080621   |
| Summary     | Is the WPM name for this WAD mismatched with what is in the WBS Dictionary? |
| Error message | WPM <> DS01.WPM (by DS08.WBS_ID_WP & DS01.WBS_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "WPM Mismatched With WBS Dictionary" is designed to verify the consistency of Work Package Manager (WPM) names between two data sets: DS08 WAD and DS01 WBS. 

The test is performed by comparing the WPM name in the DS08 WAD data set with the corresponding WPM name in the DS01 WBS data set. The comparison is based on the Work Breakdown Structure ID (WBS_ID_WP) which should be the same in both data sets. 

If the test identifies a mismatch, it means that the WPM name in the DS08 WAD data set does not match the WPM name in the DS01 WBS data set for the same WBS_ID_WP. This could be due to a data entry error, a change in the WPM that was not updated in both data sets, or a discrepancy in the WBS_ID_WP between the two data sets.

To resolve this issue, you should verify the WPM names and the WBS_ID_WP in both data sets. The WPM names should be consistent across both data sets for the same WBS_ID_WP. If they are not, you will need to correct the mismatch to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Work Package Manager (WPM) name for a particular Work Authorization Document (WAD) matches with the name listed in the Work Breakdown Structure (WBS) Dictionary. The WBS Dictionary is a crucial document in project management that provides detailed information about each component of the WBS, including the WPM. 

The importance of this check is to maintain consistency and accuracy in the data. If the WPM name in the WAD does not match with the WBS Dictionary, it could lead to confusion and miscommunication in project management. It could also indicate a potential error in data entry or a change in the WPM that has not been properly documented.

The severity of this check is marked as an ALERT. This means that while it may not immediately prevent data from being reviewed, it could potentially cause minor problems or indicate that the data does not adhere to all best practices. Therefore, it is recommended to address this issue to ensure the highest level of data integrity and quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsWPMMismatchedWithDS01] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		W.*
	FROM
		DS08_WAD W 	INNER JOIN LatestWPWADRev_Get(@upload_ID) R ON W.WBS_ID_WP = R.WBS_ID_WP AND W.auth_PM_date = R.PMauth
					INNER JOIN DS01_WBS WBS ON W.WBS_ID_WP = WBS.WBS_ID
	WHERE
			W.upload_ID = @upload_ID
		AND WBS.upload_ID = @upload_ID
		AND R.WBS_ID_WP <> ''
		AND W.WPM <> WBS.WPM
)
```
