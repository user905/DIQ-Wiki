## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | WARNING |
| Unique ID   | 9080432   |
| Summary     | Is the POP finish for this Work Package WAD before the baseline early finish date? |
| Error message | pop_finish < DS04.EF_date where schedule_type = BL (by DS08.WBS_ID_WP & DS04.WBS_ID_WP). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "POP Finish Before Baseline Early Finish (WP)" is designed to ensure that the Planned Operation Period (POP) finish date for a Work Package (WP) in the DS08 Work Authorization Document (WAD) table is not set before the baseline early finish date. This is important because it ensures that the project schedule is being followed and that work is not being completed ahead of the planned schedule.

The error message "pop_finish < DS04.EF_date where schedule_type = BL (by DS08.WBS_ID_WP & DS04.WBS_ID_WP)" indicates that the POP finish date is earlier than the baseline early finish date. This discrepancy is identified by comparing the Work Breakdown Structure (WBS) ID for the WP in both the DS08 WAD and DS04 Schedule tables.

The likely cause of this error is an incorrect entry in either the POP finish date in the DS08 WAD table or the baseline early finish date in the DS04 Schedule table. The expected values should be such that the POP finish date is not earlier than the baseline early finish date. 

To resolve this issue, review the dates in both tables for the corresponding WBS ID and correct any discrepancies. The POP finish date should be adjusted to a date that is not earlier than the baseline early finish date.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Planned Operational Period (POP) finish for a particular Work Package (WP) in the DS08 WAD table is not scheduled before the baseline early finish date. The test is checking if the 'pop_finish' is less than the 'DS04.EF_date' where the schedule type is 'BL' (Baseline). This is done by comparing the Work Breakdown Structure ID for the Work Package (WBS_ID_WP) in both the DS08 and DS04 tables.

The importance of this check is to maintain the integrity and quality of the project schedule data. If the POP finish is scheduled before the baseline early finish date, it could indicate a potential scheduling error or misalignment in the project timeline. This could lead to issues in project execution and management, such as resource misallocation or unrealistic project timelines.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during the analysis of the project schedule. Therefore, it is recommended to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsPOPFinishBeforeDS04BLEFDateWP] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with WPFinish as (
		SELECT WBS_ID WBS, MAX(EF_date) EF
		FROM DS04_schedule
		WHERE upload_ID = @upload_ID AND schedule_type = 'BL'
		GROUP BY WBS_ID
	)
	SELECT 
		W.*
	FROM
		DS08_WAD W 	INNER JOIN WPFinish C ON W.WBS_ID_WP = C.WBS	
										  AND W.POP_finish_date < C.EF
					INNER JOIN LatestWPWADRev_Get(@upload_ID) R ON W.WBS_ID_WP = R.WBS_ID_WP
																AND W.auth_PM_date = R.PMAuth										 
	WHERE
		upload_ID = @upload_ID  
)
```
