## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | ALERT |
| Unique ID   | 1080440   |
| Summary     | Is this WPM name missing on this WAD? |
| Error message | WPM is missing or blank where auth_WPM_date found. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check for the DS08 WAD table, titled "WPM Missing", is designed to identify instances where the Work Package Manager (WPM) name is missing or blank, despite there being an authorized WPM date present. 

This discrepancy could be caused by incomplete data entry or a system error during data import. The fields causing the issue are the 'WPM' and 'auth_WPM_date' fields. 

In a valid record, if the 'auth_WPM_date' field is populated, the 'WPM' field should also be populated with the name of the Work Package Manager. The DIQ check identifies records where this is not the case, indicating a potential data integrity issue that needs to be addressed.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check for missing or blank Work Package Manager (WPM) names in the DS08 WAD table where an authorization date for the WPM is found. The importance of this check is to ensure that every work authorization date is associated with a corresponding WPM name. This is crucial for tracking and managing work packages effectively. The severity of this issue is marked as an ALERT, which means it's not critical but could cause minor problems or indicate that the data doesn't follow all best practices. It's important to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsWPMMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS08_WAD
	WHERE
			upload_ID = @upload_ID
		AND auth_WPM_date IS NOT NULL
		AND TRIM(ISNULL(WPM,'')) = ''
)
```
