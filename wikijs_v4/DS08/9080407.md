## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | WARNING |
| Unique ID   | 9080407   |
| Summary     | Is the CAM on this CA WAD misaligned with what is in the WBS hierarchy? |
| Error message | DS08.CAM <> DS01.CAM (by WBS_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CAM Misaligned with WBS Hierarchy (CA)" is designed to identify any discrepancies between the Control Account Manager (CAM) listed in the DS08 Work Authorization Document (WAD) and the CAM listed in the DS01 Work Breakdown Structure (WBS). 

The test is performed by comparing the CAM in the DS08 WAD with the CAM in the DS01 WBS for the same Work Breakdown Structure ID (WBS_ID). If the CAMs do not match, the test will flag this as an error. 

The likely cause of this error is a misalignment in the assignment of the CAM between the DS08 WAD and the DS01 WBS. This could occur if there has been a change in the CAM assignment in one dataset but not the other, or if there was a data entry error when inputting the CAM into either dataset.

The fields causing the issue are the CAM field in the DS08 WAD and the CAM field in the DS01 WBS. The expected values for these fields should be the same for each corresponding WBS_ID. 

Please ensure that the CAM assignments in both the DS08 WAD and the DS01 WBS are accurate and consistent to avoid this error.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Control Account Manager (CAM) assigned to a particular Control Account Work Authorization Document (CA WAD) aligns with the CAM assigned in the Work Breakdown Structure (WBS) hierarchy. The test is checking if the CAM in the DS08 table is the same as the CAM in the DS01 table for the same WBS_ID. 

The importance of this check is to maintain consistency and accuracy in the assignment of responsibilities within the project. If the CAMs are misaligned, it could lead to confusion, miscommunication, or errors in project management and execution. 

The severity of this test is marked as a WARNING. This means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis if not addressed. It is crucial to correct this issue to ensure accurate and efficient project management.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsCAMMisalignedWithDS01CA] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		W.*
	FROM
		DS08_WAD W 	INNER JOIN LatestCAWADRev_Get(@upload_ID) LWAD ON W.WBS_ID = LWAD.WBS_ID AND W.auth_PM_date = LWAD.PMAuth --get latest CA WAD rev
					INNER JOIN DS01_WBS WBS ON W.WBS_ID = WBS.WBS_ID AND W.CAM <> WBS.CAM --find discrepancy btw WAD CAM & WBS CAM
	WHERE
			W.upload_ID = @upload_ID   
		AND WBS.upload_ID = @upload_ID
		AND TRIM(ISNULL(W.WBS_ID_WP,'')) = ''
)
```
