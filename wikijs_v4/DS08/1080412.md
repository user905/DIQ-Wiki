## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | ALERT |
| Unique ID   | 1080412   |
| Summary     | Is the initial authorization date consistent across revisions? |
| Error message | initial_auth_date differs across revisions (by WAD_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Inconsistent Initial Authorization Date" is designed to ensure that the initial authorization date is consistent across all revisions in the DS08 Work Authorization Document (WAD) table. 

The error message "initial_auth_date differs across revisions (by WAD_ID)" indicates that there are inconsistencies in the initial authorization date for the same Work Breakdown Structure (WBS) ID and Work Package (WP) across different revisions. 

This inconsistency could be caused by data entry errors or system glitches during the data update process. The fields causing the issue are the 'WBS_ID', 'WBS_ID_WP', 'revision', and 'initial_auth_date'. 

The expected values for these fields should be such that for a given WBS ID and WP, the initial authorization date remains the same across all revisions. Any deviation from this consistency will trigger the DIQ check and result in an error. 

To resolve this issue, it is recommended to review the data entry process for these fields and ensure that the initial authorization date is correctly and consistently entered for all revisions of a given WBS ID and WP.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure the consistency of the initial authorization date across different revisions of the DS08 WAD table. The initial authorization date is a critical piece of information in project management as it marks the official start of the project or a particular task. If this date is inconsistent across revisions, it could lead to confusion and inaccuracies in tracking project progress and performance.

The importance of this check lies in maintaining the accuracy and reliability of the project timeline data. Inconsistent dates could lead to incorrect calculations or interpretations of project timelines, which could in turn affect decision-making and project outcomes.

The severity of this issue is marked as an ALERT. This means that while it may not immediately prevent data from being reviewed, it could potentially cause minor problems in data analysis or indicate that the data does not fully adhere to best practices. It is advisable to address this issue to ensure the highest quality and integrity of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsInitialAuthInconsistent] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		W1.*
	FROM
		DS08_WAD W1 INNER JOIN DS08_WAD W2 	ON W1.WBS_ID = W2.WBS_ID
											AND ISNULL(W1.WBS_ID_WP,'') = ISNULL(W2.WBS_ID_WP,'')
											AND W1.revision <> W2.revision
											AND W1.initial_auth_date <> W2.initial_auth_date
	WHERE
			W1.upload_ID = @upload_ID  
		AND	W2.upload_ID = @upload_ID  
)
```
