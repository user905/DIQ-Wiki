## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | WARNING |
| Unique ID   | 9080414   |
| Summary     | Are the labor budget dollars for this CA WAD missing in cost? |
| Error message | budget_labor_dollars > 0 & DS03.BCWSi_dollars = 0 where EOC = labor (by WBS_ID_CA). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA Labor Dollars Missing In Cost" is designed to identify any discrepancies in the labor budget dollars for the Control Account Work Authorization Document (CA WAD) in the DS08 WAD table. 

The test is checking if there are any instances where the labor budget dollars are greater than zero, but the corresponding BCWSi_dollars in the DS03_cost table are zero. This is done for entries where the Element of Cost (EOC) is labeled as 'Labor'. 

If the test returns any records, it indicates that there are labor budget dollars allocated in the DS08 WAD table that are not reflected in the DS03_cost table. This could be due to a data entry error, a missing update in the DS03_cost table, or a discrepancy between the two data sources. 

The fields causing the issue are 'budget_labor_dollars' in the DS08 WAD table and 'BCWSi_dollars' in the DS03_cost table. The expected values for these fields should be consistent across both tables, meaning if there are labor budget dollars in the DS08 WAD table, there should be corresponding BCWSi_dollars in the DS03_cost table. 

To resolve this issue, you should review the data entry process for these fields and ensure that updates are being made consistently across both tables.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the labor budget dollars for a specific Control Account Work Authorization Document (CA WAD) are not missing in the cost. The test checks if there are labor budget dollars allocated (budget_labor_dollars > 0) but no corresponding budgeted cost for work scheduled (BCWSi_dollars = 0) for labor (EOC = labor) in the DS03 table. 

The importance of this check is to ensure that all labor costs are accurately accounted for in the project budget. If labor costs are missing, it could lead to inaccurate budgeting and cost overruns, which could negatively impact the project's financial performance and completion timeline. 

The severity of this check is a WARNING, which means that while it may not prevent the data from being reviewed, it could cause problems during analysis. For example, it could lead to underestimation of the project's total cost, incorrect financial forecasting, and potential budgeting issues. Therefore, it's crucial to address this issue to ensure accurate and reliable project cost management.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsLaborBudgetMissingInDS03CA] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with NonLaborCA as (
		SELECT DISTINCT WBS_ID_CA
		FROM DS03_cost
		WHERE 
				upload_ID = @upload_ID 
			AND WBS_ID_WP NOT IN (
				SELECT WBS_ID_WP
				FROM DS03_cost
				WHERE upload_ID = @upload_ID AND EOC = 'Labor' AND BCWSi_dollars <> 0
			)
	)
	SELECT 
		W.*
	FROM
		DS08_WAD W INNER JOIN NonLaborCA C ON W.WBS_ID = C.WBS_ID_CA
	WHERE
			upload_ID = @upload_ID  
		AND TRIM(ISNULL(W.WBS_ID_WP,'')) = ''
		AND budget_labor_dollars <> 0
)
```
