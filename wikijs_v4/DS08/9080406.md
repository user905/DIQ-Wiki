## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS08 WAD |
| Severity    | WARNING |
| Unique ID   | 9080406   |
| Summary     | Is a CAM authorization date missing for this non-SLPP WAD? |
| Error message | auth_CAM_date is null / blank where DS01.type <> SLPP (by WBS_ID or WBS_ID_WP). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CAM Authorization Missing" is designed to identify any instances in the DS08 WAD table where a Control Account Manager (CAM) authorization date is missing for non-SLPP Work Authorization Documents (WADs). 

The error message "auth_CAM_date is null / blank where DS01.type <> SLPP (by WBS_ID or WBS_ID_WP)" indicates that the DIQ check has found records where the CAM authorization date (auth_CAM_date) is either null or blank. This issue is occurring for records that are not of type 'SLPP' in the DS01 WBS table, as identified by their Work Breakdown Structure ID (WBS_ID) or Work Package ID (WBS_ID_WP).

The likely cause of this error is that the CAM authorization date was not entered or was incorrectly entered for certain non-SLPP WADs. The expected value for the auth_CAM_date field should be a valid date. 

To resolve this issue, you should review the identified records in the DS08 WAD table and ensure that a valid CAM authorization date is provided for each non-SLPP WAD.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if there is a Control Account Manager (CAM) authorization date missing for non-SLPP Work Authorization Documents (WAD) in the DS08 WAD table. The test is checking for instances where the 'auth_CAM_date' field is null or blank for records where the 'DS01.type' is not equal to 'SLPP'. 

The importance of this check is to ensure that all non-SLPP WADs have a CAM authorization date. This is crucial because the CAM authorization date is an important piece of information that indicates when a CAM has authorized a particular work package. If this information is missing, it could lead to confusion or misinterpretation of the data, and could potentially impact project management decisions and processes. 

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is therefore recommended that this issue be addressed to ensure the integrity and quality of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS08_WAD_IsCAMAuthMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with NoSLPP as (
		SELECT WBS_ID 
		FROM DS01_WBS 
		WHERE upload_ID = @upload_ID AND [type] <> 'SLPP'
	)
	SELECT 
		*
	FROM
		DS08_WAD
	WHERE
			upload_ID = @upload_ID
		AND (
			WBS_ID_WP IN (SELECT WBS_ID FROM NoSLPP) OR
			WBS_ID IN (SELECT WBS_ID FROM NoSLPP)
		)
		AND auth_CAM_date IS NULL
)
```
