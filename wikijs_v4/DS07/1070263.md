## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 1070263   |
| Summary     | Is CBB not equal to NCC plus AUW? |
| Error message | CBB_dollars <> NCC_dollars + AUW_dollars. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CBB Not Equal to NCC Plus AUW" is designed to ensure the accuracy of financial data in the DS07 IPMR Header table. This check verifies that the value of the 'CBB_dollars' field is equal to the sum of the 'NCC_dollars' and 'AUW_dollars' fields. 

If an error is flagged by this DIQ check, it indicates that there is a discrepancy between the 'CBB_dollars' field and the combined total of the 'NCC_dollars' and 'AUW_dollars' fields. This could be due to a data entry error or a calculation error in the original data source. 

To resolve this issue, you should review the data in these fields for accuracy. The expected value for the 'CBB_dollars' field should be equal to the sum of the 'NCC_dollars' and 'AUW_dollars' fields. If it is not, you will need to correct the data in the relevant field(s) to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to ensure that the Contract Budget Base (CBB) is equal to the sum of the Negotiated Contract Cost (NCC) and Authorized Unpriced Work (AUW). The test is checking the integrity of the financial data in the project management system. 

The importance of this check is to ensure that the financial data is accurate and consistent. If the CBB is not equal to the sum of the NCC and AUW, it could indicate a data entry error or a discrepancy in the financial calculations. This could potentially lead to incorrect financial reporting and decision making.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is therefore important to address this issue to ensure the accuracy and reliability of the financial data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsCBBNEqToNCCPlusAUW] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND CBB_dollars <> NCC_dollars + AUW_dollars
)
```
