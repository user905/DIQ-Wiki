## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 1070360   |
| Summary     | Is the TAB negative? |
| Error message | TAB_dollars < 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Negative TAB" is designed to identify any instances where the Total Allocated Budget (TAB) in the DS07 IPMR Header table is recorded as a negative value. 

The TAB is a critical field in project management data as it represents the total budget allocated for a particular project. It is expected to be a positive value, as a negative budget is not logically possible. 

If this DIQ check identifies any records where the TAB is negative, it indicates an error in the data entry or data import process. The error could be due to a typo, a sign error in calculations, or a problem with the data source. 

To resolve this issue, you should review the identified records and correct the TAB values to ensure they are positive. If the error is widespread, it may be necessary to review the data entry or import processes to identify and correct the underlying issue.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the Total Allocated Budget (TAB) in dollars is negative. The severity level is 'WARNING', which means that if the TAB is indeed negative, it could cause significant problems during data analysis. 

The importance of this check lies in ensuring the accuracy and reliability of the budget data. In project management, the Total Allocated Budget should never be negative as it represents the total amount of money allocated for the project. A negative value could indicate data entry errors, calculation errors, or other issues that need to be addressed. If not corrected, this could lead to incorrect financial analysis and decision-making based on inaccurate data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsTABNegative] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND TAB_dollars < 0
)
```
