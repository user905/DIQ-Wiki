## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070354   |
| Summary     | Is profit fee zero? |
| Error message | profit_fee_dollars = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Zero Profit Fee" is designed to verify the integrity of the data in the DS07 IPMR Header table. Specifically, it checks whether the 'profit_fee_dollars' field contains a value of zero.

If the DIQ check returns a result, it indicates that there are instances in the DS07 IPMR Header table where the 'profit_fee_dollars' field is zero. This could be due to an error in data entry, a miscalculation, or a missing value that was defaulted to zero. 

The expected value for the 'profit_fee_dollars' field should be a positive number representing the profit fee in dollars. A zero value in this field may not be accurate, as it suggests that no profit fee was earned, which is unlikely in a construction project management context. 

To resolve this issue, review the data entries in the 'profit_fee_dollars' field of the DS07 IPMR Header table. Ensure that the values accurately reflect the profit fees earned and are not defaulted to zero.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the profit fee is zero. The severity level is 'ALERT', which means it's not a critical issue but it might cause minor problems or indicate that the data doesn't follow all best practices. 

The importance of this check is to ensure that the profit fee data is accurate and realistic. In a construction project management context, a zero profit fee could indicate a data entry error, a miscalculation, or an unusual business scenario. This could potentially lead to incorrect financial analysis or decision making. Therefore, it's important to alert the data management team to review and correct this data if necessary.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsProfitFeeEqToZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND profit_fee_dollars = 0
)
```
