## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070380   |
| Summary     | Is this a CPE contract type? |
| Error message | type = CPE. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CPE Contract Type" is designed to verify the contract type in the DS07 IPMR Header dataset. This check is specifically looking for entries where the contract type is listed as 'CPE'. 

If an error message is generated from this DIQ check, it indicates that there are entries in the 'type' field of the DS07 IPMR Header dataset that are not listed as 'CPE'. This could be due to a data entry error, a change in contract type that was not updated in the dataset, or a discrepancy in the contract type naming conventions. 

To resolve this issue, review the entries in the 'type' field of the DS07 IPMR Header dataset. Ensure that all entries are correctly listed as 'CPE' if they are indeed CPE contract types. If the contract type has changed, update the dataset accordingly. If there is a discrepancy in the naming conventions, consult with the relevant team or department to clarify and standardize the contract type names. 

Remember, maintaining data integrity and quality is crucial for accurate and effective project management. Regularly performing DIQ checks helps ensure that the data used in decision-making processes is reliable and accurate.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to verify if the contract type is 'CPE'. The test is currently in the 'TEST' status and has a severity level of 'ALERT'. 

The importance of this check is to ensure that the contract type is correctly classified as 'CPE'. This is crucial for accurate data categorization and subsequent analysis. If the contract type is not correctly identified, it may lead to incorrect interpretations or decisions based on this data. 

Although the severity level is 'ALERT', which is less severe, it still indicates that there might be minor problems or that the data doesn't follow all best practices. Therefore, it is important to address this issue to maintain the integrity and quality of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsTypeCPE] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND type = 'CPE'
)
```
