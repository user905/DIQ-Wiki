## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070370   |
| Summary     | Is the favorable cost VAC percent threshold equal to zero? |
| Error message | threshold_cost_VAC_pct_fav = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Zero Favorable Cost VAC Percent Threshold" is designed to verify the integrity of data in the DS07 IPMR Header table. Specifically, it checks whether the favorable cost Variance at Completion (VAC) percent threshold is equal to zero.

If the DIQ check returns any records, it indicates that the 'threshold_cost_VAC_pct_fav' field in the DS07 IPMR Header table has a value of zero. This could be due to an error in data entry or a miscalculation in the original data source. 

The 'threshold_cost_VAC_pct_fav' field should ideally contain a positive value, representing the favorable cost VAC percent threshold. A zero value might indicate that there is no favorable cost variance, which could potentially be a cause for concern in project management. 

To resolve this issue, you should review the data source or the data entry process to ensure that the 'threshold_cost_VAC_pct_fav' field is being correctly populated with the appropriate values.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the favorable cost Variance at Completion (VAC) percent threshold is equal to zero. The Variance at Completion (VAC) is a projection of the anticipated amount of budget deficit or surplus. A favorable cost VAC indicates that the project is expected to be completed under budget. 

The test is important because if the threshold is set to zero, it means that any favorable cost VAC, no matter how small, will trigger an alert. This could potentially lead to an overwhelming number of alerts, even for minor favorable variances that may not be significant in the context of the overall project budget. 

The severity of this test is marked as an 'ALERT', which is the least severe. This means that while it's not a critical issue that would prevent the data from being reviewed, it's still something that could cause minor problems or indicate that the data isn't following all best practices. It's a good practice to set a reasonable threshold for triggering alerts to ensure that only significant variances are flagged.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsThresholdCostVACPctFavEqToZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND ISNULL(threshold_cost_VAC_pct_fav,0) = 0
)
```
