## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 9070339   |
| Summary     | Is there an OTB/OTS date without CV reprogramming? |
| Error message | OTB_OTS_date is not null/blank & SUM(DS03.CV_rpg) = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "OTB / OTS Without CV Reprogramming" is designed to ensure that there is no instance where an Over Target Baseline (OTB) or Over Target Schedule (OTS) date exists without corresponding Cost Variance (CV) reprogramming. This check is performed on the DS07 IPMR Header table.

The error message "OTB_OTS_date is not null/blank & SUM(DS03.CV_rpg) = 0" indicates that there is an OTB or OTS date present, but the sum of CV reprogramming in the DS03 Cost table is zero. This is a discrepancy as an OTB or OTS date should always be accompanied by CV reprogramming.

The fields causing this issue are the OTB_OTS_date field in the DS07 IPMR Header table and the CV_rpg field in the DS03 Cost table. The expected values for these fields are that if an OTB or OTS date is present (i.e., the OTB_OTS_date field is not null or blank), there should be corresponding CV reprogramming (i.e., the sum of the CV_rpg field should not be zero).

To resolve this issue, ensure that every OTB or OTS date in the DS07 IPMR Header table has corresponding CV reprogramming in the DS03 Cost table.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there is an Over Target Baseline (OTB) or Over Target Schedule (OTS) date without corresponding Cost Variance (CV) reprogramming. The test is looking for records where the OTB/OTS date field is not null or blank, but the sum of the CV reprogramming field is zero.

The importance of this check is to ensure the integrity and accuracy of the project management data. In the context of Earned Value Management Systems (EVMS), an OTB or OTS represents a re-baselining of the project when it is determined that the original objectives cannot be met. This should be accompanied by CV reprogramming to reflect the changes in the project's cost performance baseline. If there is an OTB/OTS without CV reprogramming, it could lead to inaccurate cost performance analysis and reporting.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is therefore recommended to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoesOTBOTSDateExistWithoutCVRpg] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND (SELECT SUM(ISNULL(CV_rpg,0)) FROM DS03_cost WHERE upload_ID = @upload_ID) = 0
		AND OTB_OTS_date IS NOT NULL
)
```
