## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 1070355   |
| Summary     | Is profit fee negative? |
| Error message | profit_fee_dollars < 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Negative Profit Fee" is designed to identify any instances where the profit fee, as recorded in the DS07 IPMR Header table, is less than zero. 

The profit fee should ideally be a positive value, representing the amount of profit earned on a project. If the DIQ check identifies a negative value in the 'profit_fee_dollars' field, this indicates an error in the data. 

The error could be due to a data entry mistake, a calculation error, or a system glitch. It's important to review and correct these instances to ensure accurate financial reporting and project management. 

In summary, this DIQ check is crucial for maintaining the integrity of financial data in the DS07 IPMR Header table, specifically the 'profit_fee_dollars' field.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the profit fee is negative. The test is checking if the value in the 'profit_fee_dollars' field is less than zero. The severity of this test is marked as 'WARNING', which means that if the profit fee is negative, it could potentially cause problems during the analysis of the data.

The importance of this check lies in ensuring the accuracy and reliability of the financial data. In the context of EVMS construction project management, a negative profit fee could indicate a loss, which is a critical piece of information for decision-making. However, it could also be a data entry error or a calculation error, which needs to be corrected to maintain the integrity of the data. Therefore, this check helps in identifying potential issues in the data that could affect the overall analysis and interpretation of the project's financial performance.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsProfitFeeLTZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND profit_fee_dollars < 0
)
```
