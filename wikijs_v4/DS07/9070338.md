## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 9070338   |
| Summary     | Is there an OTB/OTS date without BAC reprogramming? |
| Error message | OTB_OTS_date is not null/blank & SUM(DS03.BAC_rpg) = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "OTB / OTS Without BAC Reprogramming" is designed to ensure that there is no Over Target Baseline (OTB) or Over Target Schedule (OTS) date without corresponding Budget at Completion (BAC) reprogramming. This check is performed on the DS07 IPMR Header table.

The error message "OTB_OTS_date is not null/blank & SUM(DS03.BAC_rpg) = 0" indicates that an OTB or OTS date has been entered in the DS07 IPMR Header table, but there is no corresponding BAC reprogramming in the DS03 Cost table. 

This discrepancy could be caused by a data entry error, such as forgetting to enter the BAC reprogramming when an OTB or OTS date is entered, or it could indicate a problem with the project management process, such as proceeding with an OTB or OTS without properly reprogramming the budget.

To resolve this issue, you should ensure that every OTB or OTS date in the DS07 IPMR Header table has a corresponding BAC reprogramming in the DS03 Cost table. The BAC reprogramming should not be zero or null when an OTB or OTS date is present.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there is an Over Target Baseline (OTB) or Over Target Schedule (OTS) date present, but no corresponding Budget at Completion (BAC) reprogramming. The test is checking if the 'OTB_OTS_date' field is not null or blank, and if the sum of 'DS03.BAC_rpg' equals zero.

The importance of this check is to ensure the integrity and accuracy of the project management data. In the context of EVMS (Earned Value Management System), an OTB or OTS is a re-baselining of the project when it is determined that the original objectives cannot be met, and the BAC is the total budget allocated to the project. If there is an OTB or OTS date without corresponding BAC reprogramming, it could indicate a potential issue with the project's budgeting or scheduling data.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is crucial to address this issue to ensure accurate project management and financial analysis.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoesOTBOTSDateExistWithoutBACRpg] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND (SELECT SUM(ISNULL(BAC_rpg,0)) FROM DS03_cost WHERE upload_ID = @upload_ID) = 0
		AND OTB_OTS_date IS NOT NULL
)
```
