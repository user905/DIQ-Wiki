## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070349   |
| Summary     | Are there UB estimated dollars but no UB estimated days? |
| Error message | UB_est_dollars <> 0 & UB_est_days = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Estimated Dollars without UB Estimated Days" is designed to identify any inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Unbudgeted (UB) estimated dollars recorded, but no corresponding UB estimated days.

The error message "UB_est_dollars <> 0 & UB_est_days = 0" indicates that there are records where the UB estimated dollars field is not zero, but the UB estimated days field is zero. This could be due to a data entry error or a system issue that failed to capture the UB estimated days.

The expected values for these fields would be that if there are UB estimated dollars recorded, there should also be UB estimated days recorded. This is because it is unlikely that a project would incur costs (UB estimated dollars) without also requiring some amount of time (UB estimated days). 

If this DIQ check identifies any records that do not meet this expectation, those records should be reviewed and corrected as necessary to ensure the integrity and quality of the DS07 IPMR Header data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are Undistributed Budget (UB) estimated dollars present, but no corresponding UB estimated days. The test is looking for records where the 'UB_est_dollars' field is not zero, but the 'UB_est_days' field is zero. 

The importance of this check is to ensure consistency and completeness in the data. In project management, if there are estimated dollars allocated (UB_est_dollars), there should also be an estimation of the time (UB_est_days) it will take to utilize those funds. If the time is not estimated, it could lead to mismanagement of resources and inaccurate project planning and forecasting.

The severity of this test is marked as 'ALERT', which is less severe. This means that while the data can still be reviewed, the absence of estimated days for certain budget allocations might cause minor problems in analysis or indicate that the data doesn't follow all best practices. It's a signal to the data analyst to pay attention to these records during their review.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBEstDollarsExistWithoutUBEstDays] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND ISNULL(UB_est_days,0) = 0
		AND UB_est_dollars > 0
)
```
