## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 9070368   |
| Summary     | Is the QRA Confidence Level below 90% for schedule following a BCP? |
| Error message | QRA_CL_schedule_pct < .9 count where DS09.type = BCP or where DS04.milestone_level between 131 & 135 > 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "QRA Confidence Level Low for Schedule Following BCP" is designed to identify instances where the QRA Confidence Level is below 90% for a schedule following a Baseline Change Proposal (BCP). This check is performed on the DS07 IPMR Header table.

The error is likely to be caused by one of two conditions. The first condition is when there is a BCP recorded in the DS09 CC Log table. The second condition is when the milestone level in the DS04 Schedule table is between 131 and 135. If either of these conditions is met and the QRA Confidence Level for the schedule is below 90%, the DIQ check will flag an error.

The fields causing the issue are the 'type' field in the DS09 CC Log table, the 'milestone_level' field in the DS04 Schedule table, and the 'QRA_CL_schedule_pct' field in the DS07 IPMR Header table. The expected values for these fields are 'BCP' for the 'type' field, a number between 131 and 135 for the 'milestone_level' field, and a number greater than or equal to 0.9 for the 'QRA_CL_schedule_pct' field. 

If the DIQ check flags an error, it indicates that the QRA Confidence Level for the schedule following a BCP or a milestone level between 131 and 135 is below the acceptable threshold of 90%. This could potentially indicate a risk in the project schedule that needs to be addressed.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the Quantitative Risk Analysis (QRA) Confidence Level is below 90% for the schedule following a Baseline Change Proposal (BCP). The QRA Confidence Level is a measure of the certainty that the project will be completed within the defined schedule. If it is below 90%, it indicates a high risk of schedule slippage, which could lead to delays in project completion.

The severity of this test is marked as 'WARNING', which means that if the QRA Confidence Level is indeed below 90%, it is likely to cause problems during the analysis of the project data. It may not necessarily prevent the data from being reviewed, but it could potentially lead to inaccurate conclusions or predictions about the project's timeline.

This check is important because it helps to identify potential risks in the project schedule early on. By addressing these risks promptly, the project team can take necessary actions to mitigate them and ensure that the project stays on track. It also helps to maintain the integrity and quality of the project data, which is crucial for effective project management and decision-making.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsQRACLSchedLowFollowingBCP] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND (
				(SELECT COUNT(*) FROM DS09_CC_log WHERE upload_ID = @upload_ID AND type = 'BCP') > 0
			OR (SELECT COUNT(*) FROM DS04_schedule WHERE upload_ID = @upload_id AND milestone_level BETWEEN 131 AND 135) > 0
		)
		AND QRA_CL_schedule_pct < .9
)
```
