## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 9070306   |
| Summary     | Is the PM EAC Likely date earlier than the End of PMB milestone? |
| Error message | EAC_PM_Likely < minimum DS04.EF_date where milestone_level = 170 (BL or FC). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "PM EAC Likely Date Prior to End of PMB Milestone" is designed to ensure that the Project Manager's Estimated At Completion (EAC) Likely date is not earlier than the End of Performance Measurement Baseline (PMB) milestone. This check is performed on the DS07 IPMR Header table.

The error message "EAC_PM_Likely < minimum DS04.EF_date where milestone_level = 170 (BL or FC)" indicates that the EAC Likely date provided by the Project Manager is earlier than the earliest End of PMB milestone date. This discrepancy is likely due to an error in data entry or project scheduling.

The fields causing this issue are the EAC_PM_Likely_date field in the DS07 IPMR Header table and the EF_date field in the DS04 Schedule table. The EAC_PM_Likely_date should be a date that is later than or equal to the minimum EF_date where the milestone level is 175 (End of PMB). 

To resolve this issue, please review and correct the EAC Likely date and/or the End of PMB milestone dates as necessary.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the Project Manager's (PM) Estimated At Completion (EAC) Likely date is earlier than the End of Performance Measurement Baseline (PMB) milestone. The test is checking if the value of 'EAC_PM_Likely' is less than the minimum 'DS04.EF_date' where the milestone level is 170 (Baseline or Forecast).

The importance of this check is to ensure that the project's estimated completion date is not set before the end of the project's performance measurement baseline. If the EAC date is earlier, it could indicate a potential scheduling issue or misalignment in project planning. This could lead to inaccurate project forecasting and performance measurement.

The severity of this check is marked as an 'ALERT', which means it's not a critical issue that would prevent data review, but it's still important to address. If not corrected, it could lead to minor problems in data analysis or indicate that the data doesn't follow all best practices. It's a signal to review the project's scheduling and ensure the EAC date aligns correctly with the PMB milestone.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsEACPMLikelyLtEndOfPMB] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with EndOfPMB as (
		SELECT MIN(EF_date) MinEF
		FROM DS04_schedule
		WHERE upload_ID = @upload_ID AND milestone_level = 175
	)
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND EAC_PM_Likely_date < (SELECT TOP 1 MinEF FROM EndOfPMB)
)
```
