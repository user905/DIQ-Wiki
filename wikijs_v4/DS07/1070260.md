## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 1070260   |
| Summary     | Is there an OTB/OTS date without MR? |
| Error message | MR_bgt_dollars = 0 when OTB_OTS_date exists. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "OTB/OTS Date without MR" is designed to ensure that each record in the DS07 IPMR Header table that has an Over Target Baseline (OTB) or Over Target Schedule (OTS) date also has a corresponding Management Reserve (MR) budget in dollars. 

The error message "MR_bgt_dollars = 0 when OTB_OTS_date exists" indicates that there are instances where an OTB or OTS date is present, but the corresponding MR budget in dollars is either zero or not provided. 

This discrepancy could be due to a data entry error or omission. The expected value for the MR_bgt_dollars field should be a non-zero value whenever there is an OTB or OTS date present in the record. 

To maintain data integrity and quality, it is important to ensure that all relevant fields are accurately filled out. In this case, if an OTB or OTS date is entered, a corresponding MR budget in dollars should also be provided.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there is an Over Target Baseline (OTB) or Over Target Schedule (OTS) date but no corresponding Management Reserve (MR). The test flags a warning when the MR budget dollars are zero but an OTB/OTS date exists. 

The importance of this check is to ensure that there is always a management reserve allocated whenever there is an OTB/OTS date. This is crucial because an OTB/OTS date indicates a change in the project's baseline due to unforeseen circumstances or changes in scope. The management reserve is a budget set aside to manage these unforeseen changes. If there is an OTB/OTS date without a corresponding MR, it could lead to budget overruns or schedule delays, which could disrupt the project's progress and completion. 

The severity of this check is a warning, implying that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is essential to address this issue to ensure accurate project management and budgeting.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoesOTBOTSDateExistWithoutMR] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND OTB_OTS_date IS NOT NULL
		AND ISNULL(MR_bgt_dollars,0) = 0
)
```
