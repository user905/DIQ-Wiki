## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070344   |
| Summary     | Are there UB budget dollars but no UB budget dayss? |
| Error message | UB_bgt_dollars <> 0 & UB_bgt_days = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Budget Dollars without UB Budget Days" is designed to identify potential inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Unbudgeted (UB) budget dollars recorded, but no corresponding UB budget days.

The error is likely to occur when the 'UB_bgt_dollars' field has a value greater than zero, indicating that there are UB budget dollars, but the 'UB_bgt_days' field is either null or zero, suggesting that there are no UB budget days. This inconsistency could be due to a data entry error or a problem with the data source.

To resolve this issue, both fields should be reviewed for accuracy. The 'UB_bgt_dollars' field should contain a value greater than zero only if there are UB budget days to account for, and the 'UB_bgt_days' field should not be null or zero if there are UB budget dollars recorded. If the 'UB_bgt_dollars' field has a value greater than zero, the 'UB_bgt_days' field should also have a value greater than zero.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are Unbudgeted (UB) budget dollars present but no corresponding UB budget days. The test is looking for records where the value of 'UB_bgt_dollars' is not equal to zero, indicating there are budget dollars allocated, but 'UB_bgt_days' equals zero, meaning there are no days budgeted.

The severity of this test is marked as an ALERT, which is less severe but indicates potential minor problems or deviations from best practices. The importance of this check is to ensure consistency and accuracy in the budgeting data. If there are budget dollars allocated, there should typically be corresponding budget days. If not, it could indicate a data entry error or a misalignment in budget planning. This could potentially lead to issues in project management and financial analysis, as the data may not accurately reflect the resources allocated to the project.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBBgtDollarsExistWithoutUBBgtDays] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND ISNULL(UB_bgt_days,0) = 0
		AND UB_bgt_dollars > 0
)
```
