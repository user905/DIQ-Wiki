## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070345   |
| Summary     | Are there UB budget dollars but no UB estimated dollars? |
| Error message | UB_bgt_dollars <> 0 & UB_est_dollars = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "UB Budget without UB Estimate (Dollars)" is designed to identify any inconsistencies in the DS07 IPMR Header data. Specifically, it checks for instances where there are Unbudgeted (UB) budget dollars recorded, but no corresponding UB estimated dollars.

The fields involved in this check are 'UB_bgt_dollars' and 'UB_est_dollars'. The error is likely to occur when the 'UB_bgt_dollars' field has a value other than zero, indicating that there are UB budget dollars, but the 'UB_est_dollars' field is either null or zero, indicating that there are no UB estimated dollars. 

In a typical scenario, if there are UB budget dollars, there should also be corresponding UB estimated dollars. Therefore, the expected values for these fields should either be both zero (indicating no UB budget or estimated dollars) or both non-zero (indicating the presence of UB budget and estimated dollars). 

If this DIQ check identifies any records that do not meet these criteria, it suggests that there may be missing or incorrect data in the 'UB_est_dollars' field. This could be due to a data entry error or an issue with the data source. It is recommended to review and correct these records to ensure the accuracy and integrity of the project management data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for instances where there are Unbudgeted (UB) budget dollars present, but no corresponding UB estimated dollars. The test is looking for records where the UB budget dollars are not equal to zero, but the UB estimated dollars are equal to zero. 

The importance of this check is to ensure consistency and accuracy in the budgeting and estimation process. If there are UB budget dollars allocated, there should ideally be an estimate of the UB dollars as well. If not, it could indicate a potential oversight or error in the budgeting process. 

The severity of this check is marked as an 'ALERT', which means it is not a critical issue that would prevent the data from being reviewed. However, it is a potential issue that could cause minor problems or indicate that the data does not follow all best practices. It is a signal to review the data and correct any inconsistencies to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoUBBgtDollarsExistWithoutUBEstDollars] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND UB_bgt_dollars <> 0
		AND ISNULL(UB_est_dollars,0) = 0
)
```
