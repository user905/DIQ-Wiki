## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | WARNING |
| Unique ID   | 1070270   |
| Summary     | Are the PM EAC likely dollars greater than the CBB without an OTB/OTS? |
| Error message | EAC_PM_likely_dollars > CBB_dollars where OTB_OTS_date is missing. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled 'PM EAC Likely Dollars & CBB Issue' is performed on the DS07 IPMR Header table. This check is designed to identify any instances where the Project Manager's Estimated At Completion (EAC) in likely dollars is greater than the Contract Budget Base (CBB) when there is no Over Target Baseline (OTB) or Over Target Schedule (OTS) date present.

The fields involved in this check are 'EAC_PM_likely_dollars', 'CBB_dollars', and 'OTB_OTS_date'. The check flags an issue if the value of 'EAC_PM_likely_dollars' is greater than 'CBB_dollars' and the 'OTB_OTS_date' field is missing.

The likely cause of this issue could be an error in data entry or a miscalculation in the estimated completion cost. It's important to ensure that the EAC is not exceeding the CBB unless there is an OTB or OTS date present. If the EAC is indeed greater, it may indicate that the project is over budget, and the absence of an OTB or OTS date could mean that this overage has not been properly accounted for or approved. 

To resolve this issue, review the flagged entries and confirm the accuracy of the EAC and CBB values. If the EAC is correct and exceeds the CBB, an OTB or OTS date should be provided. If the EAC is incorrect, it should be adjusted to reflect the accurate estimated completion cost.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check for potential issues with the project's financial data. Specifically, it is checking if the Project Manager's Estimate at Completion (PM EAC) in likely dollars is greater than the Contract Budget Base (CBB) when there is no Over Target Baseline or Over Target Schedule (OTB/OTS) present. 

The importance of this check is to ensure that the project's estimated costs are not exceeding the budget without a proper justification or plan (OTB/OTS). If the PM EAC is indeed higher than the CBB without an OTB/OTS, it could indicate a potential overrun, which could lead to financial and scheduling issues down the line. 

The severity of this check is marked as a 'WARNING', which means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during the analysis. Therefore, it is crucial to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsEACPMLikelyDollarsGtCBBWithoutOTBOTSDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND EAC_PM_likely_dollars > CBB_dollars
		AND OTB_OTS_date IS NULL
)
```
