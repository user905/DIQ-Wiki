## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 1070364   |
| Summary     | Is the favorable cost cum percent threshold equal to zero? |
| Error message | threshold_cost_cum_pct_fav = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Zero Favorable Cost Cum Percent Threshold" is designed to verify the integrity of data in the DS07 IPMR Header table. This check specifically focuses on the 'threshold_cost_cum_pct_fav' field.

The purpose of this DIQ check is to ensure that the 'threshold_cost_cum_pct_fav' field is not equal to zero. This field represents the favorable cost cumulative percentage threshold. A zero value in this field may indicate a data entry error or a calculation error in the project management data.

If the DIQ check identifies records where 'threshold_cost_cum_pct_fav' is equal to zero, it means that the favorable cost cumulative percentage threshold for those records is not set or incorrectly set to zero. This could potentially distort the overall project cost analysis and projections.

To resolve this issue, review the data entry process for the 'threshold_cost_cum_pct_fav' field. Ensure that the values entered are accurate and reflect the correct favorable cost cumulative percentage threshold. The expected value for this field should be a positive number, representing the percentage threshold for favorable costs.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS07 IPMR Header' table to check if the favorable cost cumulative percentage threshold is equal to zero. The test is important because it ensures that the data in the 'threshold_cost_cum_pct_fav' field is accurate and meaningful. If the threshold is zero, it may indicate that there are no favorable costs, which could be a potential issue in the data or the project's financial performance. 

The severity of this test is marked as an 'ALERT', which means it's not a critical issue that would prevent the data from being reviewed, but it's still important to address. If left unchecked, it could lead to minor problems in data analysis or indicate that the data doesn't follow all best practices. It's crucial to maintain data integrity and quality to ensure accurate and reliable project management.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_IsThresholdCostCumPctFavEqToZero] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND ISNULL(threshold_cost_cum_pct_fav,0) = 0
)
```
