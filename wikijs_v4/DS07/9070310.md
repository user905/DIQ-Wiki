## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS07 IPMR Header |
| Severity    | ALERT |
| Unique ID   | 9070310   |
| Summary     | Are there RPG tasks without an OTB/OTS Date? |
| Error message | DS04 tasks with RPG = Y found without DS07.OTB_OTS_Date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "RPG without OTB/OTS Date" is designed to identify any tasks in the DS04 Schedule table that are marked as RPG (Revised Program Goal) tasks but do not have an associated OTB/OTS (Over Target Baseline/Over Target Schedule) date in the DS07 IPMR (Integrated Program Management Report) Header table.

The error message "DS04 tasks with RPG = Y found without DS07.OTB_OTS_Date" indicates that there are tasks in the DS04 Schedule table that have been marked as RPG tasks (RPG = 'Y') but do not have a corresponding OTB/OTS date in the DS07 IPMR Header table.

This discrepancy could be due to a data entry error or omission in either the DS04 Schedule table or the DS07 IPMR Header table. The expected value for any RPG task in the DS04 Schedule table is to have a corresponding OTB/OTS date in the DS07 IPMR Header table. 

To resolve this issue, review the tasks in the DS04 Schedule table that are marked as RPG tasks and ensure that they have a corresponding OTB/OTS date in the DS07 IPMR Header table. If the OTB/OTS date is missing, it should be added to the DS07 IPMR Header table. If the RPG task does not require an OTB/OTS date, the RPG designation in the DS04 Schedule table may need to be revised.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if there are any tasks marked as "RPG" (Revised Program Goals) in the DS04 table that do not have an associated OTB/OTS (Over Target Baseline/Over Target Schedule) date in the DS07 IPMR (Integrated Program Management Report) Header table. The severity level is marked as an ALERT, which means it's not a critical issue but it might cause minor problems or indicate that the data doesn't follow all best practices.

The importance of this check is to ensure that all tasks with revised program goals have an associated OTB/OTS date. This is crucial for project management as it helps in tracking the progress of tasks and understanding if they are on schedule or not. If a task with revised goals doesn't have an OTB/OTS date, it could lead to issues in project tracking and management. Therefore, while it's not a severe error, it's still important to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS07_IPMR_DoesDS04RPGExistWithoutOTBOTSDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS07_IPMR_header
	WHERE
			upload_ID = @upload_ID
		AND (SELECT COUNT(*) FROM DS04_schedule WHERE upload_ID = @upload_ID AND RPG = 'Y') > 0
		AND OTB_OTS_date IS NULL
)
```
