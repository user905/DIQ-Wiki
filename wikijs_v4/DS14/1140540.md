## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS14 HDV-CI |
| Severity    | WARNING |
| Unique ID   | 1140540   |
| Summary     | Is there an equipment ID without a subcontract ID? |
| Error message | equipment_ID found while subK_ID is missing or blank. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Equipment ID Without SubK ID" is designed to identify any instances in the DS14 HDV-CI table where an equipment ID is present but a subcontract ID (subK_ID) is missing or blank. 

This issue may arise due to incomplete data entry or a data import error. The fields causing the issue are the 'equipment_ID' and 'subK_ID'. The 'equipment_ID' field should not be empty, and the 'subK_ID' field should not be missing or blank. 

The expected values for these fields are any valid entries that correspond to the equipment and subcontract IDs, respectively. If this DIQ check identifies any records that do not meet these criteria, it indicates that there is missing or incomplete data that needs to be addressed to ensure the integrity and quality of the project management data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that every piece of equipment in the 'DS14 HDV-CI' table has an associated subcontract ID ('subK_ID'). The test is checking for instances where an equipment ID ('equipment_ID') is present, but the corresponding 'subK_ID' is missing or blank. 

The importance of this check lies in maintaining the integrity and completeness of the data. In the context of EVMS construction project management, each piece of equipment is typically associated with a specific subcontract. If an equipment ID does not have a corresponding subcontract ID, it could lead to issues in tracking the equipment's usage, cost, and other related project management activities. 

The severity of this test is marked as 'WARNING', which implies that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis. For instance, it could lead to inaccurate cost calculations or misallocation of resources. Therefore, it is crucial to address this issue to ensure accurate and efficient project management.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS14_HDV_CI_DoesEquipIDExistWithoutSubKId] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS14_HDV_CI
	WHERE
			upload_ID = @upload_ID
		AND TRIM(equipment_ID) <> ''
		AND TRIM(ISNULL(subK_ID,'')) = ''
)
```
