## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS14 HDV-CI |
| Severity    | WARNING |
| Unique ID   | 9140544   |
| Summary     | Is the HDV-CI missing in the forecast schedule? |
| Error message | HDV_CI_ID not in DS04.HDV_CI_ID list where schedule_type = FC. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "HDV-CI Missing in Schedule (FC)" is designed to verify the presence of HDV-CI in the forecast schedule of the DS14 HDV-CI table. 

The error message "HDV_CI_ID not in DS04.HDV_CI_ID list where schedule_type = FC" indicates that there are instances where the HDV_CI_ID from the DS14 HDV-CI table is not found in the DS04 schedule table where the schedule type is 'FC' (Forecast). 

This discrepancy could be due to missing or incorrect entries in the HDV_CI_ID field in either the DS14 HDV-CI table or the DS04 schedule table. It is expected that every HDV_CI_ID in the DS14 HDV-CI table should have a corresponding entry in the DS04 schedule table with a schedule type of 'FC'. 

To resolve this issue, please ensure that all HDV_CI_IDs in the DS14 HDV-CI table have corresponding entries in the DS04 schedule table with a schedule type of 'FC'.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the HDV-CI (High Definition Video-Construction Item) is missing in the forecast schedule. The HDV-CI is a crucial element in the EVMS (Earned Value Management System) construction project management data as it provides high-definition video evidence of the construction items, which is essential for quality control and progress tracking.

The severity of this test is marked as a WARNING. This means that while the absence of HDV-CI in the forecast schedule may not immediately halt the data review process, it is likely to cause problems during the analysis. The forecast schedule is used to plan and manage future construction activities, and missing HDV-CI could lead to inaccurate planning, mismanagement of resources, and potential delays in the project timeline.

Therefore, this check is important to ensure that all necessary data is included in the forecast schedule for accurate and efficient project management. It helps in maintaining the integrity and quality of the project data, which is crucial for the successful completion of the construction project.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS14_HDV_CI_IsHDVCIMissingInDS04BL] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS14_HDV_CI
	WHERE 
			upload_ID = @upload_ID 
		AND HDV_CI_ID NOT IN (
			SELECT HDV_CI_ID 
			FROM DS04_schedule
			WHERE upload_ID = @upload_ID AND schedule_type = 'FC'
		)
)
```
