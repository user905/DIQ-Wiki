## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS10 CC Log Detail |
| Severity    | WARNING |
| Unique ID   | 1100467   |
| Summary     | Are there hours on this transaction but no dollars? |
| Error message | hours_delta <> 0 & dollars_delta = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Hours Delta without Dollars" is designed to ensure that there are no inconsistencies in the DS10 CC Log Detail data. Specifically, it checks for transactions where there are recorded hours (hours_delta) but no corresponding dollar amount (dollars_delta).

If this DIQ check flags an error, it means that there are entries in the DS10 CC Log Detail where work hours have been logged, but no corresponding dollar value has been recorded. This could be due to a data entry error, or a problem with the system that records this data.

The fields causing this issue are 'hours_delta' and 'dollars_delta'. The expected values for these fields should be consistent - if there are hours recorded (hours_delta not equal to 0), there should also be a corresponding dollar amount (dollars_delta not equal to 0). If hours_delta is not 0 and dollars_delta is 0, this indicates a discrepancy that needs to be addressed. 

To resolve this issue, review the flagged entries in the DS10 CC Log Detail and ensure that for every transaction with recorded hours, there is a corresponding dollar amount.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS10 CC Log Detail' table to check for instances where there are hours recorded for a transaction but no corresponding dollar amount. This is identified by a non-zero 'hours_delta' and a 'dollars_delta' of zero. 

The importance of this check is to ensure the accuracy and completeness of the data. In a construction project management context, hours worked are typically associated with a cost. If there are hours recorded without a corresponding dollar amount, it could indicate a data entry error or omission that could impact financial tracking and project cost management.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. For example, it could lead to underestimation of project costs or misrepresentation of resource allocation. Therefore, it is important to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS10_CCLogDetails_IsHoursDeltaMissingDollarsDelta] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS10_CC_log_detail
	WHERE 
		upload_ID = @upload_ID
	AND hours_delta <> 0
	AND ISNULL(dollars_delta,0)=0
)
```
