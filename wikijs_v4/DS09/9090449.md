## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS09 CC Log |
| Severity    | WARNING |
| Unique ID   | 9090449   |
| Summary     | Does this BCP change control log entry exist without a BCP in the schedule? |
| Error message | type = BCP & count = 0 where DS04.milestone_level between 131 & 135. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "BCP Change Control Without BCP" is designed to ensure that there are no entries in the DS09 CC Log that are marked as 'BCP' type without a corresponding BCP in the DS04 Schedule. 

The error is likely to occur when there is a discrepancy between the DS09 CC Log and the DS04 Schedule. Specifically, if there is an entry in the DS09 CC Log marked as 'BCP' type, but there is no corresponding BCP in the DS04 Schedule with a milestone level between 131 and 135, the DIQ check will fail.

The fields causing the issue are the 'type' field in the DS09 CC Log and the 'milestone_level' field in the DS04 Schedule. The expected values are that for every 'BCP' type entry in the DS09 CC Log, there should be a corresponding BCP in the DS04 Schedule with a milestone level between 131 and 135. 

If the DIQ check fails, it indicates that there is a BCP change control log entry that exists without a corresponding BCP in the schedule, which could lead to inconsistencies in the project management data.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that every BCP (Baseline Change Proposal) change control log entry in the 'DS09 CC Log' table is associated with a BCP in the schedule. The test is checking for instances where the type is 'BCP' but the count is '0' in the range of milestone levels between 131 and 135 in the 'DS04' table. 

The importance of this check is to maintain the integrity and quality of the project management data. In the context of EVMS (Earned Value Management System), a BCP is a formal proposal to change the baseline of a project. Therefore, every BCP change control log entry should correspond to a BCP in the project schedule. If there are entries without a corresponding BCP, it could lead to inconsistencies and inaccuracies in the project management data, which could in turn affect project tracking, reporting, and decision-making.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is therefore recommended to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS09_CCLog_DoBCPTransactionsExistWithoutDS04BCPs] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with BCPCount as (
		SELECT COUNT(*) Count
		FROM DS04_schedule 
		WHERE upload_ID = @upload_ID AND milestone_level BETWEEN 131 AND 135
	)
	SELECT 
		*
	FROM
		DS09_CC_log
	WHERE
			upload_ID = @upload_ID  
		AND [type] = 'BCP'
		AND (SELECT TOP 1 Count FROM BCPCount) = 0
)
```
