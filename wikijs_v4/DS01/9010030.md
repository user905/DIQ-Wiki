## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS01 WBS |
| Severity    | WARNING |
| Unique ID   | 9010030   |
| Summary     | Is this CA missing in the WAD list? |
| Error message | WBS_ID where DS01.type = CA not in DS08.WBS_ID list. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA WBS ID Missing in WAD List" is designed to identify any Control Account (CA) in the DS01 WBS (Work Breakdown Structure) table that is not listed in the DS08 WAD (Work Authorization Document) table. 

The error message "WBS_ID where DS01.type = CA not in DS08.WBS_ID list" indicates that there are instances where the WBS_ID (Work Breakdown Structure Identifier) associated with a Control Account (CA) in the DS01 WBS table is not found in the list of WBS_IDs in the DS08 WAD table. 

This discrepancy could be due to a variety of reasons such as missing entries, incorrect entries, or data synchronization issues between the DS01 WBS and DS08 WAD tables. 

The expected value is that every WBS_ID associated with a Control Account (CA) in the DS01 WBS table should also be present in the DS08 WAD table. If this is not the case, it suggests that there may be Control Accounts that are not properly authorized, which could lead to issues in project management and execution. 

To resolve this issue, it is recommended to cross-verify the entries in both tables and ensure that all Control Accounts in the DS01 WBS table have corresponding entries in the DS08 WAD table.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if there are any Control Account (CA) Work Breakdown Structure (WBS) IDs in the DS01 WBS table that are missing in the DS08 WBS ID list. The Work Breakdown Structure is a key project deliverable that organizes the team's work into manageable sections. The missing IDs could indicate that there are sections of work that are not being accounted for in the WAD (Work Authorization Document) list, which could lead to issues in project management and tracking.

The severity of this check is marked as a WARNING. This means that while the data can still be reviewed, the issue is likely to cause problems during analysis. It could lead to inaccurate project tracking, budgeting, and scheduling, which could in turn impact the overall success of the project. Therefore, it is important to address this issue to ensure the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS01_WBS_IsCAMissingInDS08] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT	*
    FROM	DS01_WBS
    WHERE	upload_ID = @upload_id
			AND [external] = 'N'
			AND type = 'CA'
			AND WBS_ID NOT IN (
				SELECT	WBS_ID
				FROM	DS08_WAD
				WHERE	upload_ID = @upload_id AND TRIM(ISNULL(auth_PM_date,'')) <> ''
			)
)
```
