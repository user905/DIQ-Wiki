## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS01 WBS |
| Severity    | WARNING |
| Unique ID   | 1010030   |
| Summary     | Does the Title appear more than once across the WBS hierarchy? |
| Error message | WBS Title is not unique across the WBS hierarchy. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Title Not Unique" is designed to ensure that each title in the DS01 Work Breakdown Structure (WBS) table is unique across the WBS hierarchy. 

The error message "WBS Title is not unique across the WBS hierarchy" indicates that one or more titles in the WBS table have been used more than once. This is problematic as each title should be unique to ensure accurate and efficient data management.

The DIQ check identifies these duplicate titles by comparing each title in the WBS table to all other titles in the same table. If a title appears more than once, it is flagged by the check.

To resolve this issue, review the titles in the DS01 WBS table and modify any duplicates to ensure each title is unique. This will improve the integrity and quality of the data in the WBS table.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check for the uniqueness of the Title in the Work Breakdown Structure (WBS) hierarchy in the DS01 WBS table. The uniqueness of the Title is important because it ensures that each task or activity in the WBS hierarchy is distinct and identifiable. If the Title is not unique, it could lead to confusion and misinterpretation of the tasks or activities, which could in turn affect the project management and execution.

The severity of this test is marked as a WARNING, which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. If the Title is not unique, it could lead to incorrect associations or misinterpretations of the data, which could affect the accuracy and reliability of the analysis. Therefore, it is important to address this issue to ensure the integrity and quality of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS01_WBS_IsTitleRepeated] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
    -- Insert statements for procedure here
	SELECT 
		* 
	FROM 
		DS01_WBS 
	WHERE 
			upload_ID = @upload_ID 
		AND DS01_WBS.Title IN (SELECT Title FROM DS01_WBS WHERE upload_ID = @upload_ID GROUP BY Title HAVING COUNT(Title) > 1)
)
```
