## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS01 WBS |
| Severity    | WARNING |
| Unique ID   | 1010005   |
| Summary     | Was only one unique CAM used across the WBS? |
| Error message | Only a single CAM found for all WBS Elements; more than one CAM is required across the WBS hierarchy |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Single CAM Across WBS Hierarchy" is designed to ensure that more than one unique Control Account Manager (CAM) is used across the Work Breakdown Structure (WBS) in the DS01 WBS table. 

The error message "Only a single CAM found for all WBS Elements; more than one CAM is required across the WBS hierarchy" indicates that the DIQ check has found only one unique CAM for all WBS elements. This is not as expected, as a diverse WBS hierarchy should typically involve more than one CAM. 

The issue is likely caused by the CAM field in the DS01 WBS table. This field should contain distinct values representing different CAMs. If only one unique CAM is found, it suggests that the data may not have been entered correctly or that the WBS hierarchy is not diverse enough. 

To resolve this issue, please ensure that the CAM field in the DS01 WBS table contains more than one unique value, representing different CAMs involved in the WBS hierarchy.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that there is more than one Control Account Manager (CAM) assigned across the Work Breakdown Structure (WBS) hierarchy in the DS01 WBS table. The test is checking for the presence of multiple unique CAMs, as having only one CAM for all WBS elements could lead to a lack of oversight and potential mismanagement of tasks.

The importance of this check is to ensure proper distribution of responsibilities and to avoid overloading a single CAM with all tasks. This is crucial for effective project management and to ensure that all tasks are properly supervised and executed. The severity level is marked as a WARNING, which means that while the data can still be reviewed, having only one CAM is likely to cause problems during analysis and could potentially impact the successful execution of the project. Therefore, it is recommended to assign more than one CAM across the WBS hierarchy.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS01_WBS_DoesOnlyOneCAMExistAcrossWBS] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	--test could probably be tweaked
	--returns only the Level 1 WBS, and only one Level 1 in case there are multiple
    SELECT 
        *
    FROM
        DummyRow_Get(@upload_id)
    WHERE (SELECT COUNT(DISTINCT CAM) FROM DS01_WBS	WHERE upload_ID = @upload_id AND TRIM(ISNULL(CAM,'')) <> '') = 1
)
```
