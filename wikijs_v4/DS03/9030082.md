## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS03 Cost |
| Severity    | WARNING |
| Unique ID   | 9030082   |
| Summary     | Is this CA missing in the WBS (DS01)? |
| Error message | The CA WBS ID was not found in the WBS (DS01). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CA Missing In WBS" is designed to verify the consistency between the "DS03 Cost" and "DS01 WBS" tables. Specifically, it checks whether the Cost Account (CA) WBS ID in the "DS03 Cost" table is also present in the "DS01 WBS" table.

If an error is flagged by this DIQ check, it means that there is a Cost Account WBS ID in the "DS03 Cost" table that could not be found in the "DS01 WBS" table. This discrepancy could be due to a data entry error, a missing entry in the "DS01 WBS" table, or a mismatch between the identifiers used in the two tables.

To resolve this issue, you should ensure that all Cost Account WBS IDs in the "DS03 Cost" table have corresponding entries in the "DS01 WBS" table. The identifiers used in both tables should also be consistent.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Control Account (CA) WBS ID in the 'DS03 Cost' table is also present in the Work Breakdown Structure (WBS) or 'DS01' table. The test is checking for data consistency across different tables, which is crucial for accurate data analysis and reporting.

The importance of this check lies in maintaining the integrity of the project management data. In the context of EVMS (Earned Value Management System), the WBS ID is a critical element that links various aspects of the project, including cost, schedule, and work packages. If a CA WBS ID is missing in the WBS, it could lead to inaccurate project tracking and reporting, potentially causing misinterpretation of the project's status and performance.

The severity level of this test is 'WARNING', which implies that while the issue may not prevent the data from being reviewed, it is likely to cause problems during analysis. Therefore, it is recommended to address this issue to ensure accurate and reliable project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_IsCAMissingInDS01] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT 
		* 
	FROM 
		DS03_Cost
	WHERE 
			upload_ID = @upload_ID
		AND WBS_ID_CA NOT IN (SELECT WBS_ID FROM DS01_WBS WHERE upload_ID = @upload_ID)
)
```
