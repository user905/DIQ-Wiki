## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS03 Cost |
| Severity    | WARNING |
| Unique ID   | 9030071   |
| Summary     | Does this SLPP or PP have actuals? |
| Error message | SLPP or PP found with ACWPi <> 0 (Dollars, Hours, or FTEs). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "SLPP or PP with Actuals" is designed to verify the integrity of data in the DS03 Cost table, specifically focusing on the fields related to actual costs. 

This check is performed to ensure that no SLPP (Summary Level Planning Package) or PP (Planning Package) has actual costs associated with it. In other words, the fields ACWPi_dollars, ACWPi_FTEs, and ACWPi_hours should all be zero for these types of packages. 

If the DIQ check finds any SLPP or PP with non-zero values in these fields, it will flag an error. This could be caused by incorrect data entry or a system error that has incorrectly assigned actual costs to these packages. 

The check also considers the WBS_ID_WP and WBS_ID_CA fields. If the WBS_ID_WP field is not empty, the check verifies that the WBS_ID_WP is not associated with an SLPP or PP. If the WBS_ID_WP field is empty, the check verifies that the WBS_ID_CA is not associated with an SLPP or PP. 

Lastly, the check also flags an error if the EVT field is marked as 'K', which indicates that the package is complete. 

To resolve any errors flagged by this check, review the data entries for the flagged packages and correct any inaccuracies. Ensure that actual costs are not assigned to SLPPs or PPs, and that completed packages are correctly marked.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS03 Cost' table to check if there are any Single Line Performance Packages (SLPP) or Performance Packages (PP) that have actual costs associated with them. The test is looking for instances where the Actual Cost of Work Performed (ACWP) is not equal to zero, indicating that there are actual costs, hours, or Full-Time Equivalents (FTEs) recorded against these packages.

The severity of this test is marked as a 'WARNING', which means that while it may not prevent the data from being reviewed, it could potentially cause problems during the analysis. This could be due to inconsistencies or inaccuracies in the data, which could lead to incorrect conclusions or decisions being made based on this data.

The importance of this check is to ensure that the cost data associated with each SLPP or PP is accurate and consistent. This is crucial for effective project management, as it allows for accurate tracking of costs and resources, and enables informed decision-making. If actual costs are being recorded against SLPPs or PPs that should not have them, it could indicate a problem with the data entry process, or potentially highlight issues with the project's budgeting or resource allocation.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS03_Cost_DoesSLPPOrPPHaveACWP] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with ToTest (WBSID) AS (
		SELECT WBS_ID
		FROM DS01_WBS
		WHERE upload_ID = @upload_ID AND type in ('SLPP','PP')
	)
	SELECT 
		* 
	FROM 
		DS03_Cost
	WHERE
			upload_ID = @upload_ID
		AND (ACWPi_dollars <> 0 OR ACWPi_FTEs <> 0 OR ACWPi_hours <> 0)
		AND (
			(TRIM(ISNULL(WBS_ID_WP,'')) <> '' AND WBS_ID_WP IN (SELECT WBSID FROM ToTest)) OR
			(TRIM(ISNULL(WBS_ID_WP,'')) = '' AND WBS_ID_CA IN (SELECT WBSID FROM ToTest)) OR
			EVT = 'K'
		)
)
```
