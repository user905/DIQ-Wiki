## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS12 Variance CAL |
| Severity    | WARNING |
| Unique ID   | 1120500   |
| Summary     | Is the transaction ID on this corrective action duplicated? |
| Error message | Count of transaction_ID > 1. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Duplicate Transaction ID" is designed to ensure that each transaction ID in the DS12 Variance CAL table is unique. This check is important because duplicate transaction IDs can cause confusion and errors in data analysis and reporting.

The DIQ check works by counting the number of times each transaction ID appears in the DS12 Variance CAL table. If a transaction ID appears more than once, the DIQ check will flag this as an error.

The error message "Count of transaction_ID > 1" indicates that there are one or more transaction IDs in the DS12 Variance CAL table that appear more than once. This is likely caused by a data entry error, such as accidentally entering the same transaction ID for different transactions.

To resolve this issue, you should review the transaction IDs in the DS12 Variance CAL table and ensure that each transaction ID is unique. If you find any duplicate transaction IDs, you should correct them by assigning a unique transaction ID to each transaction.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check for any duplicate transaction IDs in the 'DS12 Variance CAL' table. Duplicate transaction IDs can cause confusion and inaccuracies in data analysis, as they may indicate that the same transaction has been recorded more than once. This could lead to overestimation of costs or underestimation of resources, which could significantly impact project management decisions.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is important to address this issue to ensure the accuracy and reliability of the data. This check is crucial in maintaining the integrity and quality of the EVMS construction project management data, as it helps to prevent potential errors in data recording and analysis.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS12_VAR_CAL_IsTransactionIDDuplicated] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM 
		DS12_variance_CAL DS12
	WHERE 
			DS12.upload_ID = @upload_ID 
		AND DS12.transaction_ID IN (
			SELECT transaction_ID 
			FROM DS12_variance_CAL 
			WHERE upload_ID = @upload_ID 
			GROUP BY transaction_ID 
			HAVING COUNT(*) > 1
		)
)
```
