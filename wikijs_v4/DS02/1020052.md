## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS02 OBS |
| Severity    | WARNING |
| Unique ID   | 1020052   |
| Summary     | Does the Title appear more than once across the OBS hierarchy? |
| Error message | OBS Title is not unique across the OBS hierarchy. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Title Not Unique" is designed to ensure that each title in the DS02 OBS (Organizational Breakdown Structure) table is unique across the entire OBS hierarchy. 

The error message "OBS Title is not unique across the OBS hierarchy" indicates that there is at least one title in the DS02 OBS table that appears more than once. This is problematic because each title in the OBS should be unique to ensure accurate and efficient data retrieval and analysis.

The likely cause of this error is a data entry issue where the same title has been used for more than one entry in the OBS hierarchy. This could be due to a misunderstanding of the data entry requirements, a typographical error, or a system glitch that duplicated entries.

To resolve this issue, you should review the titles in the DS02 OBS table and correct any duplicates. Each title should be unique and accurately represent its corresponding entry in the OBS hierarchy.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check for the uniqueness of the Title in the OBS (Organizational Breakdown Structure) hierarchy in the DS02 OBS table. The uniqueness of the Title is important because it ensures that each entry in the OBS hierarchy can be distinctly identified and referenced. 

The severity of this test is marked as a WARNING, which means that while the data can still be reviewed, having non-unique Titles is likely to cause problems during analysis. For instance, it could lead to confusion or errors when referencing or analyzing specific entries in the OBS hierarchy. Therefore, it is important to address this issue to maintain the integrity and quality of the EVMS construction project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS02_OBS_IsTitleRepeated] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
    -- Insert statements for procedure here
	SELECT 
		* 
	FROM 
		DS02_OBS 
	WHERE 
			upload_ID = @upload_ID 
		AND DS02_OBS.Title IN (SELECT Title FROM DS02_OBS WHERE upload_ID = @upload_ID GROUP BY Title HAVING COUNT(Title) > 1)
)
```
