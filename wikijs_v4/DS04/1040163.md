## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | WARNING |
| Unique ID   | 1040163   |
| Summary     | Is your forecast schedule missing the Contract Completion milestone? |
| Error message | No row found for Contract Completion milestone (milestone_level = 180) in forecast schedule (schedule_type = FC). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Contract Completion Milestone Missing in Forecast" is designed to ensure that your forecast schedule in the DS04 Schedule table includes the Contract Completion milestone. 

This check is important because the Contract Completion milestone, identified by a milestone level of 180, is a critical component of the forecast schedule. If this milestone is missing, it could indicate that the forecast schedule is incomplete or has been incorrectly entered.

If you receive a message stating "No row found for Contract Completion milestone (milestone_level = 180) in forecast schedule (schedule_type = FC)", this means that the DIQ check did not find the Contract Completion milestone in your forecast schedule. 

To resolve this issue, please review your forecast schedule data in the DS04 Schedule table. Ensure that there is a row with a milestone level of 180, which represents the Contract Completion milestone, and that the schedule type for this row is set to 'FC' for forecast. 

If these conditions are not met, the DIQ check will fail, and you will need to correct your data accordingly.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the forecast schedule includes the Contract Completion milestone. The Contract Completion milestone is a critical point in the project timeline that signifies the completion of the contract's obligations. It is essential for tracking the project's progress and ensuring that all contractual obligations are met on time.

The severity of this test is marked as a WARNING. This means that while the absence of the Contract Completion milestone in the forecast schedule may not immediately prevent the data from being reviewed, it is likely to cause problems during the analysis. The milestone provides a clear endpoint for the project and its absence could lead to inaccurate forecasting, planning, and tracking of the project's progress.

Therefore, this check is important to ensure the completeness and accuracy of the forecast schedule data. It helps in maintaining the integrity of the project management data and ensures that the project is on track to meet its contractual obligations.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsContractCompletionMSMissingInFC] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
    * 
  FROM 
    DummyRow_Get(@upload_ID)	
  WHERE
    (SELECT COUNT(*) FROM DS04_schedule WHERE upload_ID = @upload_ID AND schedule_type = 'FC' AND milestone_level = 180) = 0
)
```
