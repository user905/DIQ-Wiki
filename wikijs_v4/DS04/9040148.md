## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ALERT |
| Unique ID   | 9040148   |
| Summary     | Is the CAM for this task misaligned with what is in DS01 (WBS)? |
| Error message | CAM name does not align with CAM in DS01 (WBS). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "CAM Misaligned with DS01 (WBS)" is designed to verify the alignment of the CAM (Cost Account Manager) for a specific task in the DS04 Schedule table with the CAM listed in the DS01 (WBS) table. 

If an error message "CAM name does not align with CAM in DS01 (WBS)" is received, it indicates that the CAM for a task in the DS04 Schedule table does not match the CAM listed for the same task in the DS01 (WBS) table. 

The fields causing this issue are the CAM fields in both the DS04 Schedule and DS01 (WBS) tables. The expected values in these fields should be identical for the same task across both tables. 

To resolve this issue, ensure that the CAM for each task in the DS04 Schedule table is correctly aligned with the CAM listed for the same task in the DS01 (WBS) table.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Control Account Manager (CAM) for a particular task in the DS04 Schedule table aligns with the CAM listed in the DS01 (Work Breakdown Structure) table. The alignment of these two data points is crucial for maintaining consistency and accuracy across the project management data. 

The importance of this check lies in the fact that any misalignment can lead to confusion, miscommunication, or errors in project management and execution. It could potentially lead to tasks being managed by the wrong person or not being managed at all. 

The severity of this issue is marked as an ALERT. This means that while it may not immediately prevent data from being reviewed or cause significant problems during analysis, it could potentially lead to minor issues or indicate that the data does not adhere to all best practices. Therefore, it is recommended to address this issue to maintain the highest standards of data integrity and quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsCAMMisalignedWithDS01CAM] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	SELECT
		S.*
	FROM
		DS04_schedule S INNER JOIN (SELECT WBS_ID, CAM FROM DS01_WBS WHERE upload_ID = @upload_ID) W ON S.WBS_ID = W.WBS_ID
																									AND S.CAM <> W.CAM
	WHERE
		S.upload_id = @upload_ID
)
```
