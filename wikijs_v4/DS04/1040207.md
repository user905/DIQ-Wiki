## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ERROR |
| Unique ID   | 1040207   |
| Summary     | Is your forecast schedule missing the approve finish project milestone? |
| Error message | No row found for approve finish project milestone (milestone_level = 199) in forecast schedule (schedule_type = FC). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Approve Finish Project Milestone Missing in Forecast" is designed to ensure that your forecast schedule, as recorded in the DS04 Schedule table, includes the "approve finish project" milestone. 

This milestone is crucial for project management as it signifies the completion and approval of the project. The absence of this milestone in your forecast schedule could lead to inaccurate project tracking and forecasting.

The DIQ check is looking for a specific row in the DS04 Schedule table where the 'milestone_level' field is set to '199' (which represents the "approve finish project" milestone) and the 'schedule_type' field is set to 'FC' (which represents the forecast schedule). 

If the DIQ check does not find this specific row, it will return an error message stating "No row found for approve finish project milestone (milestone_level = 199) in forecast schedule (schedule_type = FC)." 

To resolve this issue, ensure that your forecast schedule includes the "approve finish project" milestone with the correct 'milestone_level' and 'schedule_type' values.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the forecast schedule in the DS04 Schedule table includes the 'approve finish project milestone'. The 'approve finish project milestone' is a critical data point that signifies the completion and approval of the project. 

The severity of this test is marked as 'ERROR', which is the highest level of severity. This means that if the 'approve finish project milestone' is missing from the forecast schedule, the data cannot be reviewed or analyzed further. This is because the absence of this milestone could lead to inaccurate forecasting, planning, and project management. 

The importance of this check lies in maintaining the integrity and quality of the project management data. Without this milestone, it would be impossible to accurately track the project's progress and completion status. Therefore, it is crucial to ensure that this milestone is included in the forecast schedule.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsProjFinishMSMissingFC] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
    * 
  FROM 
    DummyRow_Get(@upload_ID)
  WHERE
    (SELECT COUNT(*) FROM DS04_schedule WHERE upload_ID = @upload_ID AND schedule_type = 'FC' AND milestone_level = 199) = 0	
)
```
