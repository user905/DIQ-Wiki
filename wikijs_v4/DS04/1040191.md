## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | WARNING |
| Unique ID   | 1040191   |
| Summary     | Is this major milestone not coded as an SVT? |
| Error message | Major milestone not coded as an SVT (subtype = SVT) (Required on milestone_level = 100-135, 140-170, 190-199, 3xx, and 7xx). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Major Milestone Not Coded As SVT" is designed to ensure that major milestones in the DS04 Schedule table are correctly coded as 'SVT'. 

The error message "Major milestone not coded as an SVT (subtype = SVT) (Required on milestone_level = 100-135, 140-170, 190-199, 3xx, and 7xx)" indicates that there are major milestones that are not correctly coded. 

The fields causing the issue are 'milestone_level' and 'subtype'. The 'milestone_level' field should have values between 100-135, 140-170, 190-199, 300-399, or 700-799 for major milestones. The 'subtype' field for these major milestones should be coded as 'SVT'. 

If the 'subtype' field is not coded as 'SVT' for these major milestones, the DIQ check will fail. To resolve this issue, ensure that all major milestones have the 'subtype' field coded as 'SVT'.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that major milestones in the DS04 Schedule table are correctly coded as SVT (Schedule Variance Threshold). The test checks if the major milestones, particularly those with milestone levels between 100-135, 140-170, 190-199, 3xx, and 7xx, are marked with the subtype 'SVT'. 

The importance of this check lies in maintaining the accuracy and consistency of the project schedule data. Correctly coding major milestones as SVT is crucial for tracking schedule variance, which is a key aspect of project management. Schedule variance provides insights into whether the project is ahead of, on, or behind schedule. 

The severity of this test is marked as 'WARNING', which means that if this issue is not addressed, it is likely to cause problems during the analysis of the project schedule data. It may lead to inaccurate schedule variance calculations and misinterpretations about the project's progress. Therefore, it is important to rectify this issue to ensure the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsMajorMSNotCodedAsSVT] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_ID = @upload_ID
		AND (
			milestone_level BETWEEN 100 AND 135 OR
			milestone_level BETWEEN 140 AND 170 OR
			milestone_level BETWEEN 190 AND 199 OR
			milestone_level BETWEEN 300 AND 399 OR
			milestone_level BETWEEN 700 AND 799
		)
		AND ISNULL(subtype,'') <> 'SVT'
)
```
