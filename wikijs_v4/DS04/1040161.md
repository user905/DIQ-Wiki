## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ALERT |
| Unique ID   | 1040161   |
| Summary     | Is a sufficient justification lacking for the constraint on this task? |
| Error message | Task is lacking a sufficient justification for its constraint (justification_constraint_hard or justification_constraint_soft are lacking at least two words). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Insufficient Constraint Justification" is performed on the DS04 Schedule table. This check is designed to ensure that each task in the schedule has a sufficient justification for its constraints. 

A constraint is a limitation or restriction on a task, and it can be either a hard constraint or a soft constraint. A hard constraint is a strict limitation that must be adhered to, while a soft constraint is more flexible. Each constraint should have a corresponding justification, which is a brief explanation of why the constraint is necessary. 

The DIQ check identifies tasks where the justification for the constraint is insufficient. Specifically, it checks whether the fields 'justification_constraint_hard' or 'justification_constraint_soft' contain less than two words. 

If the DIQ check identifies a task with an insufficient justification, it means that the task's constraint is not adequately explained. This could be due to a data entry error, or it could indicate that the constraint was applied without proper consideration. 

To resolve this issue, review the tasks identified by the DIQ check and provide a sufficient justification for each constraint. The justification should be at least two words long and should clearly explain why the constraint is necessary.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that there is sufficient justification provided for any constraints on tasks in the DS04 Schedule table. The importance of this check is to maintain the integrity and quality of the data by ensuring that all constraints are adequately justified, which aids in understanding the rationale behind the constraints and helps in future decision-making processes.

The severity of this test is marked as an ALERT, which means it is not a critical issue that would prevent the data from being reviewed. However, it does indicate that there might be minor problems or that the data doesn't follow all best practices. In this case, the issue is that the task is lacking a sufficient justification for its constraint, which could potentially cause confusion or misinterpretation during data analysis. Therefore, while it's not a critical error, it's still important to address this issue to ensure the data is as clear and understandable as possible.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsConstraintJustificationInsufficient] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM
		DS04_schedule
	WHERE
			upload_ID = @upload_ID
		AND (
				(constraint_type IN (SELECT type FROM HardConstraints) AND CHARINDEX(' ',TRIM([justification_constraint_hard])) = 0) OR 
				(constraint_type IN (SELECT type FROM SoftConstraints) AND CHARINDEX(' ',TRIM([justification_constraint_soft])) = 0)
		)
)
```
