## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ALERT |
| Unique ID   | 1040138   |
| Summary     | Do the actual and remaining durations sum to more than the original? |
| Error message | duration_actual_days + duration_remaining_days > duration_original_days. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check for the DS04 Schedule table, titled "Actual & Remaining Durations Sum to More Than Original", is designed to ensure that the sum of the actual and remaining durations does not exceed the original duration for any given task. 

This check is important because in project management, the actual duration of a task plus the remaining duration should never exceed the original duration. If it does, it indicates that there may be an error in the data entry or calculation of these durations.

The fields involved in this check are 'duration_actual_days', 'duration_remaining_days', and 'duration_original_days'. The check is performed by adding the values in 'duration_actual_days' and 'duration_remaining_days' for each task and comparing this sum to the value in 'duration_original_days'. If the sum of the actual and remaining durations is greater than the original duration, the check will flag this as an issue.

The expected values for these fields should be such that the sum of 'duration_actual_days' and 'duration_remaining_days' is less than or equal to 'duration_original_days'. If the check flags an issue, it is likely due to incorrect data entry or calculation in one or more of these fields. 

To resolve this issue, review the data in these fields for accuracy and make any necessary corrections. This will ensure that the project schedule is accurate and reliable.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the sum of the actual and remaining durations does not exceed the original duration in the DS04 Schedule table. This is important because if the sum of the actual and remaining durations is greater than the original duration, it indicates that the project is taking longer than initially planned. This could potentially lead to budget overruns and delays in project completion. 

The severity of this check is marked as an ALERT, which means it's not a critical issue that would prevent the data from being reviewed, but it's still a potential problem that needs attention. It's a deviation from best practices and could cause minor problems during data analysis. For instance, it could skew the analysis results and lead to inaccurate project forecasting. Therefore, it's important to address this issue to maintain the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsActDurPlusRemDurGreaterThanOrigDur] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND (duration_remaining_days + duration_actual_days) > duration_original_days
)
```
