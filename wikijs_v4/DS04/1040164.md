## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ALERT |
| Unique ID   | 1040164   |
| Summary     | Is the description for this task duplicated? |
| Error message | Desription is repeated across task IDs (task_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Duplicate Description" is designed to identify any instances where the description for a task in the DS04 Schedule table is duplicated across different task IDs. 

The error message "Description is repeated across task IDs" indicates that the same description has been used for more than one task. This could be due to a data entry error or a lack of unique descriptions for each task. 

The fields causing this issue are the 'description' and 'task_ID' fields in the DS04 Schedule table. The 'description' field should contain unique descriptions for each task, and the 'task_ID' field should contain unique identifiers for each task. 

The expected values for these fields would be unique descriptions and task IDs for each task in the DS04 Schedule table. If the same description is used for multiple tasks, it may be difficult to distinguish between different tasks and could lead to confusion or errors in project management. 

To resolve this issue, ensure that each task has a unique description and task ID. If a description is duplicated, consider revising the descriptions to make them more specific and unique to each task.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS04 Schedule' table to check for any instances where the description for a task is duplicated across different task IDs. The purpose of this check is to ensure that each task has a unique description, which is crucial for clear and unambiguous identification and understanding of each task. 

The severity of this test is marked as 'ALERT', which means it is not a critical issue that would prevent the data from being reviewed, but it is still important to address. Duplicate descriptions could potentially lead to confusion or misinterpretation during data analysis, as it may not be immediately clear which task is being referred to. 

Maintaining data integrity and quality in this regard is important for the overall accuracy and reliability of the project management data. It helps to ensure that all tasks are correctly identified and understood, which in turn supports effective project management and decision-making.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsDescriptionDuplicated] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with ToFlag As (
		SELECT schedule_type, description
		FROM DS04_schedule
		WHERE upload_ID = @upload_ID
		GROUP BY schedule_type, [description]
		HAVING COUNT(*) > 1
	)
	SELECT 
		S.*
	FROM
		DS04_schedule S INNER JOIN ToFlag F ON S.schedule_type = F.schedule_type
											AND S.[description] = F.[description]
	WHERE
		upload_ID = @upload_ID
)
```
