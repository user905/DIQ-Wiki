## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | WARNING |
| Unique ID   | 9040182   |
| Summary     | Is this HDV CI ID missing in the HDV CI list (DS14)? |
| Error message | HDV CI ID missing in the HDV CI list (DS14). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "HDV CI ID Missing in HDV CI List" is designed to verify the consistency of the HDV CI ID field in the DS04 Schedule table with the HDV CI list in the DS14 table. 

The error message "HDV CI ID missing in the HDV CI list (DS14)" indicates that there are one or more HDV CI IDs in the DS04 Schedule table that are not found in the DS14 HDV CI list. This discrepancy could be due to a data entry error, a missing record in the DS14 table, or a mismatch in the HDV CI ID between the two tables.

The HDV CI ID field in the DS04 Schedule table should contain a valid HDV CI ID that corresponds to an ID in the DS14 HDV CI list. If the HDV CI ID in the DS04 Schedule table is not found in the DS14 HDV CI list, this DIQ check will fail.

To resolve this issue, ensure that all HDV CI IDs in the DS04 Schedule table match with the IDs in the DS14 HDV CI list. Any missing or mismatched IDs should be corrected to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that all HDV CI IDs in the 'DS04 Schedule' table are also present in the HDV CI list (DS14). The HDV CI ID is a unique identifier for each item, and it is crucial that there is consistency between different data sets. 

The importance of this check is to maintain data integrity and ensure accurate data analysis. If an HDV CI ID is missing in the HDV CI list, it could lead to incomplete or incorrect results during data analysis. This could potentially impact decision-making processes and the overall success of the EVMS construction project. 

The severity of this test is marked as 'WARNING', which means that while it may not immediately prevent the data from being reviewed, it is likely to cause problems during analysis. Therefore, it is recommended to address this issue promptly to ensure the accuracy and reliability of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsHDVCIIDMissingInDS14] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND TRIM(ISNULL(HDV_CI_ID,'')) <> ''
		AND HDV_CI_ID NOT IN (SELECT HDV_CI_ID FROM DS14_HDV_CI WHERE upload_ID = @upload_ID)
)
```
