## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | WARNING |
| Unique ID   | 1040119   |
| Summary     | Does this completed activity have an actual duration of zero? |
| Error message | Activity with AS_date and AF_date with duration_actual_days = 0. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Completed Activity with Zero Actual Duration" is designed to identify any completed activities in the DS04 Schedule table that have an actual duration of zero days. This check is important because it ensures that all completed activities have been accurately recorded with a non-zero duration.

The DIQ check is looking at three fields in the DS04 Schedule table: the activity start date (AS_date), the activity finish date (AF_date), and the actual duration of the activity in days (duration_actual_days). The check is designed to flag any records where both the AS_date and AF_date fields are populated (indicating a completed activity), but the duration_actual_days field is recorded as zero.

If this DIQ check flags any records, it is likely because there is an error in the data entry for the duration_actual_days field. A completed activity should have a non-zero duration, so a value of zero in this field is likely incorrect. The expected value for the duration_actual_days field would be the difference in days between the AS_date and the AF_date. 

Please note that this check excludes records of type 'SM' and 'FM'. If a record is flagged by this check, please review the AS_date, AF_date, and duration_actual_days fields for accuracy.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS04 Schedule' table to check for any completed activities that have an actual duration of zero. The purpose of this test is to ensure the accuracy and consistency of the project schedule data. In project management, the actual duration of an activity is a critical piece of information that helps in tracking project progress and performance. 

The importance of this check lies in its potential to identify data inconsistencies or errors. A completed activity with zero actual duration could indicate a data entry error or a problem with the scheduling or tracking system. It could also potentially skew project performance metrics and lead to inaccurate project status reports.

The severity of this check is marked as 'WARNING', which means that while it may not prevent the data from being reviewed, it is likely to cause problems during analysis. It is therefore important to address this issue to ensure the integrity and reliability of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_DoesCompletedActivityHaveZeroActDur] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND type NOT IN ('SM','FM')
		AND AS_date IS NOT NULL
		AND AF_date IS NOT NULL
		And duration_actual_days = 0
)
```
