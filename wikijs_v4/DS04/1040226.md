## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | WARNING |
| Unique ID   | 1040226   |
| Summary     | Should this ZBA be coded as a subcontract alignment milestone? |
| Error message | ZBA subtype (subtype = ZBA) found on non-subcontract alignment milestone (milestone_level <> 8xx). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check for the DS04 Schedule table, titled "ZBA Not Coded As Subcontract Alignment Milestone", is designed to ensure that all ZBA subtypes are correctly coded as subcontract alignment milestones. 

The error message "ZBA subtype (subtype = ZBA) found on non-subcontract alignment milestone (milestone_level <> 8xx)" indicates that there are instances where the 'subtype' field is marked as 'ZBA', but the corresponding 'milestone_level' is not within the range of 800 to 899. 

This discrepancy is likely due to a data entry error or a misalignment in the coding process. The expected values for a ZBA subtype should be a 'milestone_level' within the range of 800 to 899, as this range is designated for subcontract alignment milestones. 

To resolve this issue, review the entries in the DS04 Schedule table and ensure that all ZBA subtypes are correctly associated with a 'milestone_level' within the 800 to 899 range.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed on the 'DS04 Schedule' table to check if the Zero Balance Account (ZBA) is correctly coded as a subcontract alignment milestone. The test has a severity level of 'WARNING', which means that if the issue is not addressed, it could potentially cause problems during data analysis.

The importance of this check lies in ensuring the accuracy and consistency of the data. In this case, the test is checking if a ZBA subtype is found on a non-subcontract alignment milestone, which is not the standard practice. If the ZBA is not correctly coded, it could lead to incorrect data interpretation and analysis, which could in turn affect the overall project management and decision-making process. Therefore, it is crucial to address this issue to maintain the integrity and quality of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsZBANotMSLevel8xx] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		*
	FROM
		DS04_schedule
	WHERE
			upload_id = @upload_ID
		AND ISNULL(subtype,'') = 'ZBA'
		AND milestone_level NOT BETWEEN 800 AND 899
)
```
