## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ERROR |
| Unique ID   | 1040210   |
| Summary     | Is your schedule data missing either the BL or FC schedule? |
| Error message | Zero rows found in either the BL or FC schedule (schedule_type = BL or FC). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Schedule Missing" is designed to verify the presence of both the Baseline (BL) and Forecast (FC) schedules in the DS04 Schedule table. 

An error message "Zero rows found in either the BL or FC schedule" indicates that either the Baseline or Forecast schedule data is missing. This is likely due to incomplete data entry or data import. 

The DIQ check is looking at the 'schedule_type' field in the DS04 Schedule table. This field should contain either 'BL' for Baseline schedule or 'FC' for Forecast schedule. If either of these values is missing, the DIQ check will fail. 

To resolve this issue, ensure that both the Baseline and Forecast schedule data are correctly entered or imported into the DS04 Schedule table. Each row of data should have a 'schedule_type' value of either 'BL' or 'FC'.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the 'DS04 Schedule' table in the EVMS construction project management data contains the necessary schedule data. Specifically, it is checking for the presence of either the BL (Baseline) or FC (Forecast) schedule. 

The importance of this check lies in the critical role that both BL and FC schedules play in project management. The BL schedule represents the original plan for the project, while the FC schedule reflects the current expectations for the project's completion. Without these schedules, it would be impossible to track the project's progress or make informed decisions about resource allocation and timeline adjustments.

The severity of this test is marked as 'ERROR', which is the highest level of severity. This means that if either the BL or FC schedule is missing, the data cannot be reviewed or used for further analysis. Therefore, it is crucial to address this issue immediately to ensure data integrity and quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsScheduleMissing] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
  with Tasks as (
    SELECT distinct schedule_type
    FROM DS04_schedule
    WHERE upload_ID=@upload_id
  )
	SELECT 
    * 
  FROM 
    DummyRow_Get(@upload_ID)	
  WHERE
    (SELECT COUNT(*) FROM Tasks WHERE schedule_type = 'BL') = 0 OR
		(SELECT COUNT(*) FROM Tasks WHERE schedule_type = 'FC') = 0
)
```
