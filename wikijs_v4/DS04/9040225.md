## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS04 Schedule |
| Severity    | ALERT |
| Unique ID   | 9040225   |
| Summary     | Is this WBS ID typed as something other than WP, PP, or SLPP in the WBS Dictionary? |
| Error message | WBS_ID is not WP, PP, or SLPP type in DS01.type. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Non-WP, PP, or SLPP Type Found in Schedule" is designed to ensure that the type of Work Breakdown Structure (WBS) ID in the DS04 Schedule table is correctly classified. The WBS ID should be of type 'WP', 'PP', or 'SLPP' as per the WBS Dictionary in the DS01 table.

If an error message "WBS_ID is not WP, PP, or SLPP type in DS01.type" is received, it indicates that there is a WBS ID in the DS04 Schedule table that is not classified as 'WP', 'PP', or 'SLPP' in the DS01 WBS Dictionary. This discrepancy could be due to a data entry error or a misclassification of the WBS ID type in the DS01 table.

To resolve this issue, review the WBS IDs in the DS04 Schedule table and ensure that they are correctly classified in the DS01 WBS Dictionary. The WBS ID types should only be 'WP', 'PP', or 'SLPP'. Any other type is considered invalid and will cause this DIQ check to fail.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure that the Work Breakdown Structure (WBS) ID in the DS04 Schedule table is correctly classified as either WP (Work Package), PP (Planning Package), or SLPP (Summary Level Planning Package) in the WBS Dictionary. The test checks the 'type' field in the DS01 table to verify this.

The importance of this check is to maintain consistency and accuracy in the classification of WBS IDs. This is crucial for proper project management and reporting, as the type of WBS ID can impact how tasks are scheduled, resources are allocated, and progress is tracked. 

The severity level of this test is an ALERT, which means it's not a critical error that would prevent data review, but it's a potential issue that could cause minor problems or indicate that the data doesn't adhere to all best practices. It's a signal to review the data and correct any inconsistencies to ensure optimal data integrity and quality.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS04_Sched_IsWBSTypeDisallowed] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	with Disallowed as (
		SELECT WBS_ID 
		FROM DS01_WBS 
		WHERE upload_ID = @upload_ID AND type NOT IN ('WP','PP','SLPP'))
	SELECT
		S.*
	FROM
		DS04_schedule S INNER JOIN Disallowed D ON S.WBS_ID = D.WBS_ID
	WHERE
		upload_id = @upload_ID
)
```
