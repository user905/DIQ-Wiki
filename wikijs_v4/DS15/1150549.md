## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS15 Risk Register |
| Severity    | ALERT |
| Unique ID   | 1150549   |
| Summary     | Is the approved date after the closed date? |
| Error message | approved_date > closed_date. |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Approved Date After Closed Date" is performed on the DS15 Risk Register data. This check is designed to ensure that the date a risk was approved is not later than the date the risk was closed. 

If an error is flagged by this DIQ check, it indicates that there are instances where the 'approved_date' is later than the 'closed_date'. This is not expected as a risk should be approved before it is closed. 

The fields causing the issue are 'approved_date' and 'closed_date'. The expected values should be such that the 'approved_date' is earlier than or equal to the 'closed_date'. 

Please review the data in these fields for any discrepancies and correct them to ensure data integrity and quality.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to ensure the chronological accuracy of the data in the 'DS15 Risk Register' table. Specifically, it checks whether the 'approved date' of a risk is recorded as being after the 'closed date'. This is logically incorrect as a risk cannot be approved after it has been closed. 

The importance of this check is to maintain the integrity and reliability of the data. If the dates are not recorded correctly, it could lead to confusion and misinterpretation of the data, which could negatively impact decision-making processes related to risk management in the EVMS construction project. 

The severity of this issue is marked as an 'ALERT', which means it is not a critical error that would prevent the data from being reviewed. However, it does indicate a potential minor problem or a deviation from best data management practices. Therefore, it is recommended to correct this issue to ensure the highest quality and accuracy of the data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS15_Risk_Register_IsAppDateGtClosedDate] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT 
		*
	FROM 
		DS15_risk_register
	WHERE 
			upload_ID = @upload_ID 
		AND closed_date < approved_date
)
```
