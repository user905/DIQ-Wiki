## Basic Information
| Key         | Value          |
|-------------|----------------|
| Table       | DS13 Subcontract |
| Severity    | ALERT |
| Unique ID   | 9130518   |
| Summary     | Is the actual start date misaligned with the actual start in the forecast schedule? |
| Error message | AS_date <> DS04.AS_date where schedule_type = FC (by task_ID). |

## What causes this error?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

The Data Integrity and Quality (DIQ) check titled "Actual Start Misaligned with Forecast Schedule" is designed to identify discrepancies between the actual start date of a task in the DS13 Subcontract table and the forecasted start date in the DS04 Schedule table. 

This check is performed by comparing the 'AS_date' field in both tables for each task, identified by the 'task_ID'. If the actual start date ('AS_date') in the DS13 Subcontract table does not match the forecasted start date ('AS_date') in the DS04 Schedule table, the DIQ check will flag this as an error.

The likely cause of this error is a misalignment between the actual start date of a task and the forecasted start date. This could be due to changes in the project schedule that were not updated in both tables, or due to data entry errors. 

To resolve this issue, ensure that the actual start date of each task in the DS13 Subcontract table matches the forecasted start date in the DS04 Schedule table. The expected value for the 'AS_date' field in both tables should be the same for each task.
## Why do we check this?

> :robot: The following text was generated by an AI tool and hasn't been reviewed for accuracy by a human! It might be useful, but it also might have errors. Are you a human? You can help by reviewing it for accuracy! Edit it as needed then remove this message.
{.is-warning}

This test is being performed to check if the actual start date of a task in the DS13 Subcontract table is misaligned with the actual start date in the forecast schedule. The test is comparing the actual start date (AS_date) in the DS13 Subcontract table with the actual start date in the DS04 table where the schedule type is forecast (FC), for each task ID.

The importance of this check is to ensure that the actual start dates in the project data are consistent with the forecasted schedule. This is crucial for maintaining accurate and reliable project timelines. If the actual start dates do not align with the forecasted schedule, it could indicate potential issues with project planning or execution, which could lead to delays or cost overruns.

The severity of this check is marked as an ALERT. This means that while it may not immediately prevent data from being reviewed or analyzed, it could potentially cause minor problems or indicate that the data does not adhere to all best practices. It's a signal to review the data and correct any discrepancies to ensure the integrity and quality of the project management data.
## Code

```sql

CREATE FUNCTION [dbo].[fnDIQ_DS13_SubK_IsASDateMisalignedWithDS04] (
	@upload_id int = 0
)
RETURNS TABLE
AS RETURN
(
	
	SELECT
		SK.*
	FROM 
		DS13_subK SK INNER JOIN DS04_schedule S ON SK.task_ID = S.task_ID
	WHERE 
			SK.upload_ID = @upload_ID 
		AND S.upload_ID = @upload_ID
		AND SK.AS_date <> S.AS_date
)
```
